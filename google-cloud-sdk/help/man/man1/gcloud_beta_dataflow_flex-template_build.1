
.TH "GCLOUD_BETA_DATAFLOW_FLEX\-TEMPLATE_BUILD" 1



.SH "NAME"
.HP
gcloud beta dataflow flex\-template build \- builds a flex template file from the specified parameters



.SH "SYNOPSIS"
.HP
\f5gcloud beta dataflow flex\-template build\fR \fITEMPLATE_FILE_GCS_PATH\fR \fB\-\-sdk\-language\fR=\fISDK_LANGUAGE\fR (\fB\-\-image\fR=\fIIMAGE\fR\ |\ \fB\-\-env\fR=[\fIENV\fR,...]\ \fB\-\-flex\-template\-base\-image\fR=\fIFLEX_TEMPLATE_BASE_IMAGE\fR\ \fB\-\-image\-gcr\-path\fR=\fIIMAGE_GCR_PATH\fR\ \fB\-\-jar\fR=[\fIJAR\fR,...]) [\fB\-\-metadata\-file\fR=\fIMETADATA_FILE\fR] [\fB\-\-print\-only\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(BETA)\fR Builds a flex template file from the specified parameters.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fITEMPLATE_FILE_GCS_PATH\fR
The Google Cloud Storage location of the flex template file.Overrides if file
already exists.


.RE
.sp

.SH "REQUIRED FLAGS"

.RS 2m
.TP 2m
\fB\-\-sdk\-language\fR=\fISDK_LANGUAGE\fR
SDK language of the flex template job. \fISDK_LANGUAGE\fR must be one of:
\fBJAVA\fR, \fBPYTHON\fR.

.TP 2m

Exactly one of these must be specified:

.RS 2m
.TP 2m
\fB\-\-image\fR=\fIIMAGE\fR
Path to the any image registry location of the prebuilt flex template image.

.TP 2m
\fB\-\-env\fR=[\fIENV\fR,...]
Environment variables to create for the Dockerfile. You can pass them as a comma
separated list or repeat individually with \-\-env flag. Ex: \-\-env="A=B,C=D"
or \-\-env A=B, \-\-env C=D.You can find the list of supported environment
variables in this link.
https://cloud.google.com/dataflow/docs/guides/templates/troubleshooting\-flex\-templates#setting_required_dockerfile_environment_variables
This flag must be specified if any of the other arguments in this group are
specified.

.TP 2m
\fB\-\-flex\-template\-base\-image\fR=\fIFLEX_TEMPLATE_BASE_IMAGE\fR
Flex template base image to be used while building the container image. Allowed
choices are JAVA8, JAVA11 or gcr.io path of the specific version of the base
image. For JAVA8 and JAVA11 option, we use the latest base image version to
build the container. You can also provide a specific version from this link
https://gcr.io/dataflow\-templates\-base/ This flag must be specified if any of
the other arguments in this group are specified.

.TP 2m
\fB\-\-image\-gcr\-path\fR=\fIIMAGE_GCR_PATH\fR
The Google Container Registry location to store the flex template image to be
built. This flag must be specified if any of the other arguments in this group
are specified.

.TP 2m
\fB\-\-jar\fR=[\fIJAR\fR,...]
Local path to your dataflow pipeline jar file and all their dependent jar files
required for the flex template classpath. You can pass them as a comma separated
list or repeat individually with \-\-jar flag. Ex: \-\-jar="code.jar,dep.jar" or
\-\-jar code.jar, \-\-jar dep.jar. This flag must be specified if any of the
other arguments in this group are specified.


.RE
.RE
.sp

.SH "OPTIONAL FLAGS"

.RS 2m
.TP 2m
\fB\-\-metadata\-file\fR=\fIMETADATA_FILE\fR
Local path to the metadata json file for the flex template.

.TP 2m
\fB\-\-print\-only\fR
Prints the container spec to stdout. Does not save in Google Cloud Storage.
Overrides the default \fBdataflow/print_only\fR property value for this command
invocation.


.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity.

Run \fB$ gcloud help\fR for details.



.SH "EXAMPLES"

To build and store a the flex template json file, run:

.RS 2m
$ gcloud beta dataflow flex\-template build \e
    gs://template\-file\-gcs\-path \-\-image=gcr://image\-path           \e
        \-\-metadata\-file=/local/path/to/metadata.json \e
    \-\-sdk\-language=JAVA
.RE

.RS 2m
$ gcloud beta dataflow flex\-template build \e
    gs://template\-file\-gcs\-path             \e
    \-\-image\-gcr\-path=gcr://path\-tos\-tore\-image             \e
    \-\-jar path/to/pipeline.jar \-\-jar path/to/dependency.jar        \e
         \-\-env FLEX_TEMPLATE_JAVA_MAIN_CLASS=classpath             \e
    \-\-flex\-template\-base\-image JAVA11             \e
    \-\-metadata\-file=/local/path/to/metadata.json \-\-sdk\-language=JAVA
.RE



.SH "NOTES"

This command is currently in BETA and may change without notice. This variant is
also available:

.RS 2m
$ gcloud dataflow flex\-template build
.RE



.TH "GCLOUD_ALPHA_SERVICES_API\-KEYS_CREATE" 1



.SH "NAME"
.HP
gcloud alpha services api\-keys create \- create an API key



.SH "SYNOPSIS"
.HP
\f5gcloud alpha services api\-keys create\fR [\fB\-\-async\fR] [\fB\-\-display\-name\fR=\fIDISPLAY_NAME\fR] [\fB\-\-api\-target\fR=\fIservice\fR=\fISERVICE\fR,[...]\ \fB\-\-allowed\-application\fR=[\fIsha1_fingerprint\fR=\fISHA1_FINGERPRINT\fR,\fIpackage_name\fR=\fIPACKAGE_NAME\fR,...]\ |\ \fB\-\-allowed\-bundle\-ids\fR=[\fIALLOWED_BUNDLE_IDS\fR,...]\ |\ \fB\-\-allowed\-ips\fR=[\fIALLOWED_IPS\fR,...]\ |\ \fB\-\-allowed\-referrers\fR=[\fIALLOWED_REFERRERS\fR,...]] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(ALPHA)\fR Create an API key.



.SH "FLAGS"

.RS 2m
.TP 2m
\fB\-\-async\fR
Return immediately, without waiting for the operation in progress to complete.

.TP 2m
\fB\-\-display\-name\fR=\fIDISPLAY_NAME\fR
Display name of the key to create.

.TP 2m
\fB\-\-api\-target\fR=\fIservice\fR=\fISERVICE\fR,[...]
This flag is repeatable to specify multiple api targets. \f5service\fR and
optionally one or multiple specific \f5methods\fR. Both fields are case
insensitive. If you need to specify methods, it should be specified with the
\f5\-\-flags\-file\fR. See $ gcloud topic flags\-file for details. See the
examples section for how to use \f5\-\-api\-target\fR in \f5\-\-flags\-file\fR.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-allowed\-application\fR=[\fIsha1_fingerprint\fR=\fISHA1_FINGERPRINT\fR,\fIpackage_name\fR=\fIPACKAGE_NAME\fR,...]
This flag is repeatable to specify multiple allowed applications. The accepted
keys are \f5sha1_fingerprint\fR and \f5package_name\fR.

.TP 2m
\fB\-\-allowed\-bundle\-ids\fR=[\fIALLOWED_BUNDLE_IDS\fR,...]
iOS app's bundle ids that are allowed to use the key.

.TP 2m
\fB\-\-allowed\-ips\fR=[\fIALLOWED_IPS\fR,...]
A list of the caller IP addresses that are allowed to make API calls with this
key.

.TP 2m
\fB\-\-allowed\-referrers\fR=[\fIALLOWED_REFERRERS\fR,...]
A list of regular expressions for the referrer URLs that are allowed to make API
calls with this key.


.RE
.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity.

Run \fB$ gcloud help\fR for details.



.SH "EXAMPLES"

To create a key with display name and allowed ips specified:

.RS 2m
$ gcloud alpha services api\-keys create \-\-display\-name="test name" \e
    \-\-allowed\-ips=2620:15c:2c4:203:2776:1f90:6b3b:217,104.133.8.78
.RE

To create a key with allowed referrers restriction:

.RS 2m
$ gcloud alpha services api\-keys create \e
    \-\-allowed\-referrers="https://www.example.com/*,http://sub.exampl\e
e.com/*"
.RE

To create a key with allowed ios app bundle ids:

.RS 2m
$ gcloud alpha services api\-keys create \-\-allowed\-bundle\-ids=my.app
.RE

To create a key with allowed android application:

.RS 2m
$ gcloud alpha services api\-keys create \e
    \-\-allowed\-application=sha1_fingerprint=foo1,\e
package_name=bar.foo \e
    \-\-allowed\-application=sha1_fingerprint=foo2,package_name=foo.bar
.RE

To create a key with allowed api targets (service name only):

.RS 2m
$ gcloud alpha services api\-keys create \e
    \-\-api\-target=service=bar.service.com \e
    \-\-api\-target=service=foo.service.com
.RE

To create a keys with allowed api targets (service and methods are specified):

.RS 2m
$ gcloud alpha services api\-keys create \-\-flags\-file=my\-flags.yaml
.RE

The content of 'my\-flags.yaml' is as following:

.RS 2m
\- \-\-api\-target:
    service:
      \- "foo.service.com"
\- \-\-api\-target:
    service:
      \- "bar.service.com"
    methods:
      \- "foomethod"
      \- "barmethod"
.RE



.SH "NOTES"

This command is currently in ALPHA and may change without notice. If this
command fails with API permission errors despite specifying the right project,
you may be trying to access an API with an invitation\-only early access
allowlist.


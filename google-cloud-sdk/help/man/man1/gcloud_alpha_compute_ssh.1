
.TH "GCLOUD_ALPHA_COMPUTE_SSH" 1



.SH "NAME"
.HP
gcloud alpha compute ssh \- SSH into a virtual machine instance



.SH "SYNOPSIS"
.HP
\f5gcloud alpha compute ssh\fR [\fIUSER\fR@]\fIINSTANCE\fR [\fB\-\-command\fR=\fICOMMAND\fR] [\fB\-\-container\fR=\fICONTAINER\fR] [\fB\-\-dry\-run\fR] [\fB\-\-force\-key\-file\-overwrite\fR] [\fB\-\-internal\-ip\fR] [\fB\-\-plain\fR] [\fB\-\-ssh\-flag\fR=\fISSH_FLAG\fR] [\fB\-\-ssh\-key\-file\fR=\fISSH_KEY_FILE\fR] [\fB\-\-strict\-host\-key\-checking\fR=\fISTRICT_HOST_KEY_CHECKING\fR] [\fB\-\-zone\fR=\fIZONE\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR] [\-\-\ \fISSH_ARGS\fR\ ...]



.SH "DESCRIPTION"

\fB(ALPHA)\fR \fBgcloud alpha compute ssh\fR is a thin wrapper around the
\fBssh(1)\fR command that takes care of authentication and the translation of
the instance name into an IP address.

The default network comes preconfigured to allow ssh access to all VMs. If the
default network was edited, or if not using the default network, you may need to
explicitly enable ssh access by adding a firewall\-rule:

.RS 2m
$ gcloud compute firewall\-rules create \-\-network=NETWORK           \e
      default\-allow\-ssh \-\-allow tcp:22
.RE

This command does not work for Windows VMs.

This command uses the Compute Accounts API to ensure that the user's public SSH
key is availibe to the VM. This form of key management will only work with VMs
configured to work with the Compute Accounts API. If the user does not have a
public SSH key, one is generated using \fBssh\-keygen(1)\fR (if \f5the
\-\-quiet\fR flag is given, the generated key will have an empty passphrase).



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
[\fIUSER\fR@]\fIINSTANCE\fR
Specifies the instance to SSH into.

\f5\fIUSER\fR\fR specifies the username with which to SSH. If omitted, $USER
from the environment is selected.

\f5\fIINSTANCE\fR\fR specifies the name of the virtual machine instance to SSH
into.

.TP 2m
[\-\- \fISSH_ARGS\fR ...]
Flags and positionals passed to the underlying ssh implementation.


The '\-\-' argument must be specified between gcloud specific args on the left
and SSH_ARGS on the right. Example:

.RS 2m
$ gcloud alpha compute ssh example\-instance \-\-zone us\-central1\-a \e
\-\- \-vvv \-L 80:%INSTANCE%:80
.RE


.RE
.sp

.SH "FLAGS"

.RS 2m
.TP 2m
\fB\-\-command\fR=\fICOMMAND\fR
A command to run on the virtual machine.

Runs the command on the target instance and then exits.

.TP 2m
\fB\-\-container\fR=\fICONTAINER\fR
The name or ID of a container inside of the virtual machine instance to connect
to. This only applies to virtual machines that are using a Google
Container\-Optimized virtual machine image. For more information, see
https://cloud.google.com/compute/docs/containers

.TP 2m
\fB\-\-dry\-run\fR
Print the equivalent scp/ssh command that would be run to stdout, instead of
executing it.

.TP 2m
\fB\-\-force\-key\-file\-overwrite\fR
If enabled, the gcloud command\-line tool will regenerate and overwrite the
files associated with a broken SSH key without asking for confirmation in both
interactive and non\-interactive environments.

If disabled, the files associated with a broken SSH key will not be regenerated
and will fail in both interactive and non\-interactive environments.

.TP 2m
\fB\-\-internal\-ip\fR
Connect to instances using their private IP addresses. By default, gcloud
attempts to establish a ssh connection only if the specified instance has a
public IP address. When this flag is present, gcloud attempts to connect to the
instance using the IP of the internal network instance even if the instance has
a public IP.

For the connection to work, your network must already be configured to allow you
to establish connections using the instance's private network IP.

gcloud will verify that the instance it connected to reports the same id as the
instance you requested connection to. This only helps with catching network
configuration mistakes and is not meant as protection against any kind of
attack.

The same IP can appear in two internal networks and can result in an incorrect
connection. For example, instance\-1 in network\-1 has the same internal IP as
instance\-2 in network\-2. You want to connect to instance\-1 but your network
configuration results in opening a connection to instance\-2. This requires the
instance to have curl tool available.

.TP 2m
\fB\-\-plain\fR
Suppress the automatic addition of \fBssh(1)\fR/\fBscp(1)\fR flags. This flag is
useful if you want to take care of authentication yourself or use specific
ssh/scp features.

.TP 2m
\fB\-\-ssh\-flag\fR=\fISSH_FLAG\fR
Additional flags to be passed to \fBssh(1)\fR. It is recommended that flags be
passed using an assignment operator and quotes. This flag will replace
occurences of \f5\fI%USER%\fR\fR and \f5\fI%INSTANCE%\fR\fR with their
dereferenced values. Example:

.RS 2m
$ gcloud alpha compute ssh example\-instance \-\-zone us\-central1\-a \e
    \-\-ssh\-flag="\-vvv" \-\-ssh\-flag="\-L 80:%INSTANCE%:80"
.RE

is equivalent to passing the flags \f5\fI\-\-vvv\fR\fR and \f5\fI\-L
80:162.222.181.197:80\fR\fR to \fBssh(1)\fR if the external IP address of
\'example\-instance' is 162.222.181.197.

.TP 2m
\fB\-\-ssh\-key\-file\fR=\fISSH_KEY_FILE\fR
The path to the SSH key file. By default, this is
\f5\fI~/.ssh/google_compute_engine\fR\fR.

.TP 2m
\fB\-\-strict\-host\-key\-checking\fR=\fISTRICT_HOST_KEY_CHECKING\fR
Override the default behavior of StrictHostKeyChecking for the connection. By
default, StrictHostKeyChecking is set to 'no' the first time you connect to an
instance, and will be set to 'yes' for all subsequent connections.
\fISTRICT_HOST_KEY_CHECKING\fR must be one of: \fByes\fR, \fBno\fR, \fBask\fR.

.TP 2m
\fB\-\-zone\fR=\fIZONE\fR
The zone of the instance to connect to. If not specified and the
\f5\fIcompute/zone\fR\fR property isn't set, you will be prompted to select a
zone.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/zone\fR\fR property:

.RS 2m
$ gcloud config set compute/zone ZONE
.RE

A list of zones can be fetched by running:

.RS 2m
$ gcloud compute zones list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/zone
.RE

Alternatively, the zone can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_ZONE\fR\fR.


.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-configuration,
\-\-flatten, \-\-format, \-\-help, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity. Run \fB$ gcloud
help\fR for details.



.SH "EXAMPLES"

To SSH into 'example\-instance' in zone \f5\fIus\-central1\-a\fR\fR, run:

.RS 2m
$ gcloud alpha compute ssh example\-instance \-\-zone us\-central1\-a
.RE

You can also run a command on the virtual machine. For example, to get a
snapshot of the guest's process tree, run:

.RS 2m
$ gcloud alpha compute ssh example\-instance \-\-zone us\-central1\-a \e
    \-\-command "ps \-ejH"
.RE

If you are using the Google Container\-Optimized virtual machine image, you can
SSH into one of your containers with:

.RS 2m
$ gcloud alpha compute ssh example\-instance \-\-zone us\-central1\-a \e
    \-\-container CONTAINER
.RE



.SH "NOTES"

This command is currently in ALPHA and may change without notice. Usually, users
of ALPHA commands and flags need to apply for access, agree to applicable terms,
and have their projects whitelisted. Contact Google or sign up on a product's
page for ALPHA access. Product pages can be found at
https://cloud.google.com/products/. These variants are also available:

.RS 2m
$ gcloud compute ssh
$ gcloud beta compute ssh
.RE


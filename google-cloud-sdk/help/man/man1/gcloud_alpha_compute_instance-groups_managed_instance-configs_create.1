
.TH "GCLOUD_ALPHA_COMPUTE_INSTANCE\-GROUPS_MANAGED_INSTANCE\-CONFIGS_CREATE" 1



.SH "NAME"
.HP
gcloud alpha compute instance\-groups managed instance\-configs create \- create per instance config for managed instance group



.SH "SYNOPSIS"
.HP
\f5gcloud alpha compute instance\-groups managed instance\-configs create\fR \fINAME\fR \fB\-\-instance\fR=\fIINSTANCE\fR [\fB\-\-force\-instance\-update\fR] [\fB\-\-stateful\-disk\fR=[\fIauto\-delete\fR=\fIAUTO\-DELETE\fR],[\fIdevice\-name\fR=\fIDEVICE\-NAME\fR],[\fImode\fR=\fIMODE\fR],[\fIsource\fR=\fISOURCE\fR]] [\fB\-\-stateful\-metadata\fR=\fIKEY\fR=\fIVALUE\fR,[\fIKEY\fR=\fIVALUE\fR,...]] [\fB\-\-region\fR=\fIREGION\fR\ |\ \fB\-\-zone\fR=\fIZONE\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(ALPHA)\fR \fBgcloud alpha compute instance\-groups managed instance\-configs
create\fR creates per instance config for instance controlled by a Google
Compute Engine managed instance group. An instance with a per instance config
will preserve given name and any listed disks during instance recreation and
deletion. Preserved names will be (re)used and resources (re)attached in managed
instance group during creation of the new instances in effect of recreation,
restart and potentially other operations changing existence of the instance.

You can use this command on an instance that does not exist. In this case config
will be added to the pool of per instance configs to utilise for creating new
instances. Order of utilisation of these configs from the pool is non
deterministic.

If created for existing instance, changes will be applied during next instance
update or recreation \- unless it is forced by \f5\-\-force\-instance\-update\fR
option.

When you create config for non existing instance in regional managed instance
group, use the full URI to the instance \- pointing to target zone. Just
instance name will not be resolved.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fINAME\fR
Name of the managed instance group to create per instance config for.


.RE
.sp

.SH "REQUIRED FLAGS"

.RS 2m
.TP 2m
\fB\-\-instance\fR=\fIINSTANCE\fR
URI to existing or non existing instance.

Name \- last part of URI \- will be preserved for existing per instance configs.

For zonal managed instance groups there is no need to specify the whole URI to
the instance \- for this case instance name can be applied instead of URI.


.RE
.sp

.SH "OPTIONAL FLAGS"

.RS 2m
.TP 2m
\fB\-\-force\-instance\-update\fR
The changes will be applied immediately to the instances. If this flag is not
provided, the changes will be applied once the instances are restarted or
recreated.

Example: let's say we have an instance with a disk attached to it and an
override for the disk. If we decide to delete the override and provide this
flag, this will instantly recreate the instance and detach the disk from it.
Similarly if we have attached new disk or changed its definition \- with this
flag it will instantly recreate instance with newly applied overrides.

If we omit this flag, the instance will continue to exist with no overrides
changes applied until it gets restarted or recreated either manually or by
autohealer or updater.

.TP 2m
\fB\-\-stateful\-disk\fR=[\fIauto\-delete\fR=\fIAUTO\-DELETE\fR],[\fIdevice\-name\fR=\fIDEVICE\-NAME\fR],[\fImode\fR=\fIMODE\fR],[\fIsource\fR=\fISOURCE\fR]
Disks considered stateful by the instance group. Usually, the managed instance
group deletes disks when deleting instances; however, in the case of stateful
disks, these disks are detached from the deleted instance and attached to new
instances the managed instance group creates.

Besides preserving disks already attached to the instance by specifying only
device names, user have an option to attach (and preserve) other existing
persistent disk(s) to the given instance.

The same disk can be attached to many instances but only in read\-only mode.

Use this argument multiple times to attach more disks.

.RS 2m
.TP 2m
\fBdevice\-name\fR
Name under which disk is or will be attached.

.TP 2m
\fBsource\fR
Optional argument used to specify URI of existing persistent disk to attach
under specified \f5device\-name\fR.

.TP 2m
\fBmode\fR
Specifies the mode of the disk to attach. Supported options are \f5ro\fR for
read\-only and \f5rw\fR for read\-write. If omitted when source is specified,
\f5rw\fR is used as a default.

.TP 2m
\fBauto\-delete\fR
(Optional) Specifies the auto deletion policy of the stateful disk. Supported
values are 'never' (never delete this disk) and
\'on\-permanent\-instance\-deletion' (delete the stateful disk when the given
instance is permanently deleted from the instance group; for example when the
group is resized down). If omitted, 'never' is used as the default.

.RE
.sp
.TP 2m
\fB\-\-stateful\-metadata\fR=\fIKEY\fR=\fIVALUE\fR,[\fIKEY\fR=\fIVALUE\fR,...]
Additional metadata to be made available to the guest operating system on top of
the metadata defined in the instance template.

Stateful metadata may be used to define a key/value pair specific for the one
given instance to differentiate it from the other instances in the managed
instance group.

Stateful metadata have priority over the metadata defined in the instance
template. It means that stateful metadata defined for the keys already existing
in the instance template override their values.

Each metadata entry is a key/value pair separated by an equals sign. Metadata
keys must be unique and less than 128 bytes in length. Multiple entries can be
passed to this flag, e.g., \f5\fI\-\-stateful\-metadata
key\-1=value\-1,key\-2=value\-2,key\-3=value\-3\fR\fR.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-region\fR=\fIREGION\fR
Region of the managed instance group to create per instance config for. If not
specified, you may be prompted to select a region.

A list of regions can be fetched by running:

.RS 2m
$ gcloud compute regions list
.RE

Overrides the default \fBcompute/region\fR property value for this command
invocation.

.TP 2m
\fB\-\-zone\fR=\fIZONE\fR
Zone of the managed instance group to create per instance config for. If not
specified, you may be prompted to select a zone.

A list of zones can be fetched by running:

.RS 2m
$ gcloud compute zones list
.RE

Overrides the default \fBcompute/zone\fR property value for this command
invocation.


.RE
.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity. Run \fB$ gcloud
help\fR for details.



.SH "NOTES"

This command is currently in ALPHA and may change without notice. If this
command fails with API permission errors despite specifying the right project,
you will have to apply for early access and have your projects registered on the
API whitelist to use it. To do so, contact Support at
https://cloud.google.com/support/.



.TH "GCLOUD_ALPHA_COMPUTE_MACHINE\-IMAGES_CREATE" 1



.SH "NAME"
.HP
gcloud alpha compute machine\-images create \- create a Compute Engine machine image



.SH "SYNOPSIS"
.HP
\f5gcloud alpha compute machine\-images create\fR \fIIMAGE\fR \fB\-\-source\-instance\fR=\fISOURCE_INSTANCE\fR [\fB\-\-csek\-key\-file\fR=\fIFILE\fR] [\fB\-\-description\fR=\fIDESCRIPTION\fR] [\fB\-\-guest\-flush\fR] [\fB\-\-no\-require\-csek\-key\-create\fR] [\fB\-\-source\-disk\-csek\-key\fR=[\fIPROPERTY\fR=\fIVALUE\fR,...]] [\fB\-\-source\-instance\-zone\fR=\fISOURCE_INSTANCE_ZONE\fR] [\fB\-\-storage\-location\fR=\fILOCATION\fR] [\fB\-\-kms\-key\fR=\fIKMS_KEY\fR\ :\ \fB\-\-kms\-keyring\fR=\fIKMS_KEYRING\fR\ \fB\-\-kms\-location\fR=\fIKMS_LOCATION\fR\ \fB\-\-kms\-project\fR=\fIKMS_PROJECT\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(ALPHA)\fR Create a Compute Engine machine image.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fIIMAGE\fR
Name of the machineImage to create.


.RE
.sp

.SH "REQUIRED FLAGS"

.RS 2m
.TP 2m
\fB\-\-source\-instance\fR=\fISOURCE_INSTANCE\fR
The source instance to create a machine image from.


.RE
.sp

.SH "OPTIONAL FLAGS"

.RS 2m
.TP 2m
\fB\-\-csek\-key\-file\fR=\fIFILE\fR
Path to a Customer\-Supplied Encryption Key (CSEK) key file, mapping Google
Compute Engine machine images to user managed keys to be used when creating,
mounting, or snapshotting disks.

If you pass \f5\-\fR as value of the flag the CSEK will be read from stdin. See
https://cloud.google.com/compute/docs/disks/customer\-supplied\-encryption for
more details.

.TP 2m
\fB\-\-description\fR=\fIDESCRIPTION\fR
Specifies a text description of the machine image.

.TP 2m
\fB\-\-guest\-flush\fR
Create an application\-consistent machine image by informing the OS to prepare
for the snapshot process. Currently only supported on Windows instances using
the Volume Shadow Copy Service (VSS).

.TP 2m
\fB\-\-require\-csek\-key\-create\fR
Refuse to create machine images not protected by a user managed key in the key
file when \-\-csek\-key\-file is given. This behavior is enabled by default to
prevent incorrect gcloud invocations from accidentally creating machine images
with no user managed key. Disabling the check allows creation of some machine
images without a matching Customer\-Supplied Encryption Key in the supplied
\-\-csek\-key\-file. See
https://cloud.google.com/compute/docs/disks/customer\-supplied\-encryption for
more details. Enabled by default, use \fB\-\-no\-require\-csek\-key\-create\fR
to disable.

.TP 2m
\fB\-\-source\-disk\-csek\-key\fR=[\fIPROPERTY\fR=\fIVALUE\fR,...]
Customer\-supplied encryption key of the disk attached to the source instance.
Required if the source disk is protected by a customer\-supplied encryption key.
This flag may be repeated to specify multiple attached disks.

.RS 2m
.TP 2m
\fBdisk\fR
URL of the disk attached to the source instance. This can be a full or valid
partial URL

.TP 2m
\fBcsek\-key\-file\fR
path to customer\-supplied encryption key.
.RE
.sp
.TP 2m
\fB\-\-source\-instance\-zone\fR=\fISOURCE_INSTANCE_ZONE\fR
Zone of the instance to operate on. If not specified and the
\f5\fIcompute/zone\fR\fR property isn't set, you may be prompted to select a
zone.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/zone\fR\fR property:

.RS 2m
$ gcloud config set compute/zone ZONE
.RE

A list of zones can be fetched by running:

.RS 2m
$ gcloud compute zones list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/zone
.RE

Alternatively, the zone can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_ZONE\fR\fR.

.TP 2m
\fB\-\-storage\-location\fR=\fILOCATION\fR
Google Cloud Storage location, either regional or multi\-regional, where machine
image's content is to be stored. If absent, a nearby regional or multi\-regional
location is chosen automatically.

.TP 2m

Key resource \- The Cloud KMS (Key Management Service) cryptokey that will be
used to protect the machine image. The arguments in this group can be used to
specify the attributes of this resource.

.RS 2m
.TP 2m
\fB\-\-kms\-key\fR=\fIKMS_KEY\fR
ID of the key or fully qualified identifier for the key. This flag must be
specified if any of the other arguments in this group are specified.

.TP 2m
\fB\-\-kms\-keyring\fR=\fIKMS_KEYRING\fR
The KMS keyring of the key.

.TP 2m
\fB\-\-kms\-location\fR=\fIKMS_LOCATION\fR
The Cloud location for the key.

.TP 2m
\fB\-\-kms\-project\fR=\fIKMS_PROJECT\fR
The Cloud project for the key.


.RE
.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity.

Run \fB$ gcloud help\fR for details.



.SH "EXAMPLES"

To create a machine image, run:

.RS 2m
$ gcloud alpha compute machine\-images create my\-machine\-image \e
    \-\-source\-instance=example\-source \e
    \-\-source\-instance\-zone=us\-central1\-a
.RE



.SH "NOTES"

This command is currently in ALPHA and may change without notice. If this
command fails with API permission errors despite specifying the right project,
you may be trying to access an API with an invitation\-only early access
allowlist. This variant is also available:

.RS 2m
$ gcloud beta compute machine\-images create
.RE



.TH "GCLOUD_COMPUTE_INSTANCES_UPDATE" 1



.SH "NAME"
.HP
gcloud compute instances update \- update a Google Compute Engine virtual machine



.SH "SYNOPSIS"
.HP
\f5gcloud compute instances update\fR \fIINSTANCE_NAME\fR [\fB\-\-[no\-]deletion\-protection\fR] [\fB\-\-[no\-]enable\-display\-device\fR] [\fB\-\-min\-cpu\-platform\fR=\fIPLATFORM\fR] [\fB\-\-[no\-]shielded\-integrity\-monitoring\fR] [\fB\-\-shielded\-learn\-integrity\-policy\fR] [\fB\-\-[no\-]shielded\-secure\-boot\fR] [\fB\-\-[no\-]shielded\-vtpm\fR] [\fB\-\-update\-labels\fR=[\fIKEY\fR=\fIVALUE\fR,...]] [\fB\-\-zone\fR=\fIZONE\fR] [\fB\-\-clear\-labels\fR\ |\ \fB\-\-remove\-labels\fR=[\fIKEY\fR,...]] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fBgcloud compute instances update\fR updates labels and requested CPU Platform
for a Google Compute Engine virtual machine.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fIINSTANCE_NAME\fR
Name of the instance to update. For details on valid instance names, refer to
the criteria documented under the field 'name' at:
https://cloud.google.com/compute/docs/reference/rest/v1/instances


.RE
.sp

.SH "FLAGS"

.RS 2m
.TP 2m
\fB\-\-[no\-]deletion\-protection\fR
Enables deletion protection for the instance. Use \fB\-\-deletion\-protection\fR
to enable and \fB\-\-no\-deletion\-protection\fR to disable.

.TP 2m
\fB\-\-[no\-]enable\-display\-device\fR
Enable a display device for instances using a Windows image. Use
\fB\-\-enable\-display\-device\fR to enable and
\fB\-\-no\-enable\-display\-device\fR to disable.

.TP 2m
\fB\-\-min\-cpu\-platform\fR=\fIPLATFORM\fR
When specified, the VM will be scheduled on host with specified CPU architecture
or a newer one. To list available CPU platforms in given zone, run:

.RS 2m
$ gcloud compute zones describe ZONE \e
  \-\-format="value(availableCpuPlatforms)"
.RE

Default setting is "AUTOMATIC".

CPU platform selection is available only in selected zones.

You can find more information on\-line:
https://cloud.google.com/compute/docs/instances/specify\-min\-cpu\-platform

.TP 2m
\fB\-\-[no\-]shielded\-integrity\-monitoring\fR
Enables monitoring and attestation of the boot integrity of the instance. The
attestation is performed against the integrity policy baseline. This baseline is
initially derived from the implicitly trusted boot image when the instance is
created. This baseline can be updated by using
\f5\-\-shielded\-vm\-learn\-integrity\-policy\fR. On Shielded VMs, integrity
monitoring is enabled by default. For information about how to modify Shielded
VM options, see
https://cloud.google.com/compute/docs/instances/modifying\-shielded\-vm. Changes
to this setting with the update command only take effect after stopping and
starting the instance. Use \fB\-\-shielded\-integrity\-monitoring\fR to enable
and \fB\-\-no\-shielded\-integrity\-monitoring\fR to disable.

.TP 2m
\fB\-\-shielded\-learn\-integrity\-policy\fR
Causes the instance to re\-learn the integrity policy baseline using the current
instance configuration. Use this flag after any planned boot\-specific changes
in the instance configuration, like kernel updates or kernel driver
installation.

.TP 2m
\fB\-\-[no\-]shielded\-secure\-boot\fR
The instance boots with secure boot enabled. On Shielded VMs, Secure Boot is not
enabled by default. For information about how to modify Shielded VM options, see
https://cloud.google.com/compute/docs/instances/modifying\-shielded\-vm. Changes
to this setting with the update command only take effect after stopping and
starting the instance. Use \fB\-\-shielded\-secure\-boot\fR to enable and
\fB\-\-no\-shielded\-secure\-boot\fR to disable.

.TP 2m
\fB\-\-[no\-]shielded\-vtpm\fR
The instance boots with the TPM (Trusted Platform Module) enabled. A TPM is a
hardware module that can be used for different security operations such as
remote attestation, encryption, and sealing of keys. On Shielded VMs, vTPM is
enabled by default. For information about how to modify Shielded VM options, see
https://cloud.google.com/compute/docs/instances/modifying\-shielded\-vm. Changes
to this setting with the update command only take effect after stopping and
starting the instance. Use \fB\-\-shielded\-vtpm\fR to enable and
\fB\-\-no\-shielded\-vtpm\fR to disable.

.TP 2m
\fB\-\-update\-labels\fR=[\fIKEY\fR=\fIVALUE\fR,...]
List of label KEY=VALUE pairs to update. If a label exists its value is
modified, otherwise a new label is created.

Keys must start with a lowercase character and contain only hyphens (\f5\-\fR),
underscores (\f5_\fR), lowercase characters, and numbers. Values must contain
only hyphens (\f5\-\fR), underscores (\f5_\fR), lowercase characters, and
numbers.

.TP 2m
\fB\-\-zone\fR=\fIZONE\fR
Zone of the instance to update. If not specified, the user may be prompted to
select a zone. \f5gcloud\fR will attempt to identify the zone by searching for
resources in the user's project. If the zone cannot be determined, the user will
then be prompted with all Google Cloud Platform zones.

To avoid prompting when this flag is omitted, the user can set the
\f5\fIcompute/zone\fR\fR property:

.RS 2m
$ gcloud config set compute/zone ZONE
.RE

A list of zones can be fetched by running:

.RS 2m
$ gcloud compute zones list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/zone
.RE

Alternatively, the zone can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_ZONE\fR\fR.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-clear\-labels\fR
Remove all labels. If \f5\-\-update\-labels\fR is also specified then
\f5\-\-clear\-labels\fR is applied first.

For example, to remove all labels:

.RS 2m
$ gcloud compute instances update \-\-clear\-labels
.RE

To set the labels to exactly "foo" and "baz":

.RS 2m
$ gcloud compute instances update \-\-clear\-labels \e
  \-\-update\-labels foo=bar,baz=qux
.RE

.TP 2m
\fB\-\-remove\-labels\fR=[\fIKEY\fR,...]
List of label keys to remove. If a label does not exist it is silently ignored.
If \f5\-\-update\-labels\fR is also specified then \f5\-\-remove\-labels\fR is
applied first.


.RE
.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity.

Run \fB$ gcloud help\fR for details.



.SH "EXAMPLES"

To modify the instance 'example\-instance' in 'us\-central1\-a' by adding labels
\'k0', with value 'value1' and label 'k1' with value 'value2' and removing
labels with key 'k3', run:

.RS 2m
$ gcloud compute instances update example\-instance \e
    \-\-zone=us\-central1\-a \-\-update\-labels=k0=value1,k1=value2 \e
    \-\-remove\-labels=k3
.RE

Labels can be used to identify the disk. To list disks with the 'k1:value2'
label, run:

.RS 2m
$ gcloud compute instances list \-\-filter='labels.k1:value2'
.RE

To list only the labels when describing a resource, use \-\-format to filter the
result:

.RS 2m
$ gcloud compute instances describe example\-disk \e
    \-\-format='default(labels)'
.RE



.SH "NOTES"

These variants are also available:

.RS 2m
$ gcloud alpha compute instances update
$ gcloud beta compute instances update
.RE


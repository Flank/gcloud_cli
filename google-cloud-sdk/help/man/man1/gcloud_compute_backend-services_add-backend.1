
.TH "GCLOUD_COMPUTE_BACKEND\-SERVICES_ADD\-BACKEND" 1



.SH "NAME"
.HP
gcloud compute backend\-services add\-backend \- add a backend to a backend service



.SH "SYNOPSIS"
.HP
\f5gcloud compute backend\-services add\-backend\fR \fIBACKEND_SERVICE_NAME\fR ([\fB\-\-instance\-group\fR=\fIINSTANCE_GROUP\fR\ :\ \fB\-\-instance\-group\-region\fR=\fIINSTANCE_GROUP_REGION\fR\ |\ \fB\-\-instance\-group\-zone\fR=\fIINSTANCE_GROUP_ZONE\fR]\ |\ [\fB\-\-network\-endpoint\-group\fR=\fINETWORK_ENDPOINT_GROUP\fR\ :\ \fB\-\-global\-network\-endpoint\-group\fR\ |\ \fB\-\-network\-endpoint\-group\-zone\fR=\fINETWORK_ENDPOINT_GROUP_ZONE\fR]) [\fB\-\-balancing\-mode\fR=\fIBALANCING_MODE\fR] [\fB\-\-capacity\-scaler\fR=\fICAPACITY_SCALER\fR] [\fB\-\-description\fR=\fIDESCRIPTION\fR] [\fB\-\-failover\fR] [\fB\-\-max\-utilization\fR=\fIMAX_UTILIZATION\fR] [\fB\-\-global\fR\ |\ \fB\-\-region\fR=\fIREGION\fR] [\fB\-\-max\-connections\fR=\fIMAX_CONNECTIONS\fR\ |\ \fB\-\-max\-connections\-per\-endpoint\fR=\fIMAX_CONNECTIONS_PER_ENDPOINT\fR\ |\ \fB\-\-max\-connections\-per\-instance\fR=\fIMAX_CONNECTIONS_PER_INSTANCE\fR\ |\ \fB\-\-max\-rate\fR=\fIMAX_RATE\fR\ |\ \fB\-\-max\-rate\-per\-endpoint\fR=\fIMAX_RATE_PER_ENDPOINT\fR\ |\ \fB\-\-max\-rate\-per\-instance\fR=\fIMAX_RATE_PER_INSTANCE\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fBgcloud compute backend\-services add\-backend\fR is used to add a backend to
a backend service. A backend is a group of tasks that can handle requests sent
to a backend service. Currently, the group of tasks can be one or more Google
Compute Engine virtual machine instances grouped together using an instance
group or network endpoint group.

Traffic is first spread evenly across all virtual machines or network endpoints
in the group. When the group is full, traffic is sent to the next nearest
group(s) that still have remaining capacity.

To modify the parameters of a backend after it has been added to the backend
service, use \f5gcloud compute backend\-services update\-backend\fR or \f5gcloud
compute backend\-services edit\fR.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fIBACKEND_SERVICE_NAME\fR
Name of the backend service to operate on.


.RE
.sp

.SH "REQUIRED FLAGS"

.RS 2m
.TP 2m

Exactly one of these must be specified:

.RS 2m
.TP 2m

Instance Group

.RS 2m
.TP 2m
\fB\-\-instance\-group\fR=\fIINSTANCE_GROUP\fR
Name of the instance group to add to the backend service. For details on valid
instance names, refer to the criteria documented under the field 'name' at:
https://cloud.google.com/compute/docs/reference/rest/v1/instances This flag must
be specified if any of the other arguments in this group are specified.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-instance\-group\-region\fR=\fIINSTANCE_GROUP_REGION\fR
Region of the instance group to add to the backend service. If not specified,
you may be prompted to select a region.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/region\fR\fR property:

.RS 2m
$ gcloud config set compute/region REGION
.RE

A list of regions can be fetched by running:

.RS 2m
$ gcloud compute regions list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/region
.RE

Alternatively, the region can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_REGION\fR\fR.

.TP 2m
\fB\-\-instance\-group\-zone\fR=\fIINSTANCE_GROUP_ZONE\fR
Zone of the instance group to add to the backend service. If not specified and
the \f5\fIcompute/zone\fR\fR property isn't set, you may be prompted to select a
zone.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/zone\fR\fR property:

.RS 2m
$ gcloud config set compute/zone ZONE
.RE

A list of zones can be fetched by running:

.RS 2m
$ gcloud compute zones list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/zone
.RE

Alternatively, the zone can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_ZONE\fR\fR.

.RE
.RE
.sp
.TP 2m

Network Endpoint Group

.RS 2m
.TP 2m
\fB\-\-network\-endpoint\-group\fR=\fINETWORK_ENDPOINT_GROUP\fR
Name of the network endpoint group to add to the backend service. This flag must
be specified if any of the other arguments in this group are specified.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-global\-network\-endpoint\-group\fR
If set, the network endpoint group is global.

.TP 2m
\fB\-\-network\-endpoint\-group\-zone\fR=\fINETWORK_ENDPOINT_GROUP_ZONE\fR
Zone of the network endpoint group to add to the backend service. If not
specified and the \f5\fIcompute/zone\fR\fR property isn't set, you may be
prompted to select a zone.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/zone\fR\fR property:

.RS 2m
$ gcloud config set compute/zone ZONE
.RE

A list of zones can be fetched by running:

.RS 2m
$ gcloud compute zones list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/zone
.RE

Alternatively, the zone can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_ZONE\fR\fR.


.RE
.RE
.RE
.RE
.sp

.SH "OPTIONAL FLAGS"

.RS 2m
.TP 2m
\fB\-\-balancing\-mode\fR=\fIBALANCING_MODE\fR
Defines the strategy for balancing load.

This cannot be used when the endpoint type of an attached network endpoint group
is INTERNET_IP_PORT or INTERNET_FQDN_PORT.

\fIBALANCING_MODE\fR must be one of:

.RS 2m
.TP 2m
\fBCONNECTION\fR
Available if the backend service's load balancing scheme is either
\f5INTERNAL\fR or \f5EXTERNAL\fR. Available if the backend service's protocol is
one of \f5SSL\fR, \f5TCP\fR, or \f5UDP\fR.

.RS 2m
Spreads load based on how many concurrent connections the backend
can handle.
.RE

.RS 2m
For backend services with \-\-load\-balancing\-scheme `EXTERNAL`, you
must specify exactly one of these additional parameters:
`\-\-max\-connections`, `\-\-max\-connections\-per\-instance`, or
`\-\-max\-connections\-per\-endpoint`.
.RE

.RS 2m
For backend services where `\-\-load\-balancing\-scheme` is `INTERNAL`,
you must omit all of these parameters.
.RE
.TP 2m
\fBRATE\fR
Available if the backend service's load balancing scheme is
\f5INTERNAL_MANAGED\fR, \f5INTERNAL_SELF_MANAGED\fR, or \f5EXTERNAL\fR.
Available if the backend service's protocol is one of HTTP, HTTPS, or HTTP/2.

.RS 2m
Spreads load based on how many HTTP requests per second (RPS) the
backend can handle.
.RE

.RS 2m
You must specify exactly one of these additional parameters:
`\-\-max\-rate`, `\-\-max\-rate\-per\-instance`, or `\-\-max\-rate\-per\-endpoint`.
.RE
.TP 2m
\fBUTILIZATION\fR
Available if the backend service's load balancing scheme is
\f5INTERNAL_MANAGED\fR, \f5INTERNAL_SELF_MANAGED\fR, or \f5EXTERNAL\fR.
Available only for managed or unmanaged instance group backends.

.RS 2m
Spreads load based on the CPU utilization of instances in a backend
instance group.
.RE

.RS 2m
The following additional parameters may be specified:
`\-\-max\-utilization`, `\-\-max\-rate`, `\-\-max\-rate\-per\-instance`,
`\-\-max\-connections`, `\-\-max\-connections\-per\-instance`.
For valid combinations, see `\-\-max\-utilization`.
.RE
.RE
.sp


.TP 2m
\fB\-\-capacity\-scaler\fR=\fICAPACITY_SCALER\fR
A setting that applies to all balancing modes. This value is multiplied by the
balancing mode value to set the current max usage of the instance group.
Acceptable values are \f50.0\fR (0%) through \f51.0\fR (100%). Setting this
value to \f50.0\fR (0%) drains the backend service. Note that draining a backend
service only prevents new connections to instances in the group. All existing
connections are allowed to continue until they close by normal means. This
cannot be used for internal load balancing.

This cannot be used when the endpoint type of an attached network endpoint group
is INTERNET_IP_PORT or INTERNET_FQDN_PORT.

.TP 2m
\fB\-\-description\fR=\fIDESCRIPTION\fR
An optional, textual description for the backend.

.TP 2m
\fB\-\-failover\fR
Designates whether this is a failover backend. More than one failover backend
can be configured for a given BackendService. Not compatible with the \-\-global
flag

.TP 2m
\fB\-\-max\-utilization\fR=\fIMAX_UTILIZATION\fR
Defines the maximum target for average utilization of the backend instance in
the backend instance group. Acceptable values are \f50.0\fR (0%) through
\f51.0\fR(100%). Available for all backend service protocols, with
\f5\-\-balancing\-mode=UTILIZATION\fR.

For backend services that use SSL, TCP, or UDP protocols, the following
configuration options are supported:

.RS 2m
.IP "\(em" 2m
no additional parameter
.IP "\(em" 2m
only \f5\-\-max\-utilization\fR
.IP "\(em" 2m
only \f5\-\-max\-connections\fR (except for regional managed instance groups)
.IP "\(em" 2m
only \f5\-\-max\-connections\-per\-instance\fR
.IP "\(em" 2m
both \f5\-\-max\-utilization\fR and \f5\-\-max\-connections\fR (except for
regional managed instance groups)
.IP "\(em" 2m
both \f5\-\-max\-utilization\fR and \f5\-\-max\-connections\-per\-instance\fR

.RE
.RE
.sp
The meanings for \f5\-max\-connections\fR and
\f5\-\-max\-connections\-per\-instance\fR are the same as for
\-\-balancing\-mode=CONNECTION. If one is used with \f5\-\-max\-utilization\fR,
instances are considered at capacity when either maximum utilization or maximum
connections is reached.

For backend services that use HTTP, HTTPS, or HTTP/2 protocols, the following
configuration options are supported:

.RS 2m
.IP "\(bu" 2m
no additional parameter
.IP "\(bu" 2m
only \f5\-\-max\-utilization\fR
.IP "\(bu" 2m
only \f5\-\-max\-rate\fR (except for regional managed instance groups)
.IP "\(bu" 2m
only \f5\-\-max\-rate\-per\-instance\fR
.IP "\(bu" 2m
both \f5\-\-max\-utilization\fR and \f5\-\-max\-rate\fR (except for regional
managed instance groups)
.IP "\(bu" 2m
both \f5\-\-max\-utilization\fR and \f5\-\-max\-rate\-per\-instance\fR

.RE
.sp
The meanings for \f5\-\-max\-rate\fR and \f5\-\-max\-rate\-per\-instance\fR are
the same as for \-\-balancing\-mode=RATE. If one is used in conjunction with
\f5\-\-max\-utilization\fR, instances are considered at capacity when
\fBeither\fR maximum utilization or the maximum rate is reached.

.RS 2m
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-global\fR
If set, the backend service is global.

.TP 2m
\fB\-\-region\fR=\fIREGION\fR
Region of the backend service to operate on. Overrides the default
\fBcompute/region\fR property value for this command invocation.

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-max\-connections\fR=\fIMAX_CONNECTIONS\fR
Maximum concurrent connections that the backend can handle. Valid for network
endpoint group and instance group backends (except for regional managed instance
groups).

This cannot be used when the endpoint type of an attached network endpoint group
is INTERNET_IP_PORT or INTERNET_FQDN_PORT.

.TP 2m
\fB\-\-max\-connections\-per\-endpoint\fR=\fIMAX_CONNECTIONS_PER_ENDPOINT\fR
Only valid for network endpoint group backends. Defines a maximum number of
connections per endpoint if all endpoints are healthy. When one or more
endpoints are unhealthy, an effective maximum number of connections per healthy
endpoint is calculated by multiplying \f5MAX_CONNECTIONS_PER_ENDPOINT\fR by the
number of endpoints in the network endpoint group, then dividing by the number
of healthy endpoints.

This cannot be used when the endpoint type of an attached network endpoint group
is INTERNET_IP_PORT or INTERNET_FQDN_PORT.

.TP 2m
\fB\-\-max\-connections\-per\-instance\fR=\fIMAX_CONNECTIONS_PER_INSTANCE\fR
Only valid for instance group backends. Defines a maximum number of concurrent
connections per instance if all instances in the instance group are healthy.
When one or more instances are unhealthy, an effective maximum number of
connections per healthy instance is calculated by multiplying
\f5MAX_CONNECTIONS_PER_INSTANCE\fR by the number of instances in the instance
group, then dividing by the number of healthy instances.

.TP 2m
\fB\-\-max\-rate\fR=\fIMAX_RATE\fR
Maximum number of HTTP requests per second (RPS) that the backend can handle.
Valid for network endpoint group and instance group backends (except for
regional managed instance groups). Must not be defined if the backend is a
managed instance group using load balancing\-based autoscaling.

This cannot be used when the endpoint type of an attached network endpoint group
is INTERNET_IP_PORT or INTERNET_FQDN_PORT.

.TP 2m
\fB\-\-max\-rate\-per\-endpoint\fR=\fIMAX_RATE_PER_ENDPOINT\fR
Only valid for network endpoint group backends. Defines a maximum number of HTTP
requests per second (RPS) per endpoint if all endpoints are healthy. When one or
more endpoints are unhealthy, an effective maximum rate per healthy endpoint is
calculated by multiplying \f5MAX_RATE_PER_ENDPOINT\fR by the number of endpoints
in the network endpoint group, then dividing by the number of healthy endpoints.

This cannot be used when the endpoint type of an attached network endpoint group
is INTERNET_IP_PORT or INTERNET_FQDN_PORT.

.TP 2m
\fB\-\-max\-rate\-per\-instance\fR=\fIMAX_RATE_PER_INSTANCE\fR
Only valid for instance group backends. Defines a maximum number of HTTP
requests per second (RPS) per instance if all instances in the instance group
are healthy. When one or more instances are unhealthy, an effective maximum RPS
per healthy instance is calculated by multiplying \f5MAX_RATE_PER_INSTANCE\fR by
the number of instances in the instance group, then dividing by the number of
healthy instances. This parameter is compatible with managed instance group
backends that use autoscaling based on load balancing.


.RE
.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity.

Run \fB$ gcloud help\fR for details.



.SH "NOTES"

These variants are also available:

.RS 2m
$ gcloud alpha compute backend\-services add\-backend
$ gcloud beta compute backend\-services add\-backend
.RE


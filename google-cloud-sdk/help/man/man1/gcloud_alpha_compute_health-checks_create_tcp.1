
.TH "GCLOUD_ALPHA_COMPUTE_HEALTH\-CHECKS_CREATE_TCP" 1



.SH "NAME"
.HP
gcloud alpha compute health\-checks create tcp \- create a TCP health check to monitor load balanced instances



.SH "SYNOPSIS"
.HP
\f5gcloud alpha compute health\-checks create tcp\fR \fINAME\fR [\fB\-\-check\-interval\fR=\fICHECK_INTERVAL\fR;\ default="5s"] [\fB\-\-description\fR=\fIDESCRIPTION\fR] [\fB\-\-enable\-logging\fR] [\fB\-\-healthy\-threshold\fR=\fIHEALTHY_THRESHOLD\fR;\ default=2] [\fB\-\-proxy\-header\fR=\fIPROXY_HEADER\fR;\ default="NONE"] [\fB\-\-request\fR=\fIREQUEST\fR] [\fB\-\-response\fR=\fIRESPONSE\fR] [\fB\-\-timeout\fR=\fITIMEOUT\fR;\ default="5s"] [\fB\-\-unhealthy\-threshold\fR=\fIUNHEALTHY_THRESHOLD\fR;\ default=2] [\fB\-\-global\fR\ |\ \fB\-\-region\fR=\fIREGION\fR] [\fB\-\-port\fR=\fIPORT\fR;\ default=80\ \fB\-\-port\-name\fR=\fIPORT_NAME\fR\ \fB\-\-use\-serving\-port\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(ALPHA)\fR \fBgcloud alpha compute health\-checks create tcp\fR is used to
create a non\-legacy health check using the TCP protocol. You can use this
health check for Google Cloud load balancers or for managed instance group
autohealing. For more information, see the health checks overview at:
https://cloud.google.com/load\-balancing/docs/health\-check\-concepts



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fINAME\fR
Name of the TCP health check to create.


.RE
.sp

.SH "FLAGS"

.RS 2m
.TP 2m
\fB\-\-check\-interval\fR=\fICHECK_INTERVAL\fR; default="5s"
How often to perform a health check for an instance. For example, specifying
\f5\fI10s\fR\fR will run the check every 10 seconds. The default value is
\f5\fI5s\fR\fR. See $ gcloud topic datetimes for information on duration
formats.

.TP 2m
\fB\-\-description\fR=\fIDESCRIPTION\fR
An optional string description for the TCP health check.

.TP 2m
\fB\-\-enable\-logging\fR
Enable logging of health check probe results to Stackdriver. Logging is disabled
by default.

.RS 2m
Use \-\-no\-enable\-logging to disable logging.
.RE

.TP 2m
\fB\-\-healthy\-threshold\fR=\fIHEALTHY_THRESHOLD\fR; default=2
The number of consecutive successful health checks before an unhealthy instance
is marked as healthy. The default is 2.

.TP 2m
\fB\-\-proxy\-header\fR=\fIPROXY_HEADER\fR; default="NONE"
The type of proxy protocol header to be sent to the backend. \fIPROXY_HEADER\fR
must be one of:

.RS 2m
.TP 2m
\fBNONE\fR
No proxy header is added.
.TP 2m
\fBPROXY_V1\fR
Adds the header "PROXY UNKNOWN\er\en".
.RE
.sp


.TP 2m
\fB\-\-request\fR=\fIREQUEST\fR
An optional string of up to 1024 characters to send once the health check TCP
connection has been established. The health checker then looks for a reply of
the string provided in the \f5\-\-response\fR field.

If \f5\-\-response\fR is not configured, the health checker does not wait for a
response and regards the probe as successful if the TCP or SSL handshake was
successful.

.TP 2m
\fB\-\-response\fR=\fIRESPONSE\fR
An optional string of up to 1024 characters that the health checker expects to
receive from the instance. If the response is not received exactly, the health
check probe fails. If \f5\-\-response\fR is configured, but not
\f5\-\-request\fR, the health checker will wait for a response anyway. Unless
your system automatically sends out a message in response to a successful
handshake, only configure \f5\-\-response\fR to match an explicit
\f5\-\-request\fR.

.TP 2m
\fB\-\-timeout\fR=\fITIMEOUT\fR; default="5s"
If Google Compute Engine doesn't receive a healthy response from the instance by
the time specified by the value of this flag, the health check request is
considered a failure. For example, specifying \f5\fI10s\fR\fR will cause the
check to wait for 10 seconds before considering the request a failure. The
default value is \f5\fI5s\fR\fR. See $ gcloud topic datetimes for information on
duration formats.

.TP 2m
\fB\-\-unhealthy\-threshold\fR=\fIUNHEALTHY_THRESHOLD\fR; default=2
The number of consecutive health check failures before a healthy instance is
marked as unhealthy. The default is 2.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-global\fR
If set, the TCP health check is global.

.TP 2m
\fB\-\-region\fR=\fIREGION\fR
Region of the TCP health check to create. If not specified, you may be prompted
to select a region.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/region\fR\fR property:

.RS 2m
$ gcloud config set compute/region REGION
.RE

A list of regions can be fetched by running:

.RS 2m
$ gcloud compute regions list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/region
.RE

Alternatively, the region can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_REGION\fR\fR.

.RE
.sp
.TP 2m

These flags configure the port that the health check monitors. If none is
specified, the default port of 80 is used. If both \f5\-\-port\fR and
\f5\-\-port\-name\fR are specified, \f5\-\-port\fR takes precedence.

.RS 2m
.TP 2m
\fB\-\-port\fR=\fIPORT\fR; default=80
The TCP port number that this health check monitors.

.TP 2m
\fB\-\-port\-name\fR=\fIPORT_NAME\fR
The port name that this health check monitors. By default, this is empty.

.TP 2m
\fB\-\-use\-serving\-port\fR
If given, use the "serving port" for health checks:

.RS 2m
.IP "\(bu" 2m
When health checking network endpoints in a Network Endpoint Group, use the port
specified with each endpoint. \f5\-\-use\-serving\-port\fR must be used when
using a Network Endpoint Group as a backend as this flag specifies the
\f5portSpecification\fR option for a Health Check object.
.IP "\(bu" 2m
When health checking other backends, use the port or named port of the backend
service.
.RE
.RE
.RE
.sp



.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity.

Run \fB$ gcloud help\fR for details.



.SH "NOTES"

This command is currently in ALPHA and may change without notice. If this
command fails with API permission errors despite specifying the right project,
you may be trying to access an API with an invitation\-only early access
allowlist. These variants are also available:

.RS 2m
$ gcloud compute health\-checks create tcp
$ gcloud beta compute health\-checks create tcp
.RE



.TH "GCLOUD_BETA_CONTAINER_MEMBERSHIPS_REGISTER" 1



.SH "NAME"
.HP
gcloud beta container memberships register \- registers a cluster with Google Cloud Platform



.SH "SYNOPSIS"
.HP
\f5gcloud beta container memberships register\fR \fICLUSTER_NAME\fR \fB\-\-context\fR=\fICONTEXT\fR \fB\-\-service\-account\-key\-file\fR=\fISERVICE_ACCOUNT_KEY_FILE\fR [\fB\-\-kubeconfig\fR=\fIKUBECONFIG\fR] [\fB\-\-manifest\-output\-file\fR=\fIMANIFEST_OUTPUT_FILE\fR] [\fB\-\-proxy\fR=\fIPROXY\fR] [\fB\-\-version\fR=\fIVERSION\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(BETA)\fR This command registers a cluster referenced from a kubeconfig file
with Google Cloud Platform. It also installs the Connect agent into this
cluster, or updates the Connect agent in a previously\-registered cluster.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fICLUSTER_NAME\fR
The name of the cluster being registered.


.RE
.sp

.SH "REQUIRED FLAGS"

.RS 2m
.TP 2m
\fB\-\-context\fR=\fICONTEXT\fR
The context in the kubeconfig file that specifies the cluster.

.TP 2m
\fB\-\-service\-account\-key\-file\fR=\fISERVICE_ACCOUNT_KEY_FILE\fR
The JSON file of a Google Cloud service account private key.


.RE
.sp

.SH "OPTIONAL FLAGS"

.RS 2m
.TP 2m
\fB\-\-kubeconfig\fR=\fIKUBECONFIG\fR
The kubeconfig file containing an entry for the cluster. Defaults to $KUBECONFIG
if it is set in the environment, otherwise defaults to to $HOME/.kube/config.

.TP 2m
\fB\-\-manifest\-output\-file\fR=\fIMANIFEST_OUTPUT_FILE\fR
The full path of the file into which the Connect agent installation manifest
should be stored. If this option is provided, then the manifest will be written
to this file and will not be deployed into the cluster by gcloud, and it will
need to be deployed manually.

.TP 2m
\fB\-\-proxy\fR=\fIPROXY\fR
The proxy address in the format of http[s]://{hostname}. The proxy must support
the HTTP CONNECT method in order for this connection to succeed.

.TP 2m
\fB\-\-version\fR=\fIVERSION\fR
The version of the connect agent to install/upgrade if not using the latest
connect version.


.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity. Run \fB$ gcloud
help\fR for details.



.SH "EXAMPLES"

Register a cluster referenced from the default kubeconfig file, installing the
Connect agent:

.RS 2m
$ gcloud beta container memberships register my\-cluster \e
    \-\-context=my\-cluster\-context \e
    \-\-service\-account\-key\-file=/tmp/keyfile.json
.RE

Upgrade the Connect agent in a cluster:

.RS 2m
$ gcloud beta container memberships register my\-cluster \e
    \-\-context=my\-cluster\-context \e
    \-\-service\-account\-key\-file=/tmp/keyfile.json
.RE

Register a cluster and output a manifest that can be used to install the Connect
agent:

.RS 2m
$ gcloud beta container memberships register my\-cluster \e
    \-\-context=my\-cluster\-context \e
    \-\-manifest\-output\-file=/tmp/manifest.yaml \e
    \-\-service\-account\-key\-file=/tmp/keyfile.json
Register a cluster with a specific version of GKE Connect:
.RE

.RS 2m
$ gcloud beta container memberships register my\-cluster \e
    \-\-context=my\-cluster\-context \e
    \-\-service\-account\-key\-file=/tmp/keyfile.json \e
    \-\-version=gkeconnect_20190802_02_00
.RE



.SH "NOTES"

This command is currently in BETA and may change without notice. This variant is
also available:

.RS 2m
$ gcloud alpha container memberships register
.RE


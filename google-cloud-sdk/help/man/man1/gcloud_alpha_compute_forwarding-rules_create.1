
.TH "GCLOUD_ALPHA_COMPUTE_FORWARDING\-RULES_CREATE" 1



.SH "NAME"
.HP
gcloud alpha compute forwarding\-rules create \- create a forwarding rule to direct network traffic to a load balancer



.SH "SYNOPSIS"
.HP
\f5gcloud alpha compute forwarding\-rules create\fR \fINAME\fR (\fB\-\-backend\-service\fR=\fIBACKEND_SERVICE\fR\ |\ \fB\-\-target\-http\-proxy\fR=\fITARGET_HTTP_PROXY\fR\ |\ \fB\-\-target\-https\-proxy\fR=\fITARGET_HTTPS_PROXY\fR\ |\ \fB\-\-target\-instance\fR=\fITARGET_INSTANCE\fR\ |\ \fB\-\-target\-pool\fR=\fITARGET_POOL\fR\ |\ \fB\-\-target\-ssl\-proxy\fR=\fITARGET_SSL_PROXY\fR\ |\ \fB\-\-target\-tcp\-proxy\fR=\fITARGET_TCP_PROXY\fR\ |\ \fB\-\-target\-vpn\-gateway\fR=\fITARGET_VPN_GATEWAY\fR) [\fB\-\-description\fR=\fIDESCRIPTION\fR] [\fB\-\-ip\-protocol\fR=\fIIP_PROTOCOL\fR] [\fB\-\-load\-balancing\-scheme\fR=\fILOAD_BALANCING_SCHEME\fR;\ default="EXTERNAL"] [\fB\-\-network\fR=\fINETWORK\fR] [\fB\-\-network\-tier\fR=\fINETWORK_TIER\fR] [\fB\-\-service\-label\fR=\fISERVICE_LABEL\fR] [\fB\-\-subnet\fR=\fISUBNET\fR] [\fB\-\-subnet\-region\fR=\fISUBNET_REGION\fR] [\fB\-\-target\-instance\-zone\fR=\fITARGET_INSTANCE_ZONE\fR] [\fB\-\-target\-pool\-region\fR=\fITARGET_POOL_REGION\fR] [\fB\-\-target\-vpn\-gateway\-region\fR=\fITARGET_VPN_GATEWAY_REGION\fR] [\fB\-\-address\fR=\fIADDRESS\fR\ |\ \fB\-\-ip\-version\fR=\fIIP_VERSION\fR] [\fB\-\-address\-region\fR=\fIADDRESS_REGION\fR\ |\ \fB\-\-global\-address\fR] [\fB\-\-backend\-service\-region\fR=\fIBACKEND_SERVICE_REGION\fR\ |\ \fB\-\-global\-backend\-service\fR] [\fB\-\-global\fR\ |\ \fB\-\-region\fR=\fIREGION\fR] [\fB\-\-port\-range\fR=[\fIPORT\fR\ |\ \fISTART_PORT\-END_PORT\fR]\ |\ \fB\-\-ports\fR=[\fIPORT\fR\ |\ \fISTART_PORT\-END_PORT\fR],[...]] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(ALPHA)\fR \fBgcloud alpha compute forwarding\-rules create\fR is used to
create a forwarding rule. A forwarding rule directs traffic that matches a bound
IP address to a forwarding target (load balancer, VPN gateway or VM instance).

Forwarding rules can be either global or regional, specified with the
\f5\fI\-\-global\fR\fR or \f5\fI\-\-region=REGION\fR\fR flag. Global forwarding
rules work with global load balancers, which include target HTTP proxies, target
HTTPS proxies, target SSL proxies and target TCP proxies; regional forwarding
rules work with regional or zonal targets, which include target pools, target
instances and target VPN gateways and backend services.

Forwarding rules can be either external or internal, specified with the
\f5\fI\-\-load\-balancing\-scheme=[EXTERNAL|INTERNAL]\fR\fR flag. External
forwarding rules are accessible from the internet, while internal forwarding
rules are only accessible from within their VPC networks. You can specify a
reserved static external or internal IP address with the
\f5\fI\-\-address=ADDRESS\fR\fR flag for the forwarding rule. Otherwise if the
flag is unspecified, an external forwaring rule will be automatically assigned
an ephemeral external IP address (global IP addresses for global forwarding
rules and regional IP addresses for regional forwarding rules); an internal
forwarding rule will be automatically assigned an ephemeral internal IP address
from the subnet specified with the \f5\fI\-\-subnet\fR\fR flag.

There are different types of load balancer working at different layers of the
OSI networking model (http://en.wikipedia.org/wiki/Network_layer). Layer 3 load
balancer targets include target pools, target SSL proxies, target TCP proxies
and backend services. Layer 7 load balancer targets include target HTTP proxies
and target HTTPS proxies. For more information on load balancing, see
https://cloud.google.com/compute/docs/load\-balancing\-and\-autoscaling/.


When creating a forwarding rule, exactly one of
\f5\fI\-\-target\-instance\fR\fR, \f5\fI\-\-target\-pool\fR\fR,
\f5\fI\-\-target\-http\-proxy\fR\fR, \f5\fI\-\-target\-https\-proxy\fR\fR,
\f5\fI\-\-target\-ssl\-proxy\fR\fR, \f5\fI\-\-target\-tcp\-proxy\fR\fR,
\f5\fI\-\-target\-vpn\-gateway\fR\fR or \f5\fI\-\-backend\-service\fR\fR must be
specified.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fINAME\fR
Name of the forwarding rule to create.


.RE
.sp

.SH "REQUIRED FLAGS"

.RS 2m
.TP 2m

Exactly one of these must be specified:

.RS 2m
.TP 2m
\fB\-\-backend\-service\fR=\fIBACKEND_SERVICE\fR
The target backend service that will receive the traffic.

.TP 2m
\fB\-\-target\-http\-proxy\fR=\fITARGET_HTTP_PROXY\fR
The target HTTP proxy that will receive the traffic. Acceptable values for
\-\-ports flag are: 80, 8080.

.TP 2m
\fB\-\-target\-https\-proxy\fR=\fITARGET_HTTPS_PROXY\fR
The target HTTPS proxy that will receive the traffic. Acceptable values for
\-\-ports flag are: 443.

.TP 2m
\fB\-\-target\-instance\fR=\fITARGET_INSTANCE\fR
The name of the target instance that will receive the traffic. The target
instance must be in a zone that's in the forwarding rule's region. Global
forwarding rules may not direct traffic to target instances. If not specified
and the \f5\fIcompute/zone\fR\fR property isn't set, you may be prompted to
select a zone.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/zone\fR\fR property:

.RS 2m
$ gcloud config set compute/zone ZONE
.RE

A list of zones can be fetched by running:

.RS 2m
$ gcloud compute zones list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/zone
.RE

Alternatively, the zone can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_ZONE\fR\fR.

.TP 2m
\fB\-\-target\-pool\fR=\fITARGET_POOL\fR
The target pool that will receive the traffic. The target pool must be in the
same region as the forwarding rule. Global forwarding rules may not direct
traffic to target pools.

.TP 2m
\fB\-\-target\-ssl\-proxy\fR=\fITARGET_SSL_PROXY\fR
The target SSL proxy that will receive the traffic. Acceptable values for
\-\-ports flag are: 25, 43, 110, 143, 195, 443, 465, 587, 700, 993, 995, 1883,
5222.

.TP 2m
\fB\-\-target\-tcp\-proxy\fR=\fITARGET_TCP_PROXY\fR
The target TCP proxy that will receive the traffic. Acceptable values for
\-\-ports flag are: 25, 43, 110, 143, 195, 443, 465, 587, 700, 993, 995, 1883,
5222.

.TP 2m
\fB\-\-target\-vpn\-gateway\fR=\fITARGET_VPN_GATEWAY\fR
The target VPN gateway that will receive forwarded traffic. Acceptable values
for \-\-ports flag are: 500, 4500.


.RE
.RE
.sp

.SH "OPTIONAL FLAGS"

.RS 2m
.TP 2m
\fB\-\-description\fR=\fIDESCRIPTION\fR
An optional textual description for the forwarding rule.

.TP 2m
\fB\-\-ip\-protocol\fR=\fIIP_PROTOCOL\fR
The IP protocol that the rule will serve. The default is TCP. \fIIP_PROTOCOL\fR
must be one of: \fBAH\fR, \fBESP\fR, \fBICMP\fR, \fBSCTP\fR, \fBTCP\fR,
\fBUDP\fR.

.TP 2m
\fB\-\-load\-balancing\-scheme\fR=\fILOAD_BALANCING_SCHEME\fR; default="EXTERNAL"
This signifies what the forwarding rule will be used for.
\fILOAD_BALANCING_SCHEME\fR must be one of:

.RS 2m
.TP 2m
\fBEXTERNAL\fR
External load balancing or forwarding, used with one of \-\-target\-http\-proxy,
\-\-target\-https\-proxy, \-\-target\-tcp\-proxy, \-\-target\-ssl\-proxy,
\-\-target\-pool, \-\-target\-vpn\-gateway, \-\-target\-instance.
.TP 2m
\fBINTERNAL\fR
Internal load balancing or forwarding, used with \-\-backend\-service.

.RE
.sp
.TP 2m
\fB\-\-network\fR=\fINETWORK\fR
(Only for \-\-load\-balancing\-scheme=INTERNAL) The network that this forwarding
rule applies to. If this field is not specified, the default network will be
used. In the absence of the default network, this field must be specified.

.TP 2m
\fB\-\-network\-tier\fR=\fINETWORK_TIER\fR
The network tier to assign to the forwarding rules. \f5\fINETWORK_TIER\fR\fR
must be one of: \f5PREMIUM\fR, \f5STANDARD\fR. The default value is
\f5PREMIUM\fR.

.TP 2m
\fB\-\-service\-label\fR=\fISERVICE_LABEL\fR
(Only for Internal Load Balancing):
https://cloud.google.com/compute/docs/load\-balancing/internal/ The DNS label to
use as the prefix of the fully qualified domain name for this forwarding rule.
The full name will be internally generated and output as dnsName. If this field
is not specified, no DNS record will be generated and no DNS name will be
output.

.TP 2m
\fB\-\-subnet\fR=\fISUBNET\fR
(Only for \-\-load\-balancing\-scheme=INTERNAL) The subnetwork that this
forwarding rule applies to. If the network configured for this forwarding rule
is in auto subnet mode, this flag is optional and the subnet in the same region
of the forwarding rule will be used. However, if the network is in custom subnet
mode, a subnetwork must be specified.

.TP 2m
\fB\-\-subnet\-region\fR=\fISUBNET_REGION\fR
The region of the subnetwork to operate on. If not specified it will be set the
region of the forwarding rule. Overrides the default \fBcompute/region\fR
property value for this command invocation.

.TP 2m
\fB\-\-target\-instance\-zone\fR=\fITARGET_INSTANCE_ZONE\fR
The zone of the target instance to operate on. Overrides the default
\fBcompute/zone\fR property value for this command invocation.

.TP 2m
\fB\-\-target\-pool\-region\fR=\fITARGET_POOL_REGION\fR
The region of the target pool to operate on. If not specified it will be set the
region of the forwarding rule. Overrides the default \fBcompute/region\fR
property value for this command invocation.

.TP 2m
\fB\-\-target\-vpn\-gateway\-region\fR=\fITARGET_VPN_GATEWAY_REGION\fR
The region of the VPN gateway to operate on. If not specified it will be set the
region of the forwarding rule. Overrides the default \fBcompute/region\fR
property value for this command invocation.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-address\fR=\fIADDRESS\fR
The IP address that the forwarding rule will serve. All traffic sent to this IP
address is directed to the target pointed to by the forwarding rule. Assigned IP
addresses can be reserved or unreserved.

IP addresses are restricted based on the forwarding rule's load balancing scheme
(EXTERNAL or INTERNAL) and scope (global or regional).

When the \-\-load\-balancing\-scheme is EXTERNAL, if the address is reserved, it
must either (1) reside in the global scope if the forwarding rule is being
configured to point to a global target (target HTTP proxy, target HTTPS proxy,
target SSL proxy and target TCP proxy) or (2) reside in the same region as the
forwarding rule if the forwarding rule is being configured to point to a
regional target (target pool) or zonal target (target instance). If this flag is
omitted, an ephemeral external IP address is automatically assigned.

When the \-\-load\-balancing\-scheme is INTERNAL, this can only be an RFC 1918
IP address belonging to the network/subnet configured for the forwarding rule.
If this flag is omitted, an ephemeral internal IP address will be automatically
allocated from the IP range of the subnet or network configured for this
forwarding rule.

Note: An IP address must be specified if the traffic is being forwarded to a
VPN.

This flag can be specified either by a literal IP address or a reference to an
existing Address resource. The following examples are all valid:
.RS 2m
.IP "\(bu" 2m
100.1.2.3
.IP "\(bu" 2m

https://www.googleapis.com/compute/v1/projects/project\-1/regions/us\-central1/addresses/address\-1
.IP "\(bu" 2m
projects/project\-1/regions/us\-central1/addresses/address\-1
.IP "\(bu" 2m
regions/us\-central1/addresses/address\-1
.IP "\(bu" 2m
global/addresses/address\-1
.IP "\(bu" 2m
address\-1
.RE
.RE
.RE
.sp

.RS 2m
.TP 2m
\fB\-\-ip\-version\fR=\fIIP_VERSION\fR
The version of the IP address to be allocated if no \-\-address is given. The
default is IPv4. \fIIP_VERSION\fR must be one of: \fBIPV4\fR, \fBIPV6\fR.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-address\-region\fR=\fIADDRESS_REGION\fR
The region of the address to operate on. If not specified, you may be prompted
to select a region.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/region\fR\fR property:

.RS 2m
$ gcloud config set compute/region REGION
.RE

A list of regions can be fetched by running:

.RS 2m
$ gcloud compute regions list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/region
.RE

Alternatively, the region can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_REGION\fR\fR.

.TP 2m
\fB\-\-global\-address\fR
If provided, it is assumed the address is global.

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-backend\-service\-region\fR=\fIBACKEND_SERVICE_REGION\fR
The region of the backend service to operate on. If not specified it will be set
the region of the forwarding rule. Overrides the default \fBcompute/region\fR
property value for this command invocation.

.TP 2m
\fB\-\-global\-backend\-service\fR
If provided, it is assumed the backend service is global.

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-global\fR
If provided, it is assumed the forwarding rule is global.

.TP 2m
\fB\-\-region\fR=\fIREGION\fR
The region of the forwarding rule to create. If not specified, you may be
prompted to select a region.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/region\fR\fR property:

.RS 2m
$ gcloud config set compute/region REGION
.RE

A list of regions can be fetched by running:

.RS 2m
$ gcloud compute regions list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/region
.RE

Alternatively, the region can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_REGION\fR\fR.

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-port\-range\fR=[\fIPORT\fR | \fISTART_PORT\-END_PORT\fR]
DEPRECATED, use \-\-ports. If specified, only packets addressed to ports in the
specified range will be forwarded. If not specified for regional forwarding
rules, all ports are matched. This flag is required for global forwarding rules.

Either an individual port (\f5\-\-port\-range 80\fR) or a range of ports
(\f5\-\-port\-range 3000\-3100\fR) may be specified.

.TP 2m
\fB\-\-ports\fR=[\fIPORT\fR | \fISTART_PORT\-END_PORT\fR],[...]
If specified, only packets addressed to ports in the specified list will be
forwarded. If not specified for regional forwarding rules, all ports are
matched. This flag is required for global forwarding rules and accepts a single
continuous set of ports.

Some forwarding targets have restriction on acceptable ports, e.g., if
\-\-target\-http\-proxy is specified, the acceptable values for \-\-ports are:
80, 8080.

Individual ports and ranges can be specified, for example (\f5\-\-ports
8000\-8004\fR or \f5\-\-ports 80\fR).


.RE
.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-configuration,
\-\-flatten, \-\-format, \-\-help, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity. Run \fB$ gcloud
help\fR for details.



.SH "EXAMPLES"

To create a global forwarding rule that will forward all traffic on port 8080
for IP address ADDRESS to a target http proxy PROXY, run:

.RS 2m
$ gcloud alpha compute forwarding\-rules create RULE_NAME \-\-global \e
    \-\-target\-http\-proxy PROXY \-\-ports 8080 \-\-address ADDRESS
.RE

To create a regional forwarding rule for the subnet SUBNET_NAME on the default
network that will forward all traffic on ports 80\-82 to a backend service
SERVICE_NAME, run:

.RS 2m
$ gcloud alpha compute forwarding\-rules create RULE_NAME \e
    \-\-load\-balancing\-scheme INTERNAL \e
    \-\-backend\-service SERVICE_NAME \-\-subnet SUBNET_NAME \e
    \-\-network default \-\-region REGION \-\-ports 80\-82
.RE



.SH "NOTES"

This command is currently in ALPHA and may change without notice. Usually, users
of ALPHA commands and flags need to apply for access, agree to applicable terms,
and have their projects whitelisted. Contact Google or sign up on a product's
page for ALPHA access. Product pages can be found at
https://cloud.google.com/products/. These variants are also available:

.RS 2m
$ gcloud compute forwarding\-rules create
$ gcloud beta compute forwarding\-rules create
.RE


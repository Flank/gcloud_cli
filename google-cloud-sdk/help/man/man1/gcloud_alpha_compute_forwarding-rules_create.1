
.TH "GCLOUD_ALPHA_COMPUTE_FORWARDING\-RULES_CREATE" 1



.SH "NAME"
.HP
gcloud alpha compute forwarding\-rules create \- create a forwarding rule to direct network traffic to a load balancer



.SH "SYNOPSIS"
.HP
\f5gcloud alpha compute forwarding\-rules create\fR \fINAME\fR (\fB\-\-backend\-service\fR=\fIBACKEND_SERVICE\fR\ |\ \fB\-\-target\-grpc\-proxy\fR=\fITARGET_GRPC_PROXY\fR\ |\ \fB\-\-target\-http\-proxy\fR=\fITARGET_HTTP_PROXY\fR\ |\ \fB\-\-target\-https\-proxy\fR=\fITARGET_HTTPS_PROXY\fR\ |\ \fB\-\-target\-instance\fR=\fITARGET_INSTANCE\fR\ |\ \fB\-\-target\-pool\fR=\fITARGET_POOL\fR\ |\ \fB\-\-target\-ssl\-proxy\fR=\fITARGET_SSL_PROXY\fR\ |\ \fB\-\-target\-tcp\-proxy\fR=\fITARGET_TCP_PROXY\fR\ |\ \fB\-\-target\-vpn\-gateway\fR=\fITARGET_VPN_GATEWAY\fR) [\fB\-\-allow\-global\-access\fR] [\fB\-\-description\fR=\fIDESCRIPTION\fR] [\fB\-\-ip\-protocol\fR=\fIIP_PROTOCOL\fR] [\fB\-\-is\-mirroring\-collector\fR] [\fB\-\-load\-balancing\-scheme\fR=\fILOAD_BALANCING_SCHEME\fR;\ default="EXTERNAL"] [\fB\-\-network\fR=\fINETWORK\fR] [\fB\-\-network\-tier\fR=\fINETWORK_TIER\fR] [\fB\-\-service\-label\fR=\fISERVICE_LABEL\fR] [\fB\-\-subnet\fR=\fISUBNET\fR] [\fB\-\-subnet\-region\fR=\fISUBNET_REGION\fR] [\fB\-\-target\-instance\-zone\fR=\fITARGET_INSTANCE_ZONE\fR] [\fB\-\-target\-pool\-region\fR=\fITARGET_POOL_REGION\fR] [\fB\-\-target\-vpn\-gateway\-region\fR=\fITARGET_VPN_GATEWAY_REGION\fR] [\fB\-\-address\fR=\fIADDRESS\fR\ |\ \fB\-\-ip\-version\fR=\fIIP_VERSION\fR] [\fB\-\-address\-region\fR=\fIADDRESS_REGION\fR\ |\ \fB\-\-global\-address\fR] [\fB\-\-backend\-service\-region\fR=\fIBACKEND_SERVICE_REGION\fR\ |\ \fB\-\-global\-backend\-service\fR] [\fB\-\-global\fR\ |\ \fB\-\-region\fR=\fIREGION\fR] [\fB\-\-global\-target\-http\-proxy\fR\ |\ \fB\-\-target\-http\-proxy\-region\fR=\fITARGET_HTTP_PROXY_REGION\fR] [\fB\-\-global\-target\-https\-proxy\fR\ |\ \fB\-\-target\-https\-proxy\-region\fR=\fITARGET_HTTPS_PROXY_REGION\fR] [\fB\-\-port\-range\fR=[\fIPORT\fR\ |\ \fISTART_PORT\-END_PORT\fR]\ |\ \fB\-\-ports\fR=\fIALL\fR\ |\ [\fIPORT\fR\ |\ \fISTART_PORT\-END_PORT\fR],[...]] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(ALPHA)\fR \fBgcloud alpha compute forwarding\-rules create\fR is used to
create a forwarding rule. A forwarding rule directs traffic that matches a
destination IP address.RS 2m
(and possibly a TCP or UDP port) to a forwarding target (load balancer,
VPN gateway or VM instance).

.RE

.RS 2m
Forwarding rules can be either global or regional, specified with the
`_\-\-global_` or `_\-\-region=REGION_` flags. For more information about
the scope of a forwarding rule, refer to
https://cloud.google.com/load\-balancing/docs/forwarding\-rule\-concepts.
.RE

.RS 2m
Forwarding rules can be external, internal, internal managed, or
internal self\-managed, specified with the
`_\-\-load\-balancing\-scheme=[EXTERNAL|INTERNAL|INTERNAL_MANAGED|INTERNAL_SELF_MANAGED]_`
flag. External forwarding rules are accessible from the internet, while
internal forwarding rules are only accessible from within their VPC
networks. You can specify a reserved static external or internal IP
address with the `_\-\-address=ADDRESS_` flag for the forwarding rule.
Otherwise, if the flag is unspecified, an ephemeral IP address is
automatically assigned (global IP addresses for global forwarding rules
and regional IP addresses for regional forwarding rules); an internal
forwarding rule is automatically assigned an ephemeral internal IP
address from the subnet specified with the `_\-\-subnet_` flag. You must
provide an IP address for an internal self\-managed forwarding rule.
.RE

.RS 2m
Different types of load balancers work at different layers of the OSI
networking model (http://en.wikipedia.org/wiki/Network_layer). Layer 3/4
targets include target pools, target SSL proxies, target TCP proxies,
and backend services. Layer 7 targets include target HTTP proxies and
target HTTPS proxies. For more information, refer to
https://cloud.google.com/load\-balancing/docs/forwarding\-rule\-concepts.
.RE


When creating a forwarding rule, exactly one of
\f5\fI\-\-target\-instance\fR\fR, \f5\fI\-\-target\-pool\fR\fR,
\f5\fI\-\-target\-http\-proxy\fR\fR, \f5\fI\-\-target\-https\-proxy\fR\fR,
\f5\fI\-\-target\-ssl\-proxy\fR\fR, \f5\fI\-\-target\-tcp\-proxy\fR\fR,
\f5\fI\-\-target\-vpn\-gateway\fR\fR or \f5\fI\-\-backend\-service\fR\fR must be
specified.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fINAME\fR
Name of the forwarding rule to create.


.RE
.sp

.SH "REQUIRED FLAGS"

.RS 2m
.TP 2m

Exactly one of these must be specified:

.RS 2m
.TP 2m
\fB\-\-backend\-service\fR=\fIBACKEND_SERVICE\fR
Target backend service that receives the traffic.

.TP 2m
\fB\-\-target\-grpc\-proxy\fR=\fITARGET_GRPC_PROXY\fR
Target gRPC proxy that receives the traffic.

.TP 2m
\fB\-\-target\-http\-proxy\fR=\fITARGET_HTTP_PROXY\fR
Target HTTP proxy that receives the traffic. Acceptable values for \-\-ports
flag are: 80, 8080.

.TP 2m
\fB\-\-target\-https\-proxy\fR=\fITARGET_HTTPS_PROXY\fR
Target HTTPS proxy that receives the traffic. Acceptable values for \-\-ports
flag are: 443.

.TP 2m
\fB\-\-target\-instance\fR=\fITARGET_INSTANCE\fR
Name of the target instance that receives the traffic. The target instance must
be in a zone in the forwarding rule's region. Global forwarding rules cannot
direct traffic to target instances. If not specified and the
\f5\fIcompute/zone\fR\fR property isn't set, you may be prompted to select a
zone.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/zone\fR\fR property:

.RS 2m
$ gcloud config set compute/zone ZONE
.RE

A list of zones can be fetched by running:

.RS 2m
$ gcloud compute zones list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/zone
.RE

Alternatively, the zone can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_ZONE\fR\fR.

.TP 2m
\fB\-\-target\-pool\fR=\fITARGET_POOL\fR
Target pool that receives the traffic. The target pool must be in the same
region as the forwarding rule. Global forwarding rules cannot direct traffic to
target pools.

.TP 2m
\fB\-\-target\-ssl\-proxy\fR=\fITARGET_SSL_PROXY\fR
Target SSL proxy that receives the traffic. Acceptable values for \-\-ports flag
are: 25, 43, 110, 143, 195, 443, 465, 587, 700, 993, 995, 1883, 5222.

.TP 2m
\fB\-\-target\-tcp\-proxy\fR=\fITARGET_TCP_PROXY\fR
Target TCP proxy that receives the traffic. Acceptable values for \-\-ports flag
are: 25, 43, 110, 143, 195, 443, 465, 587, 700, 993, 995, 1883, 5222.

.TP 2m
\fB\-\-target\-vpn\-gateway\fR=\fITARGET_VPN_GATEWAY\fR
Target VPN gateway (Cloud VPN Classic gateway) that receives forwardedtraffic.
Acceptable values for \-\-ports flag are: 500, 4500.


.RE
.RE
.sp

.SH "OPTIONAL FLAGS"

.RS 2m
.TP 2m
\fB\-\-allow\-global\-access\fR
If True, then clients from all regions can access this internal forwarding rule.
This can only be specified for forwarding rules with the LOAD_BALANCING_SCHEME
set to INTERNAL and the target must be either a backend service or a target
instance.

.TP 2m
\fB\-\-description\fR=\fIDESCRIPTION\fR
Optional textual description for the forwarding rule.

.TP 2m
\fB\-\-ip\-protocol\fR=\fIIP_PROTOCOL\fR
IP protocol that the rule will serve. The default is \f5TCP\fR.

Note that if the load\-balancing scheme is \f5INTERNAL\fR, the protocol must be
one of: \f5TCP\fR, \f5UDP\fR.

For a load\-balancing scheme that is \f5EXTERNAL\fR, all IP_PROTOCOL options are
valid.

\fIIP_PROTOCOL\fR must be one of: \fBAH\fR, \fBESP\fR, \fBICMP\fR, \fBSCTP\fR,
\fBTCP\fR, \fBUDP\fR.

.TP 2m
\fB\-\-is\-mirroring\-collector\fR
If set, this forwarding rule can be used as a collector for packet mirroring.
This can only be specified for forwarding rules with the LOAD_BALANCING_SCHEME
set to INTERNAL.

.TP 2m
\fB\-\-load\-balancing\-scheme\fR=\fILOAD_BALANCING_SCHEME\fR; default="EXTERNAL"
This defines the forwarding rule's load balancing scheme.
\fILOAD_BALANCING_SCHEME\fR must be one of:

.RS 2m
.TP 2m
\fBEXTERNAL\fR
External load balancing or forwarding, used with one of \-\-target\-http\-proxy,
\-\-target\-https\-proxy, \-\-target\-tcp\-proxy, \-\-target\-ssl\-proxy,
\-\-target\-pool, \-\-target\-vpn\-gateway, \-\-target\-instance.
.TP 2m
\fBINTERNAL\fR
Internal load balancing or forwarding, used with \-\-backend\-service.
.TP 2m
\fBINTERNAL_MANAGED\fR
Internal HTTP(S) Load Balancing, used with \-\-target\-http\-proxy,
\-\-target\-https\-proxy.
.TP 2m
\fBINTERNAL_SELF_MANAGED\fR
Traffic director load balancing or forwarding, used with
\-\-target\-http\-proxy, \-\-target\-https\-proxy, \-\-target\-grpc\-proxy.
.RE
.sp


.TP 2m
\fB\-\-network\fR=\fINETWORK\fR
(Only for \-\-load\-balancing\-scheme=INTERNAL or
\-\-load\-balancing\-scheme=INTERNAL_SELF_MANAGED or
\-\-load\-balancing\-scheme=INTERNAL_MANAGED) Network that this forwarding rule
applies to. If this field is not specified, the default network is used. In the
absence of the default network, this field must be specified.

.TP 2m
\fB\-\-network\-tier\fR=\fINETWORK_TIER\fR
Network tier to assign to the forwarding rules. \f5\fINETWORK_TIER\fR\fR must be
one of: \f5PREMIUM\fR, \f5STANDARD\fR. The default value is \f5PREMIUM\fR.

.TP 2m
\fB\-\-service\-label\fR=\fISERVICE_LABEL\fR
(Only for Internal Load Balancing):
https://cloud.google.com/load\-balancing/docs/dns\-names/ The DNS label to use
as the prefix of the fully qualified domain name for this forwarding rule. The
full name will be internally generated and output as dnsName. If this field is
not specified, no DNS record will be generated and no DNS name will be output.

.TP 2m
\fB\-\-subnet\fR=\fISUBNET\fR
(Only for \-\-load\-balancing\-scheme=INTERNAL) Subnetwork that this forwarding
rule applies to. If the network configured for this forwarding rule is in auto
subnet mode, this flag is optional and the subnet in the same region of the
forwarding rule is used. However, if the network is in custom subnet mode, a
subnetwork must be specified.

.TP 2m
\fB\-\-subnet\-region\fR=\fISUBNET_REGION\fR
Region of the subnetwork to operate on. If not specified, the region is set to
the region of the forwarding rule. Overrides the default \fBcompute/region\fR
property value for this command invocation.

.TP 2m
\fB\-\-target\-instance\-zone\fR=\fITARGET_INSTANCE_ZONE\fR
Zone of the target instance to operate on. Overrides the default
\fBcompute/zone\fR property value for this command invocation.

.TP 2m
\fB\-\-target\-pool\-region\fR=\fITARGET_POOL_REGION\fR
Region of the target pool to operate on. If not specified, the region is set to
the region of the forwarding rule. Overrides the default \fBcompute/region\fR
property value for this command invocation.

.TP 2m
\fB\-\-target\-vpn\-gateway\-region\fR=\fITARGET_VPN_GATEWAY_REGION\fR
Region of the VPN gateway to operate on. If not specified, the region is set to
the region of the forwarding rule. Overrides the default \fBcompute/region\fR
property value for this command invocation.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-address\fR=\fIADDRESS\fR
IP address that the forwarding rule serves. When a client sends traffic to this
IP address, the forwarding rule directs the traffic to the target that you
specify in the forwarding rule.

If you don't specify a reserved IP address, an ephemeral IP address is assigned.
You can specify the IP address as a literal IP address or a reference to an
existing Address resource. The following examples are all valid:
.RS 2m
.IP "\(bu" 2m
100.1.2.3
.IP "\(bu" 2m

https://compute.googleapis.com/compute/v1/projects/project\-1/regions/us\-central1/addresses/address\-1
.IP "\(bu" 2m
projects/project\-1/regions/us\-central1/addresses/address\-1
.IP "\(bu" 2m
regions/us\-central1/addresses/address\-1
.IP "\(bu" 2m
global/addresses/address\-1
.IP "\(bu" 2m
address\-1

.RE
.RE
.RE
.sp
The load\-balancing\-scheme ((EXTERNAL, INTERNAL, INTERNAL_MANAGED,
INTERNAL_MANAGED)) and the forwarding rule's target determine the type of IP
address that you can use. The address type must be external for
load\-balancing\-scheme EXTERNAL, and for the other load\-balancing\-schemes the
address must be internal. For detailed information, refer to
https://cloud.google.com/load\-balancing/docs/forwarding\-rule\-concepts#ip_address_specifications.

.RS 2m
.TP 2m
\fB\-\-ip\-version\fR=\fIIP_VERSION\fR
Version of the IP address to be allocated if no \-\-address is given. The
default is IPv4. \fIIP_VERSION\fR must be one of: \fBIPV4\fR, \fBIPV6\fR.

.TP 2m

At most one of these may be specified:


.RS 2m
.TP 2m
\fB\-\-address\-region\fR=\fIADDRESS_REGION\fR
Region of the address to operate on. If not specified, you may be prompted to
select a region.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/region\fR\fR property:

.RS 2m
$ gcloud config set compute/region REGION
.RE

A list of regions can be fetched by running:

.RS 2m
$ gcloud compute regions list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/region
.RE

Alternatively, the region can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_REGION\fR\fR.

.TP 2m
\fB\-\-global\-address\fR
If set, the address is global.

.RE
.sp
.TP 2m

At most one of these may be specified:


.RS 2m
.TP 2m
\fB\-\-backend\-service\-region\fR=\fIBACKEND_SERVICE_REGION\fR
Region of the backend service to operate on. If not specified, the region is set
to the region of the forwarding rule. Overrides the default \fBcompute/region\fR
property value for this command invocation.

.TP 2m
\fB\-\-global\-backend\-service\fR
If set, the backend service is global.

.RE
.sp
.TP 2m

At most one of these may be specified:


.RS 2m
.TP 2m
\fB\-\-global\fR
If set, the forwarding rule is global.

.TP 2m
\fB\-\-region\fR=\fIREGION\fR
Region of the forwarding rule to create. If not specified, you may be prompted
to select a region.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/region\fR\fR property:

.RS 2m
$ gcloud config set compute/region REGION
.RE

A list of regions can be fetched by running:

.RS 2m
$ gcloud compute regions list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/region
.RE

Alternatively, the region can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_REGION\fR\fR.

.RE
.sp
.TP 2m

At most one of these may be specified:


.RS 2m
.TP 2m
\fB\-\-global\-target\-http\-proxy\fR
If set, the http proxy is global.

.TP 2m
\fB\-\-target\-http\-proxy\-region\fR=\fITARGET_HTTP_PROXY_REGION\fR
Region of the http proxy to operate on. If not specified, you may be prompted to
select a region.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/region\fR\fR property:

.RS 2m
$ gcloud config set compute/region REGION
.RE

A list of regions can be fetched by running:

.RS 2m
$ gcloud compute regions list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/region
.RE

Alternatively, the region can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_REGION\fR\fR.

.RE
.sp
.TP 2m

At most one of these may be specified:


.RS 2m
.TP 2m
\fB\-\-global\-target\-https\-proxy\fR
If set, the https proxy is global.

.TP 2m
\fB\-\-target\-https\-proxy\-region\fR=\fITARGET_HTTPS_PROXY_REGION\fR
Region of the https proxy to operate on. If not specified, you may be prompted
to select a region.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/region\fR\fR property:

.RS 2m
$ gcloud config set compute/region REGION
.RE

A list of regions can be fetched by running:

.RS 2m
$ gcloud compute regions list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/region
.RE

Alternatively, the region can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_REGION\fR\fR.

.RE
.sp
.TP 2m

At most one of these may be specified:


.RS 2m
.TP 2m
\fB\-\-port\-range\fR=[\fIPORT\fR | \fISTART_PORT\-END_PORT\fR]
DEPRECATED, use \-\-ports. If specified, only packets addressed to ports in the
specified range are forwarded. For more information, refer to
https://cloud.google.com/load\-balancing/docs/forwarding\-rule\-concepts#port_specifications.

.TP 2m
\fB\-\-ports\fR=\fIALL\fR | [\fIPORT\fR | \fISTART_PORT\-END_PORT\fR],[...]
List of comma\-separated ports. The forwarding rule forwards packets with
matching destination ports. Port specification requirements vary depending on
the load\-balancing scheme and target. For more information, refer to
https://cloud.google.com/load\-balancing/docs/forwarding\-rule\-concepts#port_specifications.


.RE
.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity.

Run \fB$ gcloud help\fR for details.



.SH "EXAMPLES"

To create a global forwarding rule that will forward all traffic on port 8080
for IP address ADDRESS to a target http proxy PROXY, run:

.RS 2m
$ gcloud alpha compute forwarding\-rules create RULE_NAME \-\-global \e
    \-\-target\-http\-proxy=PROXY \-\-ports=8080 \-\-address=ADDRESS
.RE

To create a regional forwarding rule for the subnet SUBNET_NAME on the default
network that will forward all traffic on ports 80\-82 to a backend service
SERVICE_NAME, run:

.RS 2m
$ gcloud alpha compute forwarding\-rules create RULE_NAME \e
    \-\-load\-balancing\-scheme=INTERNAL \e
    \-\-backend\-service=SERVICE_NAME \-\-subnet=SUBNET_NAME \e
    \-\-network=default \-\-region=REGION \-\-ports=80\-82
.RE



.SH "NOTES"

This command is currently in ALPHA and may change without notice. If this
command fails with API permission errors despite specifying the right project,
you may be trying to access an API with an invitation\-only early access
whitelist. These variants are also available:

.RS 2m
$ gcloud compute forwarding\-rules create
$ gcloud beta compute forwarding\-rules create
.RE


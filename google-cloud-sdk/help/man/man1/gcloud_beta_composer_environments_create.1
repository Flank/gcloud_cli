
.TH "GCLOUD_BETA_COMPOSER_ENVIRONMENTS_CREATE" 1



.SH "NAME"
.HP
gcloud beta composer environments create \- create and initialize a Cloud Composer environment



.SH "SYNOPSIS"
.HP
\f5gcloud beta composer environments create\fR (\fIENVIRONMENT\fR\ :\ \fB\-\-location\fR=\fILOCATION\fR) [\fB\-\-airflow\-configs\fR=[\fIKEY\fR=\fIVALUE\fR,...]] [\fB\-\-async\fR] [\fB\-\-cloud\-sql\-machine\-type\fR=\fICLOUD_SQL_MACHINE_TYPE\fR] [\fB\-\-disk\-size\fR=\fIDISK_SIZE\fR;\ default="100GB"] [\fB\-\-env\-variables\fR=[\fINAME\fR=\fIVALUE\fR,...]] [\fB\-\-labels\fR=[\fIKEY\fR=\fIVALUE\fR,...]] [\fB\-\-machine\-type\fR=\fIMACHINE_TYPE\fR] [\fB\-\-node\-count\fR=\fINODE_COUNT\fR] [\fB\-\-oauth\-scopes\fR=[\fISCOPE\fR,...]] [\fB\-\-python\-version\fR=\fIPYTHON_VERSION\fR] [\fB\-\-service\-account\fR=\fISERVICE_ACCOUNT\fR] [\fB\-\-tags\fR=[\fITAG\fR,...]] [\fB\-\-web\-server\-machine\-type\fR=\fIWEB_SERVER_MACHINE_TYPE\fR] [\fB\-\-zone\fR=\fIZONE\fR] [\fB\-\-airflow\-version\fR=\fIAIRFLOW_VERSION\fR\ |\ \fB\-\-image\-version\fR=\fIIMAGE_VERSION\fR] [\fB\-\-cloud\-sql\-ipv4\-cidr\fR=\fICLOUD_SQL_IPV4_CIDR\fR\ \fB\-\-enable\-private\-endpoint\fR\ \fB\-\-enable\-private\-environment\fR\ \fB\-\-master\-ipv4\-cidr\fR=\fIMASTER_IPV4_CIDR\fR\ \fB\-\-web\-server\-ipv4\-cidr\fR=\fIWEB_SERVER_IPV4_CIDR\fR] [\fB\-\-cluster\-ipv4\-cidr\fR=\fICLUSTER_IPV4_CIDR\fR\ \fB\-\-cluster\-secondary\-range\-name\fR=\fICLUSTER_SECONDARY_RANGE_NAME\fR\ \fB\-\-enable\-ip\-alias\fR\ \fB\-\-services\-ipv4\-cidr\fR=\fISERVICES_IPV4_CIDR\fR\ \fB\-\-services\-secondary\-range\-name\fR=\fISERVICES_SECONDARY_RANGE_NAME\fR] [\fB\-\-network\fR=\fINETWORK\fR\ :\ \fB\-\-subnetwork\fR=\fISUBNETWORK\fR] [\fB\-\-web\-server\-allow\-all\fR\ |\ \fB\-\-web\-server\-allow\-ip\fR=[\fIdescription\fR=\fIDESCRIPTION\fR],[\fIip_range\fR=\fIIP_RANGE\fR]\ |\ \fB\-\-web\-server\-deny\-all\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(BETA)\fR If run asynchronously with \f5\-\-async\fR, exits after printing an
operation that can be used to poll the status of the creation operation via:

.RS 2m
gcloud composer operations describe
.RE



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m

Environment resource \- The environment to create. The arguments in this group
can be used to specify the attributes of this resource. (NOTE) Some attributes
are not given arguments in this group but can be set in other ways. To set the
[project] attribute: provide the argument [environment] on the command line with
a fully specified name; provide the argument [\-\-project] on the command line;
set the property [core/project]. This must be specified.

.RS 2m
.TP 2m
\fIENVIRONMENT\fR
ID of the environment or fully qualified identifier for the environment. This
positional must be specified if any of the other arguments in this group are
specified.

.TP 2m
\fB\-\-location\fR=\fILOCATION\fR
Compute Engine region in which to create the environment.


.RE
.RE
.sp

.SH "FLAGS"

.RS 2m
.TP 2m
\fB\-\-airflow\-configs\fR=[\fIKEY\fR=\fIVALUE\fR,...]
A list of Airflow software configuration override KEY=VALUE pairs to set. For
information on how to structure KEYs and VALUEs, run \f5$ gcloud help composer
environments update\fR.

.TP 2m
\fB\-\-async\fR
Return immediately, without waiting for the operation in progress to complete.

.TP 2m
\fB\-\-cloud\-sql\-machine\-type\fR=\fICLOUD_SQL_MACHINE_TYPE\fR
Cloud SQL machine type used by the Airflow database.

.TP 2m
\fB\-\-disk\-size\fR=\fIDISK_SIZE\fR; default="100GB"
The disk size for each VM node in the environment. The minimum size is 20GB, and
the maximum is 64TB. Specified value must be an integer multiple of gigabytes.
Cannot be updated after the environment has been created. If units are not
provided, defaults to GB.

.TP 2m
\fB\-\-env\-variables\fR=[\fINAME\fR=\fIVALUE\fR,...]
A comma\-delimited list of environment variable \f5NAME=VALUE\fR pairs to
provide to the Airflow scheduler, worker, and webserver processes. NAME may
contain upper and lowercase letters, digits, and underscores, but they may not
begin with a digit. To include commas as part of a \f5VALUE\fR, see \f5gcloud
topics escaping\fR for information about overriding the delimiter.

.TP 2m
\fB\-\-labels\fR=[\fIKEY\fR=\fIVALUE\fR,...]
List of label KEY=VALUE pairs to add.

Keys must start with a lowercase character and contain only hyphens (\f5\-\fR),
underscores (\f5_\fR), lowercase characters, and numbers. Values must contain
only hyphens (\f5\-\fR), underscores (\f5_\fR), lowercase characters, and
numbers.

.TP 2m
\fB\-\-machine\-type\fR=\fIMACHINE_TYPE\fR
The Compute Engine machine type
(https://cloud.google.com/compute/docs/machine\-types) to use for nodes. For
example \f5\-\-machine\-type=n1\-standard\-1\fR.

.TP 2m
\fB\-\-node\-count\fR=\fINODE_COUNT\fR
The number of nodes to create to run the environment.

.TP 2m
\fB\-\-oauth\-scopes\fR=[\fISCOPE\fR,...]
The set of Google API scopes to be made available on all of the node VMs.
Defaults to ['https://www.googleapis.com/auth/cloud\-platform']. Cannot be
updated.

.TP 2m
\fB\-\-python\-version\fR=\fIPYTHON_VERSION\fR
The Python version to be used within the created environment. Supplied value
should represent the desired major Python version. Cannot be updated.
\fIPYTHON_VERSION\fR must be one of:

.RS 2m
.TP 2m
\fB2\fR
Created environment will use Python 2
.TP 2m
\fB3\fR
Created environment will use Python 3
.RE
.sp


.TP 2m
\fB\-\-service\-account\fR=\fISERVICE_ACCOUNT\fR
The Google Cloud Platform service account to be used by the node VMs. If a
service account is not specified, the "default" Compute Engine service account
for the project is used. Cannot be updated.

.TP 2m
\fB\-\-tags\fR=[\fITAG\fR,...]
The set of instance tags applied to all node VMs. Tags are used to identify
valid sources or targets for network firewalls. Each tag within the list must
comply with RFC 1035. Cannot be updated.

.TP 2m
\fB\-\-web\-server\-machine\-type\fR=\fIWEB_SERVER_MACHINE_TYPE\fR
machine type used by the Airflow web server. The list of available machine types
is available here: https://cloud.google.com/composer/pricing.

.TP 2m
\fB\-\-zone\fR=\fIZONE\fR
The Compute Engine zone in which the environment will be created. For example
\f5\-\-zone=us\-central1\-a\fR.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-airflow\-version\fR=\fIAIRFLOW_VERSION\fR
Version of Airflow to run in the environment.

.RS 2m
Must be of the form `X.Y[.Z]`.
.RE

.RS 2m
The latest supported Cloud Composer version will be used within
the created environment.
.RE

.TP 2m
\fB\-\-image\-version\fR=\fIIMAGE_VERSION\fR
Version of the image to run in the environment.

.RS 2m
The image version encapsulates the versions of both Cloud Composer
and Apache Airflow. Must be of the form
`composer\-A.B.C[\-D.E]\-airflow\-X.Y[.Z]`.
.RE

.RS 2m
The Cloud Composer and Airflow versions are semantic versions.
`latest` can be provided instead of an explicit Cloud Composer
version number indicating that the server will replace `latest`
with the current Cloud Composer version. For the Apache Airflow
portion, the patch version can be omitted and the current
version will be selected. The version numbers that are used will
be stored.
.RE

.RE
.sp
.TP 2m

Private Clusters

.RS 2m
.TP 2m
\fB\-\-cloud\-sql\-ipv4\-cidr\fR=\fICLOUD_SQL_IPV4_CIDR\fR
IPv4 CIDR range to use for the Cloud SQL network. This should have a size of the
netmask not greater than 24.

Cannot be specified unless '\-\-enable\-private\-environment' is also specified.

.TP 2m
\fB\-\-enable\-private\-endpoint\fR
Environment cluster is managed using the private IP address of the master API
endpoint. Therefore access to the master endpoint must be from internal IP
addresses.

If not specified, the master API endpoint will be accessible by its public IP
address.

Cannot be specified unless '\-\-enable\-private\-environment' is also specified.

.TP 2m
\fB\-\-enable\-private\-environment\fR
Environment cluster is created with no public IP addresses on the cluster nodes.

If not specified, cluster nodes will be assigned public IP addresses.

Cannot be specified unless '\-\-enable\-ip\-alias' is also specified.

.TP 2m
\fB\-\-master\-ipv4\-cidr\fR=\fIMASTER_IPV4_CIDR\fR
IPv4 CIDR range to use for the cluste master network. This should have a size of
the netmask between 23 and 28.

Cannot be specified unless '\-\-enable\-private\-environment' is also specified.

.TP 2m
\fB\-\-web\-server\-ipv4\-cidr\fR=\fIWEB_SERVER_IPV4_CIDR\fR
IPv4 CIDR range to use for the Airflow web server network. This should have a
size of the netmask between 24 and 29.

Cannot be specified unless '\-\-enable\-private\-environment' is also specified.

.RE
.sp
.TP 2m

IP Alias (VPC\-native)

.RS 2m
.TP 2m
\fB\-\-cluster\-ipv4\-cidr\fR=\fICLUSTER_IPV4_CIDR\fR
IP address range for the pods in this cluster in CIDR notation (e.g.
10.0.0.0/14).

Cannot be specified unless '\-\-enable\-ip\-alias' is also specified.

.TP 2m
\fB\-\-cluster\-secondary\-range\-name\fR=\fICLUSTER_SECONDARY_RANGE_NAME\fR
Secondary range to be used as the source for pod IPs. Alias ranges will be
allocated from this secondary range. NAME must be the name of an existing
secondary range in the cluster subnetwork.

Cannot be specified unless '\-\-enable\-ip\-alias' is also specified.

.TP 2m
\fB\-\-enable\-ip\-alias\fR
Enable use of alias IPs (https://cloud.google.com/compute/docs/alias\-ip/) for
Pod IPs. This will require at least two secondary ranges in the subnetwork, one
for the pod IPs and another to reserve space for the services range.

.TP 2m
\fB\-\-services\-ipv4\-cidr\fR=\fISERVICES_IPV4_CIDR\fR
IP range for the services IPs.

Can be specified as a netmask size (e.g. '/20') or as in CIDR notion (e.g.
\'10.100.0.0/20'). If given as a netmask size, the IP range will be chosen
automatically from the available space in the network.

If unspecified, the services CIDR range will be chosen with a default mask size.

Cannot be specified unless '\-\-enable\-ip\-alias' is also specified.

.TP 2m
\fB\-\-services\-secondary\-range\-name\fR=\fISERVICES_SECONDARY_RANGE_NAME\fR
Secondary range to be used for services (e.g. ClusterIPs). NAME must be the name
of an existing secondary range in the cluster subnetwork.

Cannot be specified unless '\-\-enable\-ip\-alias' is also specified.

.RE
.sp
.TP 2m

Virtual Private Cloud networking

.RS 2m
.TP 2m
\fB\-\-network\fR=\fINETWORK\fR
The Compute Engine Network to which the environment will be connected. If a
\'Custom Subnet Network' is provided, \f5\-\-subnetwork\fR must be specified as
well. This flag must be specified if any of the other arguments in this group
are specified.

.TP 2m
\fB\-\-subnetwork\fR=\fISUBNETWORK\fR
The Compute Engine subnetwork
(https://cloud.google.com/compute/docs/subnetworks) to which the environment
will be connected.

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-web\-server\-allow\-all\fR
Allows all IP addresses to access the Airflow web server.

.TP 2m
\fB\-\-web\-server\-allow\-ip\fR=[\fIdescription\fR=\fIDESCRIPTION\fR],[\fIip_range\fR=\fIIP_RANGE\fR]
Specifies a list of IPv4 or IPv6 ranges that will be allowed to access the
Airflow web server. By default, all IPs are allowed to access the web server.

This is a repeated argument that can be specified multiple times to specify
multiple IP ranges. (e.g.
\-\-web\-server\-allow\-ip=ip_range=130.211.160.0/28,description="office
network"
\-\-web\-server\-allow\-ip=ip_range=130.211.114.0/28,description="legacy
network")

.TP 2m
\fBip_range\fR
IPv4 or IPv6 range of addresses allowed to access the Airflow web server.

.TP 2m
\fBdescription\fR
An optional description of the IP range.
.TP 2m
\fB\-\-web\-server\-deny\-all\fR
Denies all incoming traffic to the Airflow web server.


.RE
.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity.

Run \fB$ gcloud help\fR for details.



.SH "EXAMPLES"

To create an environment called \f5\fIenv\-1\fR\fR with all the default values,
run:

.RS 2m
$ gcloud beta composer environments create env\-1
.RE

To create a new environment named \f5\fIenv\-1\fR\fR with the Google Compute
Engine machine\-type \f5\fIn1\-standard\-8\fR\fR, and the Google Compute Engine
network \f5\fImy\-network\fR\fR, run:

.RS 2m
$ gcloud beta composer environments create env\-1 \e
    \-\-machine\-type=n1\-standard\-8 \-\-network=my\-network
.RE



.SH "NOTES"

This command is currently in BETA and may change without notice. These variants
are also available:

.RS 2m
$ gcloud composer environments create
$ gcloud alpha composer environments create
.RE



.TH "GCLOUD_ALPHA_COMPUTE_OS\-CONFIG_OS\-UPGRADE" 1



.SH "NAME"
.HP
gcloud alpha compute os\-config os\-upgrade \- upgrade the instances OS version



.SH "SYNOPSIS"
.HP
\f5gcloud alpha compute os\-config os\-upgrade\fR \fIINSTANCE_NAME\fR \fB\-\-source\-os\fR=\fISOURCE_OS\fR \fB\-\-target\-os\fR=\fITARGET_OS\fR [\fB\-\-async\fR] [\fB\-\-auto\-rollback\fR] [\fB\-\-no\-create\-machine\-backup\fR] [\fB\-\-log\-location\fR=\fILOG_LOCATION\fR] [\fB\-\-timeout\fR=\fITIMEOUT\fR;\ default="2h"] [\fB\-\-zone\fR=\fIZONE\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(ALPHA)\fR \fBgcloud alpha compute os\-config os\-upgrade\fR upgrades the
instance's OS version.

OS Upgrade involves:
.RS 2m
.IP "\(bu" 2m
Create a snapshot and/or machine image for the instance.
.IP "\(bu" 2m
Create an install media disk and attach it to the instance.
.IP "\(bu" 2m
Upgrade the OS version.
.IP "\(bu" 2m
Cleanup install media disk after upgrade.
.RE
.sp

Virtual instances, snapshots, machine images, and disks in Compute Engine and
files stored on Cloud Storage incur charges. See
https://cloud.google.com/compute/docs/images/importing\-virtual\-disks#resource_cleanup.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fIINSTANCE_NAME\fR
Name of the instance to os\-upgrade. For details on valid instance names, refer
to the criteria documented under the field 'name' at:
https://cloud.google.com/compute/docs/reference/rest/v1/instances


.RE
.sp

.SH "REQUIRED FLAGS"

.RS 2m
.TP 2m
\fB\-\-source\-os\fR=\fISOURCE_OS\fR
OS version of the source instance to upgrade. \fISOURCE_OS\fR must be (currently
only one value is supported): \fBwindows\-2008r2\fR.

.TP 2m
\fB\-\-target\-os\fR=\fITARGET_OS\fR
Version of the OS after upgrade. \fITARGET_OS\fR must be (currently only one
value is supported): \fBwindows\-2012r2\fR.


.RE
.sp

.SH "OPTIONAL FLAGS"

.RS 2m
.TP 2m
\fB\-\-async\fR
Return immediately, without waiting for the operation in progress to complete.

.TP 2m
\fB\-\-auto\-rollback\fR
When auto rollback is enabled, the instance and its resources are restored to
their original state. Otherwise, the instance and any temporary resources are
left in the intermediate state of the time of failure. This is useful for
debugging.

.TP 2m
\fB\-\-create\-machine\-backup\fR
When enabled, a machine image is created that backs up the original state of
your instance. Enabled by default, use \fB\-\-no\-create\-machine\-backup\fR to
disable.

.TP 2m
\fB\-\-log\-location\fR=\fILOG_LOCATION\fR
Directory in Cloud Storage to hold build logs. If not set, \f5gs://<project
num>.cloudbuild\-logs.googleusercontent.com/\fR is created and used.

.TP 2m
\fB\-\-timeout\fR=\fITIMEOUT\fR; default="2h"
Maximum time a build can last before it fails as "TIMEOUT". For example,
specifying \f52h\fR fails the process after 2 hours. See $ gcloud topic
datetimes for information about duration formats.

.TP 2m
\fB\-\-zone\fR=\fIZONE\fR
Zone of the instance to os\-upgrade. If not specified and the
\f5\fIcompute/zone\fR\fR property isn't set, you may be prompted to select a
zone.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/zone\fR\fR property:

.RS 2m
$ gcloud config set compute/zone ZONE
.RE

A list of zones can be fetched by running:

.RS 2m
$ gcloud compute zones list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/zone
.RE

Alternatively, the zone can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_ZONE\fR\fR.


.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity.

Run \fB$ gcloud help\fR for details.



.SH "EXAMPLES"

To upgrade a instance named \f5my\-instance\fR from windows\-2008r2 to
windows\-2012r2, run:

.RS 2m
$ gcloud alpha compute os\-config os\-upgrade my\-instance \e
    \-\-source\-os=windows\-2008r2 \-\-target\-os=windows\-2012r2
.RE



.SH "NOTES"

This command is currently in ALPHA and may change without notice. If this
command fails with API permission errors despite specifying the right project,
you may be trying to access an API with an invitation\-only early access
allowlist. This variant is also available:

.RS 2m
$ gcloud beta compute os\-config os\-upgrade
.RE


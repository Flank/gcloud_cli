
.TH "GCLOUD_COMPUTE_BACKEND\-SERVICES_UPDATE" 1



.SH "NAME"
.HP
gcloud compute backend\-services update \- update a backend service



.SH "SYNOPSIS"
.HP
\f5gcloud compute backend\-services update\fR \fIBACKEND_SERVICE_NAME\fR [\fB\-\-affinity\-cookie\-ttl\fR=\fIAFFINITY_COOKIE_TTL\fR] [\fB\-\-cache\-key\-include\-host\fR] [\fB\-\-cache\-key\-include\-protocol\fR] [\fB\-\-cache\-key\-include\-query\-string\fR] [\fB\-\-connection\-draining\-timeout\fR=\fICONNECTION_DRAINING_TIMEOUT\fR] [\fB\-\-description\fR=\fIDESCRIPTION\fR] [\fB\-\-enable\-cdn\fR] [\fB\-\-health\-checks\fR=\fIHEALTH_CHECK\fR,[...]] [\fB\-\-http\-health\-checks\fR=\fIHTTP_HEALTH_CHECK\fR,[...]] [\fB\-\-https\-health\-checks\fR=\fIHTTPS_HEALTH_CHECK\fR,[...]] [\fB\-\-iap\fR=\fIdisabled\fR|\fIenabled\fR,[\fIoauth2\-client\-id\fR=\fIOAUTH2\-CLIENT\-ID\fR,\fIoauth2\-client\-secret\fR=\fIOAUTH2\-CLIENT\-SECRET\fR]] [\fB\-\-port\-name\fR=\fIPORT_NAME\fR] [\fB\-\-protocol\fR=\fIPROTOCOL\fR] [\fB\-\-security\-policy\fR=\fISECURITY_POLICY\fR] [\fB\-\-session\-affinity\fR=\fISESSION_AFFINITY\fR] [\fB\-\-signed\-url\-cache\-max\-age\fR=\fISIGNED_URL_CACHE_MAX_AGE\fR] [\fB\-\-timeout\fR=\fITIMEOUT\fR] [\fB\-\-cache\-key\-query\-string\-blacklist\fR=[\fIQUERY_STRING\fR,...]\ |\ \fB\-\-cache\-key\-query\-string\-whitelist\fR=\fIQUERY_STRING\fR,[...]] [\fB\-\-custom\-request\-header\fR=\fICUSTOM_REQUEST_HEADER\fR\ |\ \fB\-\-no\-custom\-request\-headers\fR] [\fB\-\-global\fR\ |\ \fB\-\-region\fR=\fIREGION\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fBgcloud compute backend\-services update\fR is used to update backend
services.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fIBACKEND_SERVICE_NAME\fR
Name of the backend service to update.


.RE
.sp

.SH "FLAGS"

.RS 2m
.TP 2m
\fB\-\-affinity\-cookie\-ttl\fR=\fIAFFINITY_COOKIE_TTL\fR
If session\-affinity is set to "generated_cookie", this flag sets the TTL, in
seconds, of the resulting cookie. A setting of 0 indicates that the cookie
should be transient. See $ gcloud topic datetimes for information on duration
formats.

.TP 2m
\fB\-\-cache\-key\-include\-host\fR
Enable including host in cache key. If enabled, requests to different hosts will
be cached separately. Can only be applied for global resources.

.TP 2m
\fB\-\-cache\-key\-include\-protocol\fR
Enable including protocol in cache key. If enabled, http and https requests will
be cached separately. Can only be applied for global resources.

.TP 2m
\fB\-\-cache\-key\-include\-query\-string\fR
Enable including query string in cache key. If enabled, the query string
parameters will be included according to
\-\-cache\-key\-query\-string\-whitelist and
\-\-cache\-key\-query\-string\-blacklist. If disabled, the entire query string
will be excluded. Use "\-\-cache\-key\-query\-string\-blacklist=" (sets the
blacklist to the empty list) to include the entire query string. Can only be
applied for global resources.

.TP 2m
\fB\-\-connection\-draining\-timeout\fR=\fICONNECTION_DRAINING_TIMEOUT\fR
Connection draining timeout to be used during removal of VMs from instance
groups. This guarantees that for the specified time all existing connections to
a VM will remain untouched, but no new connections will be accepted. Set timeout
to zero to disable connection draining. Enable feature by specifying a timeout
of up to one hour. If the flag is omitted API default value (0s) will be used.
See $ gcloud topic datetimes for information on duration formats.

.TP 2m
\fB\-\-description\fR=\fIDESCRIPTION\fR
An optional, textual description for the backend service.

.TP 2m
\fB\-\-enable\-cdn\fR
Enable Cloud CDN for the backend service. Cloud CDN can cache HTTP responses
from a backend service at the edge of the network, close to users. Cloud CDN is
disabled by default.

.TP 2m
\fB\-\-health\-checks\fR=\fIHEALTH_CHECK\fR,[...]
Specifies a list of health check objects for checking the health of the backend
service. Currently at most one health check can be specified. Health checks need
not be for the same protocol as that of the backend service.

.TP 2m
\fB\-\-http\-health\-checks\fR=\fIHTTP_HEALTH_CHECK\fR,[...]
Specifies a list of legacy HTTP health check objects for checking the health of
the backend service.

Legacy health checks are not recommended for backend services. It is possible to
use a legacy health check on a backend service for a HTTP(S) load balancer if
that backend service uses instance groups. For more information, see this guide:
https://cloud.google.com/load\-balancing/docs/health\-check\-concepts#lb_guide

.TP 2m
\fB\-\-https\-health\-checks\fR=\fIHTTPS_HEALTH_CHECK\fR,[...]
Specifies a list of legacy HTTPS health check objects for checking the health of
the backend service.

Legacy health checks are not recommended for backend services. It is possible to
use a legacy health check on a backend service for a HTTP(S) load balancer if
that backend service uses instance groups. For more information, see this guide:
https://cloud.google.com/load\-balancing/docs/health\-check\-concepts#lb_guide

.TP 2m
\fB\-\-iap\fR=\fIdisabled\fR|\fIenabled\fR,[\fIoauth2\-client\-id\fR=\fIOAUTH2\-CLIENT\-ID\fR,\fIoauth2\-client\-secret\fR=\fIOAUTH2\-CLIENT\-SECRET\fR]
Change the Identity Aware Proxy (IAP) service configuration for the backend
service. You can set IAP to 'enabled' or 'disabled', or modify the OAuth2 client
configuration (oauth2\-client\-id and oauth2\-client\-secret) used by IAP. If
any fields are unspecified, their values will not be modified. For instance, if
IAP is enabled, '\-\-iap=disabled' will disable IAP, and a subsequent
\'\-\-iap=enabled' will then enable it with the same OAuth2 client configuration
as the first time it was enabled. See https://cloud.google.com/iap/ for more
information about this feature.

.TP 2m
\fB\-\-port\-name\fR=\fIPORT_NAME\fR
The name of a service that has been added to an instance group in this backend.
Instance group services map a name to a port number which is used by the load
balancing service. Only one \f5\fIport\-name\fR\fR may be added to a backend
service, and that name must exist as a service on all instance groups that are a
part of this backend service. The port number associated with the name may
differ between instances. If you do not specify this flag, your instance groups
must have a service named \f5\fIhttp\fR\fR configured. See also \f5gcloud
compute instance\-groups set\-named\-ports \-\-help\fR. The
\f5\fIport\-name\fR\fR parameter cannot be set if the load\-balancing\-scheme is
INTERNAL.

.TP 2m
\fB\-\-protocol\fR=\fIPROTOCOL\fR
Protocol for incoming requests.

If the load\-balancing\-scheme is \f5INTERNAL\fR, the protocol must be one of:
\f5TCP\fR, \f5UDP\fR.

If the load\-balancing\-scheme is \f5EXTERNAL\fR, the protocol must be one of:
\f5HTTP\fR, \f5HTTPS\fR, \f5HTTP2\fR, \f5SSL\fR, \f5TCP\fR.

.TP 2m
\fB\-\-security\-policy\fR=\fISECURITY_POLICY\fR
The security policy that will be set for this backend service.

.TP 2m
\fB\-\-session\-affinity\fR=\fISESSION_AFFINITY\fR
The type of TCP session affinity to use. Not supported for UDP.
\fISESSION_AFFINITY\fR must be one of:

.RS 2m
.TP 2m
\fBCLIENT_IP\fR
Route requests to instances based on the hash of the client's IP address.
.TP 2m
\fBCLIENT_IP_PORT_PROTO\fR
(Applicable if load\-balancing scheme is internal) Connections from the same
client IP with the same IP protocol and port will go to the same VM in the
backend while that VM remains healthy.
.TP 2m
\fBCLIENT_IP_PROTO\fR
(Applicable if load\-balancing scheme is internal) Connections from the same
client IP with the same IP protocol will go to the same VM in the pool while
that VM remains healthy.
.TP 2m
\fBGENERATED_COOKIE\fR
(Applicable if load\-balancing scheme is external) Route requests to instances
based on the contents of the "GCLB" cookie set by the load balancer.
.TP 2m
\fBNONE\fR
Session affinity is disabled.
.RE
.sp


.TP 2m
\fB\-\-signed\-url\-cache\-max\-age\fR=\fISIGNED_URL_CACHE_MAX_AGE\fR
The amount of time up to which the response to a signed URL request will be
cached in the CDN. After this time period, the Signed URL will be revalidated
before being served. Cloud CDN will internally act as though all responses from
this backend had a \f5Cache\-Control: public, max\-age=[TTL]\fR header,
regardless of any existing Cache\-Control header. The actual headers served in
responses will not be altered.

For example, specifying \f512h\fR will cause the responses to signed URL
requests to be cached in the CDN up to 12 hours. See $ gcloud topic datetimes
for information on duration formats.

This flag only affects signed URL requests.

.TP 2m
\fB\-\-timeout\fR=\fITIMEOUT\fR
Only applicable to HTTP(S), SSL Proxy, and TCP Proxy load balancers: The amount
of time to wait for a backend to return a full response for the request and for
the load balancer to proxy the response to the client before considering the
request failed.

For example, specifying 10s gives instances 10 seconds to respond to requests.
The load balancer will retry GET requests once if the backend closes the
connection or times out before sending response headers to the proxy. If the
backend produces any response headers, the load balancer does not retry. If the
backend does not reply at all, the load balancer returns a 502 Bad Gateway error
to the client. See $ gcloud topic datetimes for information on duration formats.

This parameter has no effect if the load\-balancing\-scheme is INTERNAL.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-cache\-key\-query\-string\-blacklist\fR=[\fIQUERY_STRING\fR,...]
Specifies a comma separated list of query string parameters to exclude in cache
keys. All other parameters will be included. Either specify
\-\-cache\-key\-query\-string\-whitelist or
\-\-cache\-key\-query\-string\-blacklist, not both. '&' and '=' will be percent
encoded and not treated as delimiters. Can only be applied for global resources.

.TP 2m
\fB\-\-cache\-key\-query\-string\-whitelist\fR=\fIQUERY_STRING\fR,[...]
Specifies a comma separated list of query string parameters to include in cache
keys. All other parameters will be excluded. Either specify
\-\-cache\-key\-query\-string\-whitelist or
\-\-cache\-key\-query\-string\-blacklist, not both. '&' and '=' will be percent
encoded and not treated as delimiters. Can only be applied for global resources.

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-custom\-request\-header\fR=\fICUSTOM_REQUEST_HEADER\fR
Specifies a HTTP Header to be added by your load balancer. This flag can be
repeated to specify multiple headers. For example:

.RS 2m
$ gcloud compute backend\-services update NAME             \e
    \-\-custom\-request\-header "header\-name: value"             \e
    \-\-custom\-request\-header "another\-header:"
.RE

.TP 2m
\fB\-\-no\-custom\-request\-headers\fR
Remove all custom request headers for the backend service.

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-global\fR
If set, the backend service is global.

.TP 2m
\fB\-\-region\fR=\fIREGION\fR
Region of the backend service to update. Overrides the default
\fBcompute/region\fR property value for this command invocation.


.RE
.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity. Run \fB$ gcloud
help\fR for details.



.SH "NOTES"

These variants are also available:

.RS 2m
$ gcloud alpha compute backend\-services update
$ gcloud beta compute backend\-services update
.RE


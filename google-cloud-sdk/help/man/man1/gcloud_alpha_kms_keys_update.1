
.TH "GCLOUD_ALPHA_KMS_KEYS_UPDATE" 1



.SH "NAME"
.HP
gcloud alpha kms keys update \- update a key



.SH "SYNOPSIS"
.HP
\f5gcloud alpha kms keys update\fR (\fIKEY\fR\ :\ \fB\-\-keyring\fR=\fIKEYRING\fR\ \fB\-\-location\fR=\fILOCATION\fR) [\fB\-\-default\-algorithm\fR=\fIDEFAULT_ALGORITHM\fR] [\fB\-\-next\-rotation\-time\fR=\fINEXT_ROTATION_TIME\fR] [\fB\-\-primary\-version\fR=\fIPRIMARY_VERSION\fR] [\fB\-\-remove\-rotation\-schedule\fR] [\fB\-\-rotation\-period\fR=\fIROTATION_PERIOD\fR] [\fB\-\-update\-labels\fR=[\fIKEY\fR=\fIVALUE\fR,...]] [\fB\-\-clear\-labels\fR\ |\ \fB\-\-remove\-labels\fR=[\fIKEY\fR,...]] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(ALPHA)\fR 1. Update the rotation schedule for the given key.

Updates the rotation schedule for the given key. The schedule automatically
creates a new primary version for the key according to
\f5next\-rotation\-time\fR and \f5rotation\-period\fR flags.

Flag \f5next\-rotation\-time\fR must be in ISO 8601 or RFC3339 format, and
\f5rotation\-period\fR must be in the form INTEGER[UNIT], where units can be one
of seconds (s), minutes (m), hours (h) or days (d).

Key rotations performed manually via \f5update\-primary\-version\fR and the
version \f5create\fR do not affect the stored \f5next\-rotation\-time\fR.

2. Remove the rotation schedule for the given key with
\f5remove\-rotation\-schedule\fR flag.

3. Update/Remove the labels for the given key with \f5update\-labels\fR and/or
\f5remove\-labels\fR flags.

4. Update the primary version for the given key with \f5primary\-version\fR
flag.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m

Key resource \- The KMS key resource. The arguments in this group can be used to
specify the attributes of this resource. (NOTE) Some attributes are not given
arguments in this group but can be set in other ways. To set the [project]
attribute: provide the argument [key] on the command line with a fully specified
name; set the property [core/project]. This must be specified.

.RS 2m
.TP 2m
\fIKEY\fR
ID of the key or fully qualified identifier for the key. This positional must be
specified if any of the other arguments in this group are specified.

.TP 2m
\fB\-\-keyring\fR=\fIKEYRING\fR
The KMS keyring of the key.

.TP 2m
\fB\-\-location\fR=\fILOCATION\fR
The Cloud location for the key.


.RE
.RE
.sp

.SH "FLAGS"

.RS 2m
.TP 2m
\fB\-\-default\-algorithm\fR=\fIDEFAULT_ALGORITHM\fR
The default algorithm for the crypto key. For more information about choosing an
algorithm, see https://cloud.google.com/kms/docs/algorithms.
\fIDEFAULT_ALGORITHM\fR must be one of: \fBec\-sign\-p256\-sha256\fR,
\fBec\-sign\-p384\-sha384\fR, \fBexternal\-symmetric\-encryption\fR,
\fBgoogle\-symmetric\-encryption\fR, \fBrsa\-decrypt\-oaep\-2048\-sha256\fR,
\fBrsa\-decrypt\-oaep\-3072\-sha256\fR, \fBrsa\-decrypt\-oaep\-4096\-sha256\fR,
\fBrsa\-decrypt\-oaep\-4096\-sha512\fR, \fBrsa\-sign\-pkcs1\-2048\-sha256\fR,
\fBrsa\-sign\-pkcs1\-3072\-sha256\fR, \fBrsa\-sign\-pkcs1\-4096\-sha256\fR,
\fBrsa\-sign\-pkcs1\-4096\-sha512\fR, \fBrsa\-sign\-pss\-2048\-sha256\fR,
\fBrsa\-sign\-pss\-3072\-sha256\fR, \fBrsa\-sign\-pss\-4096\-sha256\fR,
\fBrsa\-sign\-pss\-4096\-sha512\fR.

.TP 2m
\fB\-\-next\-rotation\-time\fR=\fINEXT_ROTATION_TIME\fR
Next automatic rotation time of the key. See $ gcloud topic datetimes for
information on time formats.

.TP 2m
\fB\-\-primary\-version\fR=\fIPRIMARY_VERSION\fR
Primary version to make primary.

.TP 2m
\fB\-\-remove\-rotation\-schedule\fR
Remove any existing rotation schedule on the key.

.TP 2m
\fB\-\-rotation\-period\fR=\fIROTATION_PERIOD\fR
Automatic rotation period of the key. See $ gcloud topic datetimes for
information on duration formats.

.TP 2m
\fB\-\-update\-labels\fR=[\fIKEY\fR=\fIVALUE\fR,...]
List of label KEY=VALUE pairs to update. If a label exists its value is
modified, otherwise a new label is created.

Keys must start with a lowercase character and contain only hyphens (\f5\-\fR),
underscores (\f5_\fR), lowercase characters, and numbers. Values must contain
only hyphens (\f5\-\fR), underscores (\f5_\fR), lowercase characters, and
numbers.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-clear\-labels\fR
Remove all labels. If \f5\-\-update\-labels\fR is also specified then
\f5\-\-clear\-labels\fR is applied first.

For example, to remove all labels:

.RS 2m
$ gcloud alpha kms keys update \-\-clear\-labels
.RE

To set the labels to exactly "foo" and "baz":

.RS 2m
$ gcloud alpha kms keys update \-\-clear\-labels \e
  \-\-update\-labels foo=bar,baz=qux
.RE

.TP 2m
\fB\-\-remove\-labels\fR=[\fIKEY\fR,...]
List of label keys to remove. If a label does not exist it is silently ignored.
If \f5\-\-update\-labels\fR is also specified then \f5\-\-remove\-labels\fR is
applied first.


.RE
.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity.

Run \fB$ gcloud help\fR for details.



.SH "EXAMPLES"

The following command sets a 30 day rotation period for the key named
\f5frodo\fR within the keyring \f5fellowship\fR and location \f5global\fR
starting at the specified time:

.RS 2m
$ gcloud alpha kms keys update frodo \e
    \-\-location=global \e
    \-\-keyring=fellowship \e
    \-\-rotation\-period=30d \e
    \-\-next\-rotation\-time=2017\-10\-12T12:34:56.1234Z
.RE

The following command removes the rotation schedule for the key named
\f5frodo\fR within the keyring \f5fellowship\fR and location \f5global\fR:

.RS 2m
$ gcloud alpha kms keys update frodo \e
    \-\-location=global \e
    \-\-keyring=fellowship \e
    \-\-remove\-rotation\-schedule
.RE

The following command updates the labels value for the key named \f5frodo\fR
within the keyring \f5fellowship\fR and location \f5global\fR. If the label key
does not exist at the time, it will be added:

.RS 2m
$ gcloud alpha kms keys update frodo \e
    \-\-location=global \e
    \-\-keyring=fellowship \e
    \-\-update\-labels=k1=v1
.RE

The following command removes labels k1 and k2 from the key named \f5frodo\fR
within the keyring \f5fellowship\fR and location \f5global\fR:

.RS 2m
$ gcloud alpha kms keys update frodo \e
    \-\-location=global \e
    \-\-keyring=fellowship \e
    \-\-remove\-labels=k1,k2
.RE

The following command updates the primary version for the key named \f5frodo\fR
within the keyring \f5fellowship\fR and location \f5global\fR:

.RS 2m
$ gcloud alpha kms keys update frodo \e
    \-\-location=global \e
    \-\-keyring=fellowship \e
    \-\-primary\-version=1
.RE

The following command updates the default algorithm for the key named
\f5frodo\fR within the keyring \f5fellowship\fR and location \f5global\fR,
assuming the key originally has purpose 'asymmetric\-encryption' and algorithm
\'rsa\-decrypt\-oaep\-2048\-sha256':

.RS 2m
$ gcloud alpha kms keys update frodo \e
    \-\-location=global \e
    \-\-keyring=fellowship \e
    \-\-default\-algorithm=rsa\-decrypt\-oaep\-4096\-sha256
.RE



.SH "NOTES"

This command is currently in ALPHA and may change without notice. If this
command fails with API permission errors despite specifying the right project,
you may be trying to access an API with an invitation\-only early access
allowlist. These variants are also available:

.RS 2m
$ gcloud kms keys update
$ gcloud beta kms keys update
.RE


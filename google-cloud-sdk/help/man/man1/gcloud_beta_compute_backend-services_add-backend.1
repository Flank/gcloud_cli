
.TH "GCLOUD_BETA_COMPUTE_BACKEND\-SERVICES_ADD\-BACKEND" 1



.SH "NAME"
.HP
gcloud beta compute backend\-services add\-backend \- add a backend to a backend service



.SH "SYNOPSIS"
.HP
\f5gcloud beta compute backend\-services add\-backend\fR \fIBACKEND_SERVICE_NAME\fR ([\fB\-\-instance\-group\fR=\fIINSTANCE_GROUP\fR\ :\ \fB\-\-instance\-group\-region\fR=\fIINSTANCE_GROUP_REGION\fR\ |\ \fB\-\-instance\-group\-zone\fR=\fIINSTANCE_GROUP_ZONE\fR]\ |\ [\fB\-\-network\-endpoint\-group\fR=\fINETWORK_ENDPOINT_GROUP\fR\ :\ \fB\-\-network\-endpoint\-group\-zone\fR=\fINETWORK_ENDPOINT_GROUP_ZONE\fR]) [\fB\-\-balancing\-mode\fR=\fIBALANCING_MODE\fR] [\fB\-\-capacity\-scaler\fR=\fICAPACITY_SCALER\fR] [\fB\-\-description\fR=\fIDESCRIPTION\fR] [\fB\-\-max\-utilization\fR=\fIMAX_UTILIZATION\fR] [\fB\-\-global\fR\ |\ \fB\-\-region\fR=\fIREGION\fR] [\fB\-\-max\-connections\fR=\fIMAX_CONNECTIONS\fR\ |\ \fB\-\-max\-connections\-per\-endpoint\fR=\fIMAX_CONNECTIONS_PER_ENDPOINT\fR\ |\ \fB\-\-max\-connections\-per\-instance\fR=\fIMAX_CONNECTIONS_PER_INSTANCE\fR\ |\ \fB\-\-max\-rate\fR=\fIMAX_RATE\fR\ |\ \fB\-\-max\-rate\-per\-endpoint\fR=\fIMAX_RATE_PER_ENDPOINT\fR\ |\ \fB\-\-max\-rate\-per\-instance\fR=\fIMAX_RATE_PER_INSTANCE\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(BETA)\fR \fBgcloud beta compute backend\-services add\-backend\fR is used to
add a backend to a backend service. A backend is a group of tasks that can
handle requests sent to a backend service. Currently, the group of tasks can be
one or more Google Compute Engine virtual machine instances grouped together
using an instance group or network endpoint group.

Traffic is first spread evenly across all virtual machines or network endpoints
in the group. When the group is full, traffic is sent to the next nearest
group(s) that still have remaining capacity.

To modify the parameters of a backend after it has been added to the backend
service, use \f5gcloud compute backend\-services update\-backend\fR or \f5gcloud
compute backend\-services edit\fR.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fIBACKEND_SERVICE_NAME\fR
Name of the backend service to operate on.


.RE
.sp

.SH "REQUIRED FLAGS"

.RS 2m
.TP 2m

Exactly one of these must be specified:

.RS 2m
.TP 2m

Instance Group

.RS 2m
.TP 2m
\fB\-\-instance\-group\fR=\fIINSTANCE_GROUP\fR
Name of the instance group to add to the backend service. This flag must be
specified if any of the other arguments in this group are specified.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-instance\-group\-region\fR=\fIINSTANCE_GROUP_REGION\fR
Region of the instance group to add to the backend service. If not specified,
you may be prompted to select a region.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/region\fR\fR property:

.RS 2m
$ gcloud config set compute/region REGION
.RE

A list of regions can be fetched by running:

.RS 2m
$ gcloud compute regions list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/region
.RE

Alternatively, the region can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_REGION\fR\fR.

.TP 2m
\fB\-\-instance\-group\-zone\fR=\fIINSTANCE_GROUP_ZONE\fR
Zone of the instance group to add to the backend service. If not specified and
the \f5\fIcompute/zone\fR\fR property isn't set, you may be prompted to select a
zone.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/zone\fR\fR property:

.RS 2m
$ gcloud config set compute/zone ZONE
.RE

A list of zones can be fetched by running:

.RS 2m
$ gcloud compute zones list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/zone
.RE

Alternatively, the zone can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_ZONE\fR\fR.

.RE
.RE
.sp
.TP 2m

Network Endpoint Group

.RS 2m
.TP 2m
\fB\-\-network\-endpoint\-group\fR=\fINETWORK_ENDPOINT_GROUP\fR
Name of the network endpoint group to add to the backend service. This flag must
be specified if any of the other arguments in this group are specified.

.TP 2m
\fB\-\-network\-endpoint\-group\-zone\fR=\fINETWORK_ENDPOINT_GROUP_ZONE\fR
Zone of the network endpoint group to add to the backend service. If not
specified and the \f5\fIcompute/zone\fR\fR property isn't set, you may be
prompted to select a zone.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/zone\fR\fR property:

.RS 2m
$ gcloud config set compute/zone ZONE
.RE

A list of zones can be fetched by running:

.RS 2m
$ gcloud compute zones list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/zone
.RE

Alternatively, the zone can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_ZONE\fR\fR.


.RE
.RE
.RE
.sp

.SH "OPTIONAL FLAGS"

.RS 2m
.TP 2m
\fB\-\-balancing\-mode\fR=\fIBALANCING_MODE\fR
Defines the strategy for balancing load. \fIBALANCING_MODE\fR must be one of:

.RS 2m
.TP 2m
\fBCONNECTION\fR
Spreads load based on how many concurrent connections the backend can handle.
This balancing mode is only available to backend services that use SSL, TCP, or
UDP protocols. For backend services with \-\-load\-balancing\-scheme EXTERNAL,
you must specify exactly one of these additional parameters:
\f5\-\-max\-connections\fR, \f5\-\-max\-connections\-per\-instance\fR, or
\f5\-\-max\-connections\-per\-endpoint\fR. For backend services with
\-\-load\-balancing\-scheme INTERNAL, you must omit all of these parameters.
.TP 2m
\fBRATE\fR
Spreads load based on how many HTTP requests per second (RPS) the backend can
handle. This balancing mode is only available to backend services that use HTTP,
HTTPS, or HTTP/2 protocols. You must specify exactly one of these additional
parameters: \f5\-\-max\-rate\fR, \f5\-\-max\-rate\-per\-instance\fR,
or\f5\-\-max\-rate\-per\-endpoint\fR.
.TP 2m
\fBUTILIZATION\fR
Spreads load based on the CPU utilization of instances in a backend instance
group. This balancing mode is only available to backend services with
\-\-load\-balancing\-scheme EXTERNAL and instance group backends. There is no
restriction on the backend service protocol. The following additional parameters
may be specified: \f5\-\-max\-utilization\fR, \f5\-\-max\-rate\fR,
\f5\-\-max\-rate\-per\-instance\fR, \f5\-\-max\-connections\fR,
\f5\-\-max\-connections\-per\-instance\fR. For valid combinations, see
\f5\-\-max\-utilization\fR below.
.RE
.sp


.TP 2m
\fB\-\-capacity\-scaler\fR=\fICAPACITY_SCALER\fR
A setting that applies to all balancing modes. This value is multiplied by the
balancing mode value to set the current max usage of the instance group.
Acceptable values are \f50.0\fR (0%) through \f51.0\fR (100%). Setting this
value to \f50.0\fR (0%) drains the backend service. Note that draining a backend
service only prevents new connections to instances in the group. All existing
connections are allowed to continue until they close by normal means.

.TP 2m
\fB\-\-description\fR=\fIDESCRIPTION\fR
An optional, textual description for the backend.

.TP 2m
\fB\-\-max\-utilization\fR=\fIMAX_UTILIZATION\fR
Defines the maximum target for average CPU utilization of the backend instance
in the backend instance group. Acceptable values are 0.0 (0%) through 1.0
(100%). Available for all backend service protocols, with
\-\-balancing\-mode=UTILIZATION.

For backend services that use SSL, TCP, or UDP protocols, you may specify either
\f5\-\-max\-connections\fR or \f5\-\-max\-connections\-per\-instance\fR, either
by themselves or one in conjunction with \f5\-\-max\-utilization\fR. In other
words, the following configuration options are supported:
.RS 2m
.IP "\(em" 2m
no additional parameter
.IP "\(em" 2m
just \f5\-\-max\-utilization\fR
.IP "\(em" 2m
just \f5\-\-max\-connections\fR
.IP "\(em" 2m
just \f5\-\-max\-connections\-per\-instance\fR
.IP "\(em" 2m
both \f5\-\-max\-utilization\fR and \f5\-\-max\-connections\fR
.IP "\(em" 2m
both \f5\-\-max\-utilization\fR and \f5\-\-max\-connections\-per\-instance\fR

.RE
.RE
.sp
The meanings for \f5\-\-max\-connections\fR and
\f5\-\-max\-connections\-per\-instance\fR are the same as for
\-\-balancing\-mode=CONNECTION. If one is used in conjunction with
\f5\-\-max\-utilization\fR, instances are considered at capacity when either
maximum utilization or maximum connections is reached.

For backend services that use HTTP, HTTPS, or HTTP/2 protocols, you may specify
either \f5\-\-max\-rate\fR or \f5\-\-max\-rate\-per\-instance\fR, either by
themselves or one in conjunction with \f5\-\-max\-utilization\fR. In other
words, the following configuration options are supported:
.RS 2m
.IP "\(bu" 2m
no additional parameter
.IP "\(bu" 2m
just \f5\-\-max\-utilization\fR
.IP "\(bu" 2m
just \f5\-\-max\-rate\fR
.IP "\(bu" 2m
just \f5\-\-max\-rate\-per\-instance\fR
.IP "\(bu" 2m
both \f5\-\-max\-utilization\fR and \f5\-\-max\-rate\fR
.IP "\(bu" 2m
both \f5\-\-max\-utilization\fR and \f5\-\-max\-rate\-per\-instance\fR

.RE
.sp
The meanings for \f5\-\-max\-rate\fR and \f5\-\-max\-rate\-per\-instance\fR are
the same as for \-\-balancing\-mode=RATE. If one is used in conjunction with
\f5\-\-max\-utilization\fR, instances are considered at capacity when
\fBeither\fR maximum utilization or the maximum rate is reached.

.RS 2m
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-global\fR
If set, the backend service is global.

.TP 2m
\fB\-\-region\fR=\fIREGION\fR
Region of the backend service to operate on. Overrides the default
\fBcompute/region\fR property value for this command invocation.

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-max\-connections\fR=\fIMAX_CONNECTIONS\fR
Maximum concurrent connections that the backend can handle. Valid for instance
group and network endpoint group backends.

.TP 2m
\fB\-\-max\-connections\-per\-endpoint\fR=\fIMAX_CONNECTIONS_PER_ENDPOINT\fR
Only valid for network endpoint group backends. Defines a maximum number of
connections per endpoint if all endpoints are healthy. When one or more
endpoints are unhealthy, an effective maximum number of connections per healthy
endpoint is calculated by multiplying MAX_CONNECTIONS_PER_ENDPOINT by the number
of endpoints in the network endpoint group, then dividing by the number of
healthy endpoints.

.TP 2m
\fB\-\-max\-connections\-per\-instance\fR=\fIMAX_CONNECTIONS_PER_INSTANCE\fR
Only valid for instance group backends. Defines a maximum number of concurrent
connections per instance if all instances in the instance group are healthy.
When one or more instances are unhealthy, an effective maximum number of
connections per healthy instance is calculated by multiplying
MAX_CONNECTIONS_PER_INSTANCE by the number of instances in the instance group,
then dividing by the number of healthy instances.

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-max\-rate\fR=\fIMAX_RATE\fR
Maximum number of HTTP requests per second (RPS) that the backend can handle.
Valid for instance group and network endpoint group backends. Must not be
defined if the backend is a managed instance group using autoscaling based on
load balancing.

.TP 2m
\fB\-\-max\-rate\-per\-endpoint\fR=\fIMAX_RATE_PER_ENDPOINT\fR
Only valid for network endpoint group backends. Defines a maximum number of HTTP
requests per second (RPS) per endpoint if all endpoints are healthy. When one or
more endpoints are unhealthy, an effective maximum rate per healthy endpoint is
calculated by multiplying MAX_RATE_PER_ENDPOINT by the number of endpoints in
the network endpoint group, then dividing by the number of healthy endpoints.

.TP 2m
\fB\-\-max\-rate\-per\-instance\fR=\fIMAX_RATE_PER_INSTANCE\fR
Only valid for instance group backends. Defines a maximum number of HTTP
requests per second (RPS) per instance if all instances in the instance group
are healthy. When one or more instances are unhealthy, an effective maximum RPS
per healthy instance is calculated by multiplying MAX_RATE_PER_INSTANCE by the
number of instances in the instance group, then dividing by the number of
healthy instances. This parameter is compatible with managed instance group
backends that use autoscaling based on load balancing.


.RE
.RE
.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-configuration,
\-\-flags\-file, \-\-flatten, \-\-format, \-\-help, \-\-log\-http, \-\-project,
\-\-quiet, \-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity. Run \fB$
gcloud help\fR for details.



.SH "NOTES"

This command is currently in BETA and may change without notice. These variants
are also available:

.RS 2m
$ gcloud compute backend\-services add\-backend
$ gcloud alpha compute backend\-services add\-backend
.RE



.TH "GCLOUD_BETA_COMPUTE_ROUTERS_NATS_UPDATE" 1



.SH "NAME"
.HP
gcloud beta compute routers nats update \- update a NAT on a Compute Engine router



.SH "SYNOPSIS"
.HP
\f5gcloud beta compute routers nats update\fR \fINAME\fR \fB\-\-router\fR=\fIROUTER\fR [\fB\-\-async\fR] [\fB\-\-enable\-logging\fR] [\fB\-\-log\-filter\fR=\fILOG_FILTER\fR] [\fB\-\-region\fR=\fIREGION\fR] [\fB\-\-auto\-allocate\-nat\-external\-ips\fR\ |\ \fB\-\-nat\-external\-ip\-pool\fR=\fIIP_ADDRESS\fR,[\fIIP_ADDRESS\fR,...]] [\fB\-\-clear\-icmp\-idle\-timeout\fR\ |\ \fB\-\-icmp\-idle\-timeout\fR=\fIICMP_IDLE_TIMEOUT\fR] [\fB\-\-clear\-min\-ports\-per\-vm\fR\ |\ \fB\-\-min\-ports\-per\-vm\fR=\fIMIN_PORTS_PER_VM\fR] [\fB\-\-clear\-nat\-external\-drain\-ip\-pool\fR\ |\ \fB\-\-nat\-external\-drain\-ip\-pool\fR=\fINAT_EXTERNAL_DRAIN_IP_POOL\fR,[...]] [\fB\-\-clear\-tcp\-established\-idle\-timeout\fR\ |\ \fB\-\-tcp\-established\-idle\-timeout\fR=\fITCP_ESTABLISHED_IDLE_TIMEOUT\fR] [\fB\-\-clear\-tcp\-transitory\-idle\-timeout\fR\ |\ \fB\-\-tcp\-transitory\-idle\-timeout\fR=\fITCP_TRANSITORY_IDLE_TIMEOUT\fR] [\fB\-\-clear\-udp\-idle\-timeout\fR\ |\ \fB\-\-udp\-idle\-timeout\fR=\fIUDP_IDLE_TIMEOUT\fR] [\fB\-\-nat\-all\-subnet\-ip\-ranges\fR\ |\ \fB\-\-nat\-custom\-subnet\-ip\-ranges\fR=\fISUBNETWORK\fR[:\fIRANGE_NAME\fR],[...]\ |\ \fB\-\-nat\-primary\-subnet\-ip\-ranges\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(BETA)\fR \fBgcloud beta compute routers nats update\fR is used to update a
NAT in a Compute Engine router.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fINAME\fR
Name of the NAT to create


.RE
.sp

.SH "REQUIRED FLAGS"

.RS 2m
.TP 2m
\fB\-\-router\fR=\fIROUTER\fR
The Router to use for NAT.


.RE
.sp

.SH "OPTIONAL FLAGS"

.RS 2m
.TP 2m
\fB\-\-async\fR
Return immediately, without waiting for the operation in progress to complete.

.TP 2m
\fB\-\-enable\-logging\fR
Enable logging for the NAT. Logs will be exported to Stackdriver. NAT logging is
disabled by default. To disable logging for the NAT, use $ gcloud beta compute
routers nats update MY\-NAT \e \-\-no\-enable\-logging \-\-router ROUTER
\-\-region REGION

.TP 2m
\fB\-\-log\-filter\fR=\fILOG_FILTER\fR
Filter for logs exported to stackdriver.

The default is ALL.

If logging is not enabled, filter settings will be persisted but will have no
effect.

Use \-\-[no\-]enable\-logging to enable and disable logging.

\fILOG_FILTER\fR must be one of:

.RS 2m
.TP 2m
\fBALL\fR
Export logs for all connections handled by this NAT.
.TP 2m
\fBERRORS_ONLY\fR
Export logs for connection failures only.
.TP 2m
\fBTRANSLATIONS_ONLY\fR
Export logs for successful connections only.
.RE
.sp


.TP 2m
\fB\-\-region\fR=\fIREGION\fR
Region of the NAT to create. If not specified, you may be prompted to select a
region.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/region\fR\fR property:

.RS 2m
$ gcloud config set compute/region REGION
.RE

A list of regions can be fetched by running:

.RS 2m
$ gcloud compute regions list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/region
.RE

Alternatively, the region can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_REGION\fR\fR.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-auto\-allocate\-nat\-external\-ips\fR
Automatically allocate external IP addresses for Cloud NAT

.TP 2m
\fB\-\-nat\-external\-ip\-pool\fR=\fIIP_ADDRESS\fR,[\fIIP_ADDRESS\fR,...]
External IP Addresses to use for NAT

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-clear\-icmp\-idle\-timeout\fR
Clear timeout for ICMP connections

.TP 2m
\fB\-\-icmp\-idle\-timeout\fR=\fIICMP_IDLE_TIMEOUT\fR
Timeout for ICMP connections. See $ gcloud topic datetimes for information on
duration formats.

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-clear\-min\-ports\-per\-vm\fR
Clear minimum ports to be allocated to a VM

.TP 2m
\fB\-\-min\-ports\-per\-vm\fR=\fIMIN_PORTS_PER_VM\fR
Minimum ports to be allocated to a VM

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-clear\-nat\-external\-drain\-ip\-pool\fR
Clear the drained NAT IPs

.TP 2m
\fB\-\-nat\-external\-drain\-ip\-pool\fR=\fINAT_EXTERNAL_DRAIN_IP_POOL\fR,[...]
External IP Addresses to be drained

These IPs must be valid external IPs that have been used as NAT IPs

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-clear\-tcp\-established\-idle\-timeout\fR
Clear timeout for TCP established connections

.TP 2m
\fB\-\-tcp\-established\-idle\-timeout\fR=\fITCP_ESTABLISHED_IDLE_TIMEOUT\fR
Timeout for TCP established connections. See $ gcloud topic datetimes for
information on duration formats.

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-clear\-tcp\-transitory\-idle\-timeout\fR
Clear timeout for TCP transitory connections

.TP 2m
\fB\-\-tcp\-transitory\-idle\-timeout\fR=\fITCP_TRANSITORY_IDLE_TIMEOUT\fR
Timeout for TCP transitory connections. See $ gcloud topic datetimes for
information on duration formats.

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-clear\-udp\-idle\-timeout\fR
Clear timeout for UDP connections

.TP 2m
\fB\-\-udp\-idle\-timeout\fR=\fIUDP_IDLE_TIMEOUT\fR
Timeout for UDP connections. See $ gcloud topic datetimes for information on
duration formats.

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-nat\-all\-subnet\-ip\-ranges\fR
Allow all IP ranges of all subnetworks in the region, including primary and
secondary ranges, to use NAT.

.TP 2m
\fB\-\-nat\-custom\-subnet\-ip\-ranges\fR=\fISUBNETWORK\fR[:\fIRANGE_NAME\fR],[...]
List of subnetwork primary and secondary IP ranges to be allowed to use NAT.
[SUBNETWORK]: including a subnetwork name includes only the primary subnet range
of the subnetwork. [SUBNETWORK]:[RANGE_NAME]: specifying a subnetwork and
secondary range name includes only that secondary range.It does not include the
primary range of the subnet.

.TP 2m
\fB\-\-nat\-primary\-subnet\-ip\-ranges\fR
Allow only primary IP ranges of all subnetworks in the region to use NAT.


.RE
.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity.

Run \fB$ gcloud help\fR for details.



.SH "EXAMPLES"

Change subnetworks and IP address resources associated with NAT:

.RS 2m
$ gcloud beta compute routers nats update nat1 \-\-router=my\-router
  \-\-nat\-external\-ip\-pool=ip\-address2,ip\-address3
  \-\-nat\-custom\-subnet\-ip\-ranges=subnet\-2,subnet\-3:secondary\-range\-2
.RE

Change minimum default ports allocated per VM associated with NAT:

.RS 2m
$ gcloud beta compute routers nats update nat1 \-\-router=my\-router \e
    \-\-min\-ports\-per\-vm=128
.RE

Change connection timeouts associated with NAT:

.RS 2m
$ gcloud beta compute routers nats update nat1 \-\-router=my\-router
  \-\-udp\-mapping\-idle\-timeout=60s
  \-\-icmp\-mapping\-idle\-timeout=60s
  \-\-tcp\-established\-connection\-idle\-timeout=60s
  \-\-tcp\-transitory\-connection\-idle\-timeout=60s
.RE

Reset connection timeouts associated NAT to default values:

.RS 2m
$ gcloud beta compute routers nats update nat1 \-\-router=my\-router
  \-\-clear\-udp\-mapping\-idle\-timeout \-\-clear\-icmp\-mapping\-idle\-timeout
  \-\-clear\-tcp\-established\-connection\-idle\-timeout
  \-\-clear\-tcp\-transitory\-connection\-idle\-timeout
.RE



.SH "NOTES"

This command is currently in BETA and may change without notice. These variants
are also available:

.RS 2m
$ gcloud compute routers nats update
$ gcloud alpha compute routers nats update
.RE


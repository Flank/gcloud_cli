
.TH "GCLOUD_ALPHA_APIGEE_PRODUCTS_UPDATE" 1



.SH "NAME"
.HP
gcloud alpha apigee products update \- update an existing Apigee API product



.SH "SYNOPSIS"
.HP
\f5gcloud alpha apigee products update\fR (\fIPRODUCT\fR\ :\ \fB\-\-organization\fR=\fIORGANIZATION\fR) [\fB\-\-display\-name\fR=\fISET_DISPLAYNAME\fR] [\fB\-\-all\-apis\fR\ |\ \fB\-\-add\-api\fR=[\fIAPI\fR,...]\ \fB\-\-remove\-api\fR=[\fIAPI\fR,...]] [\fB\-\-all\-environments\fR\ |\ \fB\-\-add\-environment\fR=[\fIENVIRONMENT\fR,...]\ \fB\-\-remove\-environment\fR=[\fIENVIRONMENT\fR,...]] [\fB\-\-all\-resources\fR\ |\ \fB\-\-add\-resource\fR=[\fIRESOURCE\fR#...]\ \fB\-\-remove\-resource\fR=[\fIRESOURCE\fR#...]] [\fB\-\-automatic\-approval\fR\ |\ \fB\-\-manual\-approval\fR] [\fB\-\-clear\-attributes\fR\ |\ \fB\-\-add\-attribute\fR=[\fINAME\fR=\fIVALUE\fR,...]\ \fB\-\-remove\-attribute\fR=[\fINAME\fR,...]] [\fB\-\-clear\-description\fR\ |\ \fB\-\-description\fR=\fISET_DESCRIPTION\fR] [\fB\-\-clear\-oauth\-scopes\fR\ |\ \fB\-\-add\-oauth\-scope\fR=[\fIOAUTH\-SCOPE\fR,...]\ \fB\-\-remove\-oauth\-scope\fR=[\fIOAUTH\-SCOPE\fR,...]] [\fB\-\-clear\-quota\fR\ |\ \fB\-\-quota\fR=\fIQUOTA\fR\ \fB\-\-quota\-interval\fR=\fIQUOTA_INTERVAL\fR\ \fB\-\-quota\-unit\fR=\fIQUOTA_UNIT\fR] [\fB\-\-internal\-access\fR\ |\ \fB\-\-private\-access\fR\ |\ \fB\-\-public\-access\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(ALPHA)\fR Update an existing Apigee API product.

\f5gcloud alpha apigee products update\fR applies a set of modifications to an
existing API product.

To create a new API product, run:

.RS 2m
$ gcloud alpha apigee products create
.RE



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m

API product resource \- API product to be updated. To get a list of available
API products, run:

$ gcloud alpha apigee products list

The arguments in this group can be used to specify the attributes of this
resource. This must be specified.


.RS 2m
.TP 2m
\fIPRODUCT\fR
ID of the API product or fully qualified identifier for the API product. This
positional must be specified if any of the other arguments in this group are
specified.

.TP 2m
\fB\-\-organization\fR=\fIORGANIZATION\fR
Apigee organization containing the API product. If unspecified, the Cloud
Platform project's associated organization will be used.


.RE
.RE
.sp

.SH "FLAGS"

.RS 2m
.TP 2m
\fB\-\-display\-name\fR=\fISET_DISPLAYNAME\fR
Name to be displayed in the UI or developer portal to developers registering for
API access.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-all\-apis\fR
Include all deployed API proxies in the product, so long as they match the other
parameters.

.TP 2m

API proxies to which this API product is bound. Only those API proxies will be
accessible through the API product.

.RE
.RE
.sp
The API proxy names must already be deployed to the bound environments, or
creation of the API product will fail. To get a list of deployed API proxies,
run:

.RS 2m
$ gcloud alpha apigee deployments list
.RE

To deploy an API proxy, run:

.RS 2m
$ gcloud alpha apigee apis deploy.
.RE


.RS 2m
.TP 2m
\fB\-\-add\-api\fR=[\fIAPI\fR,...]
Adds a new API to the set of APIs.

.RS 2m
.TP 2m
\fB\-\-remove\-api\fR=[\fIAPI\fR,...]
Removes an existing API from the set of APIs.

.RE
.sp
.TP 2m

At most one of these may be specified:


.RS 2m
.TP 2m
\fB\-\-all\-environments\fR
Make all environments accessible through this API product.

.TP 2m

Environments to which the API product is bound. Requests to environments that
are not listed are rejected, preventing developers from accessing those
resources even if they can access the same API proxies in another environment.
For example, this can be used to prevent applications with access to production
APIs from accessing the alpha or beta versions of those APIs.

.RE
.RE
.sp
To get a list of available environments, run:

.RS 2m
$ gcloud alpha apigee environments list
.RE


.RS 2m
.TP 2m
\fB\-\-add\-environment\fR=[\fIENVIRONMENT\fR,...]
Adds a new environment to the set of environments.

.RS 2m
.TP 2m
\fB\-\-remove\-environment\fR=[\fIENVIRONMENT\fR,...]
Removes an existing environment from the set of environments.

.RE
.sp
.TP 2m

At most one of these may be specified:


.RS 2m
.TP 2m
\fB\-\-all\-resources\fR
Include all deployed API resources in the product, so long as they match the
other parameters.

.TP 2m

API resources to be bundled in the API product. By default, the resource paths
are mapped from the \f5proxy.pathsuffix\fR variable.

.RE
.RE
.sp
The proxy path suffix is defined as the URI fragment following the ProxyEndpoint
base path. For example, if \f5\fI/forecastrss\fR\fR is given as an element of
this list, and the base path defined for the API proxy is \f5/weather\fR, then
only requests to \f5/weather/forecastrss\fR are permitted by the API product.

Proxy paths can use asterisks as wildcards; \f5/**\fR indicates that all
sub\-URIs are included, whereas a single asterisk indicates that only URIs one
level down are included.

By default, \f5/\fR supports the same resources as \f5/**\fR as well as the base
path defined by the API proxy.

For example, if the base path of the API proxy is \f5/v1/weatherapikey\fR, then
the API product supports requests to \f5/v1/weatherapikey\fR and to any
sub\-URIs, such as \f5/v1/weatherapikey/forecastrss\fR,
\f5/v1/weatherapikey/region/CA\fR, and so on.

The API proxy resources must already be deployed to the bound environments, or
creation of the API product will fail.


.RS 2m
.TP 2m
\fB\-\-add\-resource\fR=[\fIRESOURCE\fR#...]
Adds a new resource to the set of resources.

.RS 2m
.TP 2m
\fB\-\-remove\-resource\fR=[\fIRESOURCE\fR#...]
Removes an existing resource from the set of resources.

.RE
.sp
.TP 2m

At most one of these may be specified:


.RS 2m
.TP 2m
\fB\-\-automatic\-approval\fR
Allow developers to generate approved consumer keys without waiting for
approval.

.TP 2m
\fB\-\-manual\-approval\fR
Require manual approval of developer requests to access this API product before
their consumer keys can be used.

.RE
.sp
.TP 2m

At most one of these may be specified:


.RS 2m
.TP 2m
\fB\-\-clear\-attributes\fR
Removes all attributes.

.TP 2m

Key\-value attribute pairs that may be used to extend the default API product
profile with customer\-specific metadata. Up to 17 attributes can be specified.

.RS 2m
.TP 2m
\fB\-\-add\-attribute\fR=[\fINAME\fR=\fIVALUE\fR,...]
Adds a new attribute to the set of attributes.

.TP 2m
\fB\-\-remove\-attribute\fR=[\fINAME\fR,...]
Removes an existing attribute from the set of attributes.

.RE
.RE
.sp
.TP 2m

At most one of these may be specified:


.RS 2m
.TP 2m
\fB\-\-clear\-description\fR
Remove the API product's description.

.TP 2m
\fB\-\-description\fR=\fISET_DESCRIPTION\fR
Overview of the API product. Include key information about the API product that
is not captured by other fields.

.RE
.sp
.TP 2m

At most one of these may be specified:


.RS 2m
.TP 2m
\fB\-\-clear\-oauth\-scopes\fR
Removes all OAuth scopes.

.TP 2m

Comma\-separated list of OAuth scopes that are validated at runtime. Apigee
validates that the scopes in any access token presented match the scopes defined
in the OAuth policy assoicated with the API product.

.RS 2m
.TP 2m
\fB\-\-add\-oauth\-scope\fR=[\fIOAUTH\-SCOPE\fR,...]
Adds a new OAuth scope to the set of OAuth scopes.

.TP 2m
\fB\-\-remove\-oauth\-scope\fR=[\fIOAUTH\-SCOPE\fR,...]
Removes an existing OAuth scope from the set of OAuth scopes.

.RE
.RE
.sp
.TP 2m

At most one of these may be specified:


.RS 2m
.TP 2m
\fB\-\-clear\-quota\fR
Remove any quota currently imposed on the API product.

.TP 2m

To impose a quota limit on calls to the API product, specify all of the
following:

.RS 2m
.TP 2m
\fB\-\-quota\fR=\fIQUOTA\fR
Number of request messages permitted per app by this API product for the
specified \f5\-\-quota\-interval\fR and \f5\-\-quota\-unit\fR.

For example, \f5\-\-quota=50\fR, \f5\-\-quota\-interval=12\fR, and
\f5\-\-quota\-unit=hour\fR means 50 requests are allowed every 12 hours.

.TP 2m
\fB\-\-quota\-interval\fR=\fIQUOTA_INTERVAL\fR
Time interval over which the number of request messages is calculated.

.TP 2m
\fB\-\-quota\-unit\fR=\fIQUOTA_UNIT\fR
Time unit for \f5\-\-quota\-interval\fR. \fIQUOTA_UNIT\fR must be one of:
\fBminute\fR, \fBhour\fR, \fBday\fR, \fBmonth\fR.

.RE
.RE
.sp
.TP 2m

At most one of these may be specified:


.RS 2m
.TP 2m
\fB\-\-internal\-access\fR
Prevent external access to this API product.

.TP 2m
\fB\-\-private\-access\fR
Hide this API product in the developer portal but make it accessible by external
developers.

.TP 2m
\fB\-\-public\-access\fR
Make this API product visible to developers in the Apigee developer portal.


.RE
.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity.

Run \fB$ gcloud help\fR for details.



.SH "EXAMPLES"

To update the display name of the API product with the internal name
\f5\fImy\-prod\fR\fR, run:

.RS 2m
$ gcloud alpha apigee products update my\-prod \e
  \-\-display\-name="Example Project"
.RE

To update the description of the API product, run:

.RS 2m
$ gcloud alpha apigee products update my\-prod \e
  \-\-description="This API is famous for appearing in a YouTube\e
video."
.RE

To remove the API product's description, run:

.RS 2m
$ gcloud alpha apigee products update my\-prod \-\-clear\-description
.RE

To remove manual approval requirements from the API and change its access level
to public, run:

.RS 2m
$ gcloud alpha apigee products update my\-prod \-\-public\-access \e
  \-\-automatic\-approval
.RE

To impose a quota of 45 calls per minute per application on the API product,
run:

.RS 2m
$ gcloud alpha apigee products update my\-prod \-\-quota=45 \e
  \-\-quota\-interval=1 \-\-quota\-unit=minute
.RE

To remove a quota on the API product and switch it to unlisted access with
manual approval, run:

.RS 2m
$ gcloud alpha apigee products update my\-prod \-\-manual\-approval \e
  \-\-private\-access \-\-clear\-quota
.RE

To set the API product's custom attribute \f5\fIfoo\fR\fR to the value
\f5\fIbar\fR\fR, updating that attribute if it exists and creating it if it
doesn't, and remove the attribute \f5\fIbaz\fR\fR if it exists, run:

.RS 2m
$ gcloud alpha apigee products update my\-prod \e
  \-\-add\-attribute="foo=bar"  \-\-remove\-attribute=baz
.RE

To update the list of API proxies included in the API product, run:

.RS 2m
$ gcloud alpha apigee products update my\-prod \e
  \-\-add\-api=NEW_ONE,NEW_TWO \-\-remove\-api=OLD_ONE,OLD_TWO
.RE

To switch the API product to including all \f5\fItest\fR\fR environment APIs no
matter what API proxy or resource they expose, run:

.RS 2m
$ gcloud alpha apigee products update my\-prod \e
  \-\-add\-environment=test \-\-all\-apis \-\-all\-resources
.RE

To update the list of API resources included in the API product, and output the
updated API product as a JSON object, run:

.RS 2m
$ gcloud alpha apigee products update my\-prod \e
  \-\-add\-resource="NEW_ONE#NEW_TWO" \e
  \-\-remove\-resource="OLD_ONE#OLD_TWO" \-\-format=json
.RE



.SH "NOTES"

This command is currently in ALPHA and may change without notice. If this
command fails with API permission errors despite specifying the right project,
you may be trying to access an API with an invitation\-only early access
allowlist.


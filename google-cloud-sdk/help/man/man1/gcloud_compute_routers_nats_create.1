
.TH "GCLOUD_COMPUTE_ROUTERS_NATS_CREATE" 1



.SH "NAME"
.HP
gcloud compute routers nats create \- add a NAT to a Compute Engine router



.SH "SYNOPSIS"
.HP
\f5gcloud compute routers nats create\fR \fINAME\fR \fB\-\-router\fR=\fIROUTER\fR (\fB\-\-auto\-allocate\-nat\-external\-ips\fR\ |\ \fB\-\-nat\-external\-ip\-pool\fR=\fIIP_ADDRESS\fR,[\fIIP_ADDRESS\fR,...]) (\fB\-\-nat\-all\-subnet\-ip\-ranges\fR\ |\ \fB\-\-nat\-custom\-subnet\-ip\-ranges\fR=\fISUBNETWORK\fR[:\fIRANGE_NAME\fR],[...]\ |\ \fB\-\-nat\-primary\-subnet\-ip\-ranges\fR) [\fB\-\-async\fR] [\fB\-\-enable\-logging\fR] [\fB\-\-icmp\-idle\-timeout\fR=\fIICMP_IDLE_TIMEOUT\fR] [\fB\-\-log\-filter\fR=\fILOG_FILTER\fR] [\fB\-\-min\-ports\-per\-vm\fR=\fIMIN_PORTS_PER_VM\fR] [\fB\-\-region\fR=\fIREGION\fR] [\fB\-\-tcp\-established\-idle\-timeout\fR=\fITCP_ESTABLISHED_IDLE_TIMEOUT\fR] [\fB\-\-tcp\-transitory\-idle\-timeout\fR=\fITCP_TRANSITORY_IDLE_TIMEOUT\fR] [\fB\-\-udp\-idle\-timeout\fR=\fIUDP_IDLE_TIMEOUT\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fBgcloud compute routers nats create\fR is used to create a NAT on a Compute
Engine router.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fINAME\fR
Name of the NAT to create


.RE
.sp

.SH "REQUIRED FLAGS"

.RS 2m
.TP 2m
\fB\-\-router\fR=\fIROUTER\fR
The Router to use for NAT.

.TP 2m

Exactly one of these must be specified:

.RS 2m
.TP 2m
\fB\-\-auto\-allocate\-nat\-external\-ips\fR
Automatically allocate external IP addresses for Cloud NAT

.TP 2m
\fB\-\-nat\-external\-ip\-pool\fR=\fIIP_ADDRESS\fR,[\fIIP_ADDRESS\fR,...]
External IP Addresses to use for NAT

.RE
.sp
.TP 2m

Exactly one of these must be specified:

.RS 2m
.TP 2m
\fB\-\-nat\-all\-subnet\-ip\-ranges\fR
Allow all IP ranges of all subnetworks in the region, including primary and
secondary ranges, to use NAT.

.TP 2m
\fB\-\-nat\-custom\-subnet\-ip\-ranges\fR=\fISUBNETWORK\fR[:\fIRANGE_NAME\fR],[...]
List of subnetwork primary and secondary IP ranges to be allowed to use NAT.
[SUBNETWORK]: including a subnetwork name includes only the primary subnet range
of the subnetwork. [SUBNETWORK]:[RANGE_NAME]: specifying a subnetwork and
secondary range name includes only that secondary range.It does not include the
primary range of the subnet.

.TP 2m
\fB\-\-nat\-primary\-subnet\-ip\-ranges\fR
Allow only primary IP ranges of all subnetworks in the region to use NAT.


.RE
.RE
.sp

.SH "OPTIONAL FLAGS"

.RS 2m
.TP 2m
\fB\-\-async\fR
Return immediately, without waiting for the operation in progress to complete.

.TP 2m
\fB\-\-enable\-logging\fR
Enable logging for the NAT. Logs will be exported to Stackdriver. NAT logging is
disabled by default. To disable logging for the NAT, use $ gcloud compute
routers nats update MY\-NAT \-\-no\-enable\-logging \e \-\-router ROUTER
\-\-region REGION

.TP 2m
\fB\-\-icmp\-idle\-timeout\fR=\fIICMP_IDLE_TIMEOUT\fR
Timeout for ICMP connections. See $ gcloud topic datetimes for information on
duration formats.

.TP 2m
\fB\-\-log\-filter\fR=\fILOG_FILTER\fR
Filter for logs exported to stackdriver.

The default is ALL.

If logging is not enabled, filter settings will be persisted but will have no
effect.

Use \-\-[no\-]enable\-logging to enable and disable logging.

\fILOG_FILTER\fR must be one of:

.RS 2m
.TP 2m
\fBALL\fR
Export logs for all connections handled by this NAT.
.TP 2m
\fBERRORS_ONLY\fR
Export logs for connection failures only.
.TP 2m
\fBTRANSLATIONS_ONLY\fR
Export logs for successful connections only.
.RE
.sp


.TP 2m
\fB\-\-min\-ports\-per\-vm\fR=\fIMIN_PORTS_PER_VM\fR
Minimum ports to be allocated to a VM

.TP 2m
\fB\-\-region\fR=\fIREGION\fR
Region of the NAT to create. If not specified, you may be prompted to select a
region.

To avoid prompting when this flag is omitted, you can set the
\f5\fIcompute/region\fR\fR property:

.RS 2m
$ gcloud config set compute/region REGION
.RE

A list of regions can be fetched by running:

.RS 2m
$ gcloud compute regions list
.RE

To unset the property, run:

.RS 2m
$ gcloud config unset compute/region
.RE

Alternatively, the region can be stored in the environment variable
\f5\fICLOUDSDK_COMPUTE_REGION\fR\fR.

.TP 2m
\fB\-\-tcp\-established\-idle\-timeout\fR=\fITCP_ESTABLISHED_IDLE_TIMEOUT\fR
Timeout for TCP established connections. See $ gcloud topic datetimes for
information on duration formats.

.TP 2m
\fB\-\-tcp\-transitory\-idle\-timeout\fR=\fITCP_TRANSITORY_IDLE_TIMEOUT\fR
Timeout for TCP transitory connections. See $ gcloud topic datetimes for
information on duration formats.

.TP 2m
\fB\-\-udp\-idle\-timeout\fR=\fIUDP_IDLE_TIMEOUT\fR
Timeout for UDP connections. See $ gcloud topic datetimes for information on
duration formats.


.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-billing\-project,
\-\-configuration, \-\-flags\-file, \-\-flatten, \-\-format, \-\-help,
\-\-impersonate\-service\-account, \-\-log\-http, \-\-project, \-\-quiet,
\-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity.

Run \fB$ gcloud help\fR for details.



.SH "EXAMPLES"

Auto\-allocate NAT for all IP addresses of all subnets in the region:

.RS 2m
$ gcloud compute routers nats create nat1 \-\-router=my\-router
  \-\-auto\-allocate\-nat\-external\-ips \-\-nat\-all\-subnet\-ip\-ranges
.RE

Specify IP addresses for NAT: Each IP address is the name of a reserved static
IP address resource in the same region.

.RS 2m
$ gcloud compute routers nats create nat1 \-\-router=my\-router
  \-\-nat\-external\-ip\-pool=ip\-address1,ip\-address2
.RE

Specify subnet ranges for NAT:

By default, NAT works for all primary and secondary IP ranges for all subnets in
the region for the given VPC network. You can restrict which subnet primary and
secondary ranges can use NAT.

.RS 2m
$ gcloud compute routers nats create nat1 \-\-router=my\-router
  \-\-auto\-allocate\-nat\-external\-ips
  \-\-nat\-custom\-subnet\-ip\-ranges=subnet\-1,subnet\-3:secondary\-range\-1
.RE



.SH "NOTES"

These variants are also available:

.RS 2m
$ gcloud alpha compute routers nats create
$ gcloud beta compute routers nats create
.RE


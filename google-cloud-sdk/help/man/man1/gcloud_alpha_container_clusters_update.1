
.TH "GCLOUD_ALPHA_CONTAINER_CLUSTERS_UPDATE" 1



.SH "NAME"
.HP
gcloud alpha container clusters update \- update cluster settings for an existing container cluster



.SH "SYNOPSIS"
.HP
\f5gcloud alpha container clusters update\fR \fINAME\fR (\fB\-\-complete\-credential\-rotation\fR\ |\ \fB\-\-complete\-ip\-rotation\fR\ |\ \fB\-\-enable\-autoscaling\fR\ |\ \fB\-\-enable\-binauthz\fR\ |\ \fB\-\-enable\-legacy\-authorization\fR\ |\ \fB\-\-enable\-master\-authorized\-networks\fR\ |\ \fB\-\-enable\-network\-policy\fR\ |\ \fB\-\-enable\-pod\-security\-policy\fR\ |\ \fB\-\-enable\-vertical\-pod\-autoscaling\fR\ |\ \fB\-\-generate\-password\fR\ |\ \fB\-\-maintenance\-window\fR=\fIMAINTENANCE_WINDOW\fR\ |\ \fB\-\-remove\-labels\fR=[\fIKEY\fR,...]\ |\ \fB\-\-security\-profile\fR=\fISECURITY_PROFILE\fR\ |\ \fB\-\-set\-password\fR\ |\ \fB\-\-start\-credential\-rotation\fR\ |\ \fB\-\-start\-ip\-rotation\fR\ |\ \fB\-\-update\-addons\fR=[\fIADDON\fR=\fIENABLED\fR|\fIDISABLED\fR,...]\ |\ \fB\-\-update\-labels\fR=[\fIKEY\fR=\fIVALUE\fR,...]\ |\ \fB\-\-additional\-zones\fR=[\fIZONE\fR,...]\ |\ \fB\-\-node\-locations\fR=\fIZONE\fR,[\fIZONE\fR,...]\ |\ \fB\-\-clear\-resource\-usage\-bigquery\-dataset\fR\ |\ \fB\-\-enable\-network\-egress\-metering\fR\ \fB\-\-resource\-usage\-bigquery\-dataset\fR=\fIRESOURCE_USAGE_BIGQUERY_DATASET\fR\ |\ [\fB\-\-enable\-autoprovisioning\fR\ :\ \fB\-\-autoprovisioning\-config\-file\fR=\fIAUTOPROVISIONING_CONFIG_FILE\fR\ |\ [\fB\-\-max\-cpu\fR=\fIMAX_CPU\fR\ \fB\-\-max\-memory\fR=\fIMAX_MEMORY\fR\ :\ \fB\-\-min\-cpu\fR=\fIMIN_CPU\fR\ \fB\-\-min\-memory\fR=\fIMIN_MEMORY\fR\ [\fB\-\-max\-accelerator\fR=[\fItype\fR=\fITYPE\fR,\fIcount\fR=\fICOUNT\fR,...]\ :\ \fB\-\-min\-accelerator\fR=[\fItype\fR=\fITYPE\fR,\fIcount\fR=\fICOUNT\fR,...]]]]\ |\ \fB\-\-logging\-service\fR=\fILOGGING_SERVICE\fR\ \fB\-\-monitoring\-service\fR=\fIMONITORING_SERVICE\fR\ |\ \fB\-\-password\fR=\fIPASSWORD\fR\ \fB\-\-enable\-basic\-auth\fR\ |\ \fB\-\-username\fR=\fIUSERNAME\fR,\ \fB\-u\fR\ \fIUSERNAME\fR) [\fB\-\-async\fR] [\fB\-\-istio\-config\fR=[\fIauth\fR=\fIMTLS_PERMISSIVE\fR,...]] [\fB\-\-master\-authorized\-networks\fR=\fINETWORK\fR,[\fINETWORK\fR,...]] [\fB\-\-node\-pool\fR=\fINODE_POOL\fR] [\fB\-\-max\-nodes\fR=\fIMAX_NODES\fR\ \fB\-\-min\-nodes\fR=\fIMIN_NODES\fR] [\fB\-\-region\fR=\fIREGION\fR\ |\ \fB\-\-zone\fR=\fIZONE\fR,\ \fB\-z\fR\ \fIZONE\fR] [\fIGCLOUD_WIDE_FLAG\ ...\fR]



.SH "DESCRIPTION"

\fB(ALPHA)\fR Update cluster settings for an existing container cluster.



.SH "POSITIONAL ARGUMENTS"

.RS 2m
.TP 2m
\fINAME\fR
The name of the cluster to update.


.RE
.sp

.SH "REQUIRED FLAGS"

.RS 2m
.TP 2m

Exactly one of these must be specified:

.RS 2m
.TP 2m
\fB\-\-complete\-credential\-rotation\fR
Complete the IP and credential rotation for this cluster. For example:

.RS 2m
$ gcloud alpha container clusters update example\-cluster \e
    \-\-complete\-credential\-rotation
.RE

This causes the cluster to stop serving its old IP, return to a single IP, and
invalidate old credentials.

.TP 2m
\fB\-\-complete\-ip\-rotation\fR
Complete the IP rotation for this cluster. For example:

.RS 2m
$ gcloud alpha container clusters update example\-cluster \e
    \-\-complete\-ip\-rotation
.RE

This causes the cluster to stop serving its old IP, and return to a single IP
state.

.TP 2m
\fB\-\-enable\-autoscaling\fR
Enables autoscaling for a node pool.

Enables autoscaling in the node pool specified by \-\-node\-pool or the default
node pool if \-\-node\-pool is not provided.

.TP 2m
\fB\-\-enable\-binauthz\fR
Enable Binary Authorization for this cluster.

.TP 2m
\fB\-\-enable\-legacy\-authorization\fR
Enables the legacy ABAC authentication for the cluster. User rights are granted
through the use of policies which combine attributes together. For a detailed
look at these properties and related formats, see
https://kubernetes.io/docs/admin/authorization/abac/. To use RBAC permissions
instead, create or update your cluster with the option
\f5\-\-no\-enable\-legacy\-authorization\fR.

.TP 2m
\fB\-\-enable\-master\-authorized\-networks\fR
Allow only specified set of CIDR blocks (specified by the
\f5\-\-master\-authorized\-networks\fR flag) to connect to Kubernetes master
through HTTPS. Besides these blocks, the following have access as well:

.RS 2m
1) The private network the cluster connects to if
`\-\-enable\-private\-nodes` is specified.
2) Google Compute Engine Public IPs if `\-\-enable\-private\-nodes` is not
specified.
.RE

Use \f5\-\-no\-enable\-master\-authorized\-networks\fR to disable. When
disabled, public internet (0.0.0.0/0) is allowed to connect to Kubernetes master
through HTTPS.

.TP 2m
\fB\-\-enable\-network\-policy\fR
Enable network policy enforcement for this cluster. If you are enabling network
policy on an existing cluster the network policy addon must first be enabled on
the master by using \-\-update\-addons=NetworkPolicy=ENABLED flag.

.TP 2m
\fB\-\-enable\-pod\-security\-policy\fR
Enables the pod security policy admission controller for the cluster. The pod
security policy admission controller adds fine\-grained pod create and update
authorization controls through the PodSecurityPolicy API objects. For more
information, see
https://cloud.google.com/kubernetes\-engine/docs/how\-to/pod\-security\-policies.

.TP 2m
\fB\-\-enable\-vertical\-pod\-autoscaling\fR
Enables vertical pod autoscaling for a cluster.

.TP 2m
\fB\-\-generate\-password\fR
Ask the server to generate a secure password and use that as the basic auth
password, keeping the existing username.

.TP 2m
\fB\-\-maintenance\-window\fR=\fIMAINTENANCE_WINDOW\fR
Set a time of day when you prefer maintenance to start on this cluster. For
example:

.RS 2m
$ gcloud alpha container clusters update example\-cluster \e
    \-\-maintenance\-window=12:43
.RE

The time corresponds to the UTC time zone, and must be in HH:MM format. To
remove an existing maintenance window from the cluster, use
\'\-\-maintenance\-window=None'

.TP 2m
\fB\-\-remove\-labels\fR=[\fIKEY\fR,...]
Labels to remove from the Google Cloud resources in use by the Kubernetes Engine
cluster. These are unrelated to Kubernetes labels. Example:

.RS 2m
$ gcloud alpha container clusters update example\-cluster \e
    \-\-remove\-labels=label_a,label_b
.RE

.TP 2m
\fB\-\-security\-profile\fR=\fISECURITY_PROFILE\fR
Name and version of the security profile to be applied to the cluster. If not
specified, the current setting of security profile will be preserved.

Example:

.RS 2m
$ gcloud alpha container clusters update example\-cluster \e
    \-\-security\-profile=default\-1.0\-gke.1
.RE

.TP 2m
\fB\-\-set\-password\fR
Set the basic auth password to the specified value, keeping the existing
username.

.TP 2m
\fB\-\-start\-credential\-rotation\fR
Start the rotation of IP and credentials for this cluster. For example:

.RS 2m
$ gcloud alpha container clusters update example\-cluster \e
    \-\-start\-credential\-rotation
.RE

This causes the cluster to serve on two IPs, and will initiate a node upgrade to
point to the new IP.

.TP 2m
\fB\-\-start\-ip\-rotation\fR
Start the rotation of this cluster to a new IP. For example:

.RS 2m
$ gcloud alpha container clusters update example\-cluster \e
    \-\-start\-ip\-rotation
.RE

This causes the cluster to serve on two IPs, and will initiate a node upgrade to
point to the new IP.

.TP 2m
\fB\-\-update\-addons\fR=[\fIADDON\fR=\fIENABLED\fR|\fIDISABLED\fR,...]
Cluster addons to enable or disable. Options are
HorizontalPodAutoscaling=ENABLED|DISABLED HttpLoadBalancing=ENABLED|DISABLED
KubernetesDashboard=ENABLED|DISABLED Istio=ENABLED|DISABLED
NetworkPolicy=ENABLED|DISABLED

.TP 2m
\fB\-\-update\-labels\fR=[\fIKEY\fR=\fIVALUE\fR,...]
Labels to apply to the Google Cloud resources in use by the Kubernetes Engine
cluster. These are unrelated to Kubernetes labels. Example:

.RS 2m
$ gcloud alpha container clusters update example\-cluster \e
    \-\-update\-labels=label_a=value1,label_b=value2
.RE

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-additional\-zones\fR=[\fIZONE\fR,...]
(DEPRECATED) The set of additional zones in which the cluster's node footprint
should be replicated. All zones must be in the same region as the cluster's
primary zone.

Note that the exact same footprint will be replicated in all zones, such that if
you created a cluster with 4 nodes in a single zone and then use this option to
spread across 2 more zones, 8 additional nodes will be created.

Multiple locations can be specified, separated by commas. For example:

.RS 2m
$ gcloud alpha container clusters update example\-cluster \e
    \-\-zone us\-central1\-a \e
    \-\-additional\-zones us\-central1\-b,us\-central1\-c
.RE

To remove all zones other than the cluster's primary zone, pass the empty string
to the flag. For example:

.RS 2m
$ gcloud alpha container clusters update example\-cluster \e
    \-\-zone us\-central1\-a \-\-additional\-zones ""
.RE

This flag is deprecated. Use \-\-node\-locations=PRIMARY_ZONE,[ZONE,...]
instead.

.TP 2m
\fB\-\-node\-locations\fR=\fIZONE\fR,[\fIZONE\fR,...]
The set of zones in which the specified node footprint should be replicated. All
zones must be in the same region as the cluster's master(s), specified by the
\f5\-\-zone\fR or \f5\-\-region\fR flag. Additionally, for zonal clusters,
\f5\-\-node\-locations\fR must contain the cluster's primary zone. If not
specified, all nodes will be in the cluster's primary zone (for zonal clusters)
or spread across three randomly chosen zones within the cluster's region (for
regional clusters).

Note that \f5NUM_NODES\fR nodes will be created in each zone, such that if you
specify \f5\-\-num\-nodes=4\fR and choose two locations, 8 nodes will be
created.

Multiple locations can be specified, separated by commas. For example:

.RS 2m
$ gcloud alpha container clusters update example\-cluster \e
    \-\-zone us\-central1\-a \e
    \-\-node\-locations us\-central1\-a,us\-central1\-b
.RE

.RE
.sp
.TP 2m

Exports cluster's usage of cloud resources At most one of these may be
specified:

.RS 2m
.TP 2m
\fB\-\-clear\-resource\-usage\-bigquery\-dataset\fR
Disables exporting cluster resource usage to BigQuery.

.TP 2m
\fB\-\-enable\-network\-egress\-metering\fR
\f5 Enable network egress metering on this cluster.

When enabled, a DaemonSet is deployed into the cluster. Each DaemonSet pod
meters network egress traffic by collecting data from the conntrack table, and
exports the metered metrics to the specified destination.

Network egress metering is disabled if this flag is omitted, or when
\fR\-\-no\-enable\-network\-egress\-metering\f5 is set.

.TP 2m
\fB\-\-resource\-usage\-bigquery\-dataset\fR=\fIRESOURCE_USAGE_BIGQUERY_DATASET\fR
The name of the BigQuery dataset to which the cluster's usage of cloud resources
is exported. A table will be created in the specified dataset to store cluster
resource usage. The resulting table can be joined with BigQuery Billing Export
to produce a fine\-grained cost breakdown.

Example:

.RS 2m
$ gcloud alpha container clusters update example\-cluster \e
    \-\-resource\-usage\-bigquery\-dataset=example_bigquery_dataset_name
.RE

.RE
.sp
.TP 2m

Node autoprovisioning

.RS 2m
.TP 2m
\fB\-\-enable\-autoprovisioning\fR
Enables node autoprovisioning for a cluster.

Cluster Autoscaler will be able to create new node pools. Requires maximum CPU
and memory limits to be specified. This flag must be specified if any of the
other arguments in this group are specified.

.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-autoprovisioning\-config\-file\fR=\fIAUTOPROVISIONING_CONFIG_FILE\fR
Path of the JSON/YAML file which contains information about the cluster's
autoscaling configuration. Currently it only contains a list of resource limits
of the cluster.

Each resource limits definition contains three fields: resourceType, maximum and
minimum. Resource type can be "cpu", "memory" or an accelerator (e.g.
"nvidia\-tesla\-k80" for nVidia Tesla K80). Use gcloud compute
accelerator\-types list to learn about available accelerator types. Maximum is
the maximum allowed amount with the unit of the resource. Minimum is the minimum
allowed amount with the unit of the resource.

.TP 2m

Flags to configure resource limits:

.RS 2m
.TP 2m
\fB\-\-max\-cpu\fR=\fIMAX_CPU\fR
Maximum number of cores in the cluster.

Maximum number of cores to which the cluster can scale. This flag must be
specified if any of the other arguments in this group are specified.

.TP 2m
\fB\-\-max\-memory\fR=\fIMAX_MEMORY\fR
Maximum memory in the cluster.

Maximum number of gigabytes of memory to which the cluster can scale. This flag
must be specified if any of the other arguments in this group are specified.

.TP 2m
\fB\-\-min\-cpu\fR=\fIMIN_CPU\fR
Minimum number of cores in the cluster.

Minimum number of cores to which the cluster can scale.

.TP 2m
\fB\-\-min\-memory\fR=\fIMIN_MEMORY\fR
Minimum memory in the cluster.

Minimum number of gigabytes of memory to which the cluster can scale.

.TP 2m

Arguments to set limits on accelerators:

.RS 2m
.TP 2m
\fB\-\-max\-accelerator\fR=[\fItype\fR=\fITYPE\fR,\fIcount\fR=\fICOUNT\fR,...]
Sets maximum limit for a single type of accelerators (e.g. GPUs) in cluster.

.RE
.RE
.RE
.RE
.sp
.TP 2m
\fBtype\fR
(Required) The specific type (e.g. nvidia\-tesla\-k80 for nVidia Tesla K80) of
accelerator for which the limit is set. Use \fRgcloud compute accelerator\-types
list\f5 to learn about all available accelerator types.

.TP 2m
\fBcount\fR
(Required) The maximum number of accelerators to which the cluster can be
scaled. This flag must be specified if any of the other arguments in this group
are specified.

.RS 2m
.TP 2m
\fB\-\-min\-accelerator\fR=[\fItype\fR=\fITYPE\fR,\fIcount\fR=\fICOUNT\fR,...]
Sets minimum limit for a single type of accelerators (e.g. GPUs) in cluster.
Defaults to 0 for all accelerator types if it isn't set.

.RE
.sp
.TP 2m
\fBtype\fR
(Required) The specific type (e.g. nvidia\-tesla\-k80 for nVidia Tesla K80) of
accelerator for which the limit is set. Use \fRgcloud compute accelerator\-types
list\f5 to learn about all available accelerator types.

.TP 2m
\fBcount\fR
(Required) The minimum number of accelerators to which the cluster can be
scaled.

.TP 2m
\fB\-\-logging\-service\fR=\fILOGGING_SERVICE\fR
Logging service to use for the cluster. Options are:
"logging.googleapis.com/kubernetes" (the Google Cloud Logging service with
Kubernetes\-native resource model enabled), "logging.googleapis.com" (the Google
Cloud Logging service), "none" (logs will not be exported from the cluster)

.TP 2m
\fB\-\-monitoring\-service\fR=\fIMONITORING_SERVICE\fR
Monitoring service to use for the cluster. Options are:
"monitoring.googleapis.com/kubernetes" (the Google Cloud Monitoring service with
Kubernetes\-native resource model enabled), "monitoring.googleapis.com" (the
Google Cloud Monitoring service), "none" (no metrics will be exported from the
cluster)

.TP 2m

Basic auth

.RS 2m
.TP 2m
\fB\-\-password\fR=\fIPASSWORD\fR
The password to use for cluster auth. Defaults to a server\-specified
randomly\-generated string.

.TP 2m

Options to specify the username. At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-enable\-basic\-auth\fR
Enable basic (username/password) auth for the cluster.
\fR\-\-enable\-basic\-auth\f5 is an alias for \fR\-\-username=admin\f5;
\fR\-\-no\-enable\-basic\-auth\f5 is an alias for \fR\-\-username=""\f5. Use
\fR\-\-password\f5 to specify a password; if not, the server will randomly
generate one. For cluster versions before 1.12, if neither
\fR\-\-enable\-basic\-auth\f5 nor \fR\-\-username\f5 is specified,
\fR\-\-enable\-basic\-auth\f5 will default to \fRtrue\f5. After 1.12,
\fR\-\-enable\-basic\-auth\f5 will default to \fRfalse\f5.

.TP 2m
\fB\-\-username\fR=\fIUSERNAME\fR, \fB\-u\fR \fIUSERNAME\fR
The user name to use for basic auth for the cluster. Use \fR\-\-password\f5 to
specify a password; if not, the server will randomly generate one.


\fR
.RE
.RE
.RE
.RE
.sp

.SH "OPTIONAL FLAGS"

.RS 2m
.TP 2m
\fB\-\-async\fR
Don't wait for the operation to complete.

.TP 2m
\fB\-\-istio\-config\fR=[\fIauth\fR=\fIMTLS_PERMISSIVE\fR,...]
Configurations for Istio addon, requires \-\-addons contains Istio for create,
or \-\-update\-addons Istio=ENABLED for update.

.RS 2m
.TP 2m
\fBauth\fR
Optional Type of auth MTLS_PERMISSIVE or MTLS_STRICT Example:

.RS 2m
$ gcloud alpha container clusters update example\-cluster \e
    \-\-istio\-config=auth=MTLS_PERMISSIVE
.RE

.RE
.sp
.TP 2m
\fB\-\-master\-authorized\-networks\fR=\fINETWORK\fR,[\fINETWORK\fR,...]
The list of CIDR blocks (up to 20) that are allowed to connect to Kubernetes
master through HTTPS. Specified in CIDR notation (e.g. 1.2.3.4/30). Can not be
specified unless \f5\-\-enable\-master\-authorized\-networks\fR is also
specified.

.TP 2m
\fB\-\-node\-pool\fR=\fINODE_POOL\fR
Node pool to be updated.

.TP 2m

Cluster autoscaling

.RS 2m
.TP 2m
\fB\-\-max\-nodes\fR=\fIMAX_NODES\fR
Maximum number of nodes in the node pool.

Maximum number of nodes to which the node pool specified by \-\-node\-pool (or
default node pool if unspecified) can scale. Ignored unless
\-\-enable\-autoscaling is also specified.

.TP 2m
\fB\-\-min\-nodes\fR=\fIMIN_NODES\fR
Minimum number of nodes in the node pool.

Minimum number of nodes to which the node pool specified by \-\-node\-pool (or
default node pool if unspecified) can scale. Ignored unless
\-\-enable\-autoscaling is also specified.

.RE
.sp
.TP 2m

At most one of these may be specified:

.RS 2m
.TP 2m
\fB\-\-region\fR=\fIREGION\fR
Compute region (e.g. us\-central1) for the cluster.

.TP 2m
\fB\-\-zone\fR=\fIZONE\fR, \fB\-z\fR \fIZONE\fR
Compute zone (e.g. us\-central1\-a) for the cluster. Overrides the default
\fBcompute/zone\fR property value for this command invocation.


.RE
.RE
.sp

.SH "GCLOUD WIDE FLAGS"

These flags are available to all commands: \-\-account, \-\-configuration,
\-\-flags\-file, \-\-flatten, \-\-format, \-\-help, \-\-log\-http, \-\-project,
\-\-quiet, \-\-trace\-token, \-\-user\-output\-enabled, \-\-verbosity. Run \fB$
gcloud help\fR for details.



.SH "NOTES"

This command is currently in ALPHA and may change without notice. If this
command fails with API permission errors despite specifying the right project,
you will have to apply for early access and have your projects registered on the
API whitelist to use it. To do so, contact Support at
https://cloud.google.com/support/. These variants are also available:

.RS 2m
$ gcloud container clusters update
$ gcloud beta container clusters update
.RE


title: recaptcha keys list test scenario
release_tracks: [ALPHA]
summary:
# This summary is generated automatically on update and should not be edited.
- execute:
  - command: |
      recaptcha keys list
  - stdout: |
      SITE_KEY        DISPLAY_NAME
      testkeyios      MyTestKeyIOS
      testkeyandroid  MyTestKeyAndroid
      testkeyweb      MyTestKeyWeb
actions:
- execute_command:
    command: |
      recaptcha keys list
    events:
    - api_call:
        expect_request:
          uri: https://cloudresourcemanager.googleapis.com/v1/projects/fake-project?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body:
            projectNumber: '123456789'
            projectId: fake-project
            lifecycleState: ACTIVE
            name: Fake Project
            labels:
              service-account-downloaded-notification-opt-out: 'true'
            createTime: '2014-09-30T14:51:18.935Z'
            parent:
              type: folder
              id: '396521612403'
    - api_call:
        expect_request:
          uri: https://recaptchaenterprise.googleapis.com/v1/projects/123456789/keys?alt=json
          method: GET
          headers: {}
          body: None
        return_response:
          headers:
            status: '200'
          body:
            keys:
            - name: projects/123456789/keys/testkeyios
              displayName: MyTestKeyIOS
              iosSettings:
                allowedBundleIds:
                - com.test.bundle
            - name: projects/123456789/keys/testkeyandroid
              displayName: MyTestKeyAndroid
              androidSettings:
                allowedPackageNames:
                - com.test.package
            - name: projects/123456789/keys/testkeyweb
              displayName: MyTestKeyWeb
              webSettings:
                allowedDomains:
                - google.com
    - expect_stdout: |
        SITE_KEY        DISPLAY_NAME
        testkeyios      MyTestKeyIOS
        testkeyandroid  MyTestKeyAndroid
        testkeyweb      MyTestKeyWeb

    - expect_exit:
        code: 0

title: eventarc attributes types describe test scenario
release_tracks: [BETA]

summary:
# This summary is generated by http://go/gcloud-scenario-tests on update and should not be edited.
- execute:
  - command: |
      eventarc attributes types describe google.cloud.audit.log.v1.written
  - stdout: |
      attributes: type,serviceName,methodName,resourceName
      description: Cloud Audit Log written
      name: google.cloud.audit.log.v1.written
- execute:
  - command: |
      eventarc attributes types describe
        google.cloud.pubsub.topic.v1.messagePublished
  - stdout: |
      attributes: type
      description: Cloud Pub/Sub message published
      name: google.cloud.pubsub.topic.v1.messagePublished
- execute:
  - command: |
      eventarc attributes types describe fake.event.type
  - error: '1: "fake.event.type" is not a supported event type.'

actions:
- execute_command:
    command: |
      eventarc attributes types describe google.cloud.audit.log.v1.written
    events:
    - expect_stdout: |
        attributes: type,serviceName,methodName,resourceName
        description: Cloud Audit Log written
        name: google.cloud.audit.log.v1.written
    - expect_exit:
        code: 0

- execute_command:
    command: |
      eventarc attributes types describe
        google.cloud.pubsub.topic.v1.messagePublished
    events:
    - expect_stdout: |
        attributes: type
        description: Cloud Pub/Sub message published
        name: google.cloud.pubsub.topic.v1.messagePublished
    - expect_exit:
        code: 0

- execute_command:
    command: |
      eventarc attributes types describe fake.event.type
    events:
    - expect_exit:
        code: 1
        message: '"fake.event.type" is not a supported event type.'

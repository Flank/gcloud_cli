title: database-migration migration-jobs restart scenario test.
release_tracks: [ALPHA]
summary:
# This summary is generated by http://go/gcloud-scenario-tests on update and should not be edited.
- execute:
  - command: database-migration migration-jobs restart test-job --region=us-central1
  - stdout: |
      done: false
      metadata:
        '@type': type.googleapis.com/google.cloud.clouddms.v1alpha2.OperationMetadata
        apiVersion: v1alpha2
        createTime: '2020-08-28T15:46:12.010213251Z'
        requestedCancellation: false
        target: projects/fake-project/locations/us-central1/migrationJobs/test-job
        verb: restart
      name: projects/fake-project/locations/us-central1/operations/operation-1598629571927-5adf1f3c31d2d-07a30894-6a0be15e
actions:
- execute_command:
    command: database-migration migration-jobs restart test-job --region=us-central1
    events:
    - api_call:
        expect_request:
          uri: https://datamigration.googleapis.com/v1alpha2/projects/fake-project/locations/us-central1/migrationJobs/test-job:restart?alt=json
          method: POST
          headers: {}
          body: null
        return_response:
          status: 200
          headers: {}
          body: |
            {
              "name": "projects/fake-project/locations/us-central1/operations/operation-1598629571927-5adf1f3c31d2d-07a30894-6a0be15e",
              "metadata": {
                "@type": "type.googleapis.com/google.cloud.clouddms.v1alpha2.OperationMetadata",
                "createTime": "2020-08-28T15:46:12.010213251Z",
                "target": "projects/fake-project/locations/us-central1/migrationJobs/test-job",
                "verb": "restart",
                "requestedCancellation": false,
                "apiVersion": "v1alpha2"
              },
              "done": false
            }
    - expect_stdout: |
        done: false
        metadata:
          '@type': type.googleapis.com/google.cloud.clouddms.v1alpha2.OperationMetadata
          apiVersion: v1alpha2
          createTime: '2020-08-28T15:46:12.010213251Z'
          requestedCancellation: false
          target: projects/fake-project/locations/us-central1/migrationJobs/test-job
          verb: restart
        name: projects/fake-project/locations/us-central1/operations/operation-1598629571927-5adf1f3c31d2d-07a30894-6a0be15e
    - expect_exit:
        code: 0

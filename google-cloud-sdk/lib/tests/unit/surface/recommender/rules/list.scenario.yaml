title: List rules
release_tracks: [ALPHA]
summary:
# This summary is generated automatically on update and should not be edited.
- execute:
  - command: recommender rules list --project=my-project
  - stdout: |
      ID       CONDITION_RECOMMENDER_ID  TARGET_STATE  UPDATE_TIME
      my-rule  my-recommender            DISMISSED     2019-02-15T18:15:33.486693Z
actions:
- execute_command:
    command: recommender rules list --project=my-project
    events:
    - api_call:
        expect_request:
          uri: https://recommender.googleapis.com/v1alpha1/projects/my-project/rules?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |
            {
              "rules": [
                {
                  "name": "projects/my-project/rules/my-rule",
                  "condition": {
                    "recommenderId": "my-recommender",
                    "resources": [
                      "//cloudresourcemanager.googleapis.com/projects/my-project"
                    ],
                    "fields": {
                      "conditionExpression": "",
                      "member": "user:user@google.com",
                      "role": "roles/editor"
                    }
                  },
                  "updateTime": "2019-02-15T18:15:33.486693Z",
                  "targetState": "DISMISSED"
                }
              ]
            }
    - expect_stdout: |
        ID       CONDITION_RECOMMENDER_ID  TARGET_STATE  UPDATE_TIME
        my-rule  my-recommender            DISMISSED     2019-02-15T18:15:33.486693Z
    - expect_exit:
        code: 0

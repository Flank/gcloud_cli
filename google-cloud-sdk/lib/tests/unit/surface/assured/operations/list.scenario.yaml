title: assured operations list test
release_tracks: [BETA, ALPHA]
summary:
# This summary is generated by http://go/gcloud-scenario-tests on update and should not be edited.
- execute:
  - command: assured operations list --organization=919698206570 --location=us-central1
      --page-size=2 --limit=1
  - stderr: |
      Using endpoint [https://us-central1-assuredworkloads.googleapis.com/]
  - stdout: |
      ---
      done: true
      metadata:
        '@type': type.googleapis.com/google.cloud.assuredworkloads.v1beta1.CreateWorkloadOperationMetadata
        complianceRegime: CJIS
        createTime: '2020-08-25T19:02:54.981073Z'
        displayName: Test 1
        parent: organizations/919698206570/locations/us-central1
      name: organizations/919698206570/locations/us-central1/operations/dcc61b55-6f1a-4b72-ae4d-477e9670a953
      response:
        '@type': type.googleapis.com/google.cloud.assuredworkloads.v1beta1.Workload
        complianceRegime: CJIS
        createTime: '2020-08-25T19:03:07.571Z'
        displayName: Test 1
        etag: '2016209115'
        name: organizations/919698206570/locations/us-central1/workloads/00-be3b5e9c-8474-480a-86b3-294
        resources:
        - resourceId: '800679212571'
        - resourceId: '710488282881'
actions:
- execute_command:
    command: assured operations list --organization=919698206570 --location=us-central1
      --page-size=2 --limit=1
    events:
    - expect_stderr: |
        Using endpoint [https://us-central1-assuredworkloads.googleapis.com/]
    - api_call:
        expect_request:
          uri: https://us-central1-assuredworkloads.googleapis.com/v1beta1/organizations/919698206570/locations/us-central1/operations?alt=json&pageSize=2
          method: GET
          body: null
        return_response:
          headers:
            status: '200'
          body: |
            {
              "operations": [
                {
                  "name": "organizations/919698206570/locations/us-central1/operations/dcc61b55-6f1a-4b72-ae4d-477e9670a953",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.assuredworkloads.v1beta1.CreateWorkloadOperationMetadata",
                    "createTime": "2020-08-25T19:02:54.981073Z",
                    "displayName": "Test 1",
                    "parent": "organizations/919698206570/locations/us-central1",
                    "complianceRegime": "CJIS"
                  },
                  "done": true,
                  "response": {
                    "@type": "type.googleapis.com/google.cloud.assuredworkloads.v1beta1.Workload",
                    "name": "organizations/919698206570/locations/us-central1/workloads/00-be3b5e9c-8474-480a-86b3-294",
                    "displayName": "Test 1",
                    "resources": [
                      {
                        "resourceId": "800679212571"
                      },
                      {
                        "resourceId": "710488282881"
                      }
                    ],
                    "complianceRegime": "CJIS",
                    "createTime": "2020-08-25T19:03:07.571Z",
                    "etag": "2016209115"
                  }
                },
                {
                  "name": "organizations/919698206570/locations/us-central1/operations/dcc61b55-6f1a-4b72-ae4d-477e9670a954",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.assuredworkloads.v1beta1.CreateWorkloadOperationMetadata",
                    "createTime": "2020-08-25T19:02:54.981073Z",
                    "displayName": "Test 1",
                    "parent": "organizations/919698206570/locations/us-central1",
                    "complianceRegime": "CJIS"
                  },
                  "done": true,
                  "response": {
                    "@type": "type.googleapis.com/google.cloud.assuredworkloads.v1beta1.Workload",
                    "name": "organizations/919698206570/locations/us-central1/workloads/00-be3b5e9c-8474-480a-86b3-295",
                    "displayName": "Test 2",
                    "resources": [
                      {
                        "resourceId": "800679212572"
                      },
                      {
                        "resourceId": "710488282882"
                      }
                    ],
                    "complianceRegime": "CJIS",
                    "createTime": "2020-08-25T19:03:07.571Z",
                    "etag": "2016209116"
                  }
                }
              ]
            }
    - expect_stdout: |
        ---
        done: true
        metadata:
          '@type': type.googleapis.com/google.cloud.assuredworkloads.v1beta1.CreateWorkloadOperationMetadata
          complianceRegime: CJIS
          createTime: '2020-08-25T19:02:54.981073Z'
          displayName: Test 1
          parent: organizations/919698206570/locations/us-central1
        name: organizations/919698206570/locations/us-central1/operations/dcc61b55-6f1a-4b72-ae4d-477e9670a953
        response:
          '@type': type.googleapis.com/google.cloud.assuredworkloads.v1beta1.Workload
          complianceRegime: CJIS
          createTime: '2020-08-25T19:03:07.571Z'
          displayName: Test 1
          etag: '2016209115'
          name: organizations/919698206570/locations/us-central1/workloads/00-be3b5e9c-8474-480a-86b3-294
          resources:
          - resourceId: '800679212571'
          - resourceId: '710488282881'
    - expect_exit:
        code: 0

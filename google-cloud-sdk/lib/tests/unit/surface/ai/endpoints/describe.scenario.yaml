title: ai endpoints describe scenario test
release_tracks: [ALPHA, BETA]
summary:
# This summary is generated by http://go/gcloud-scenario-tests on update and should not be edited.
- execute:
  - command: ai endpoints describe e --region us-central1
  - stderr: |
      Using endpoint [https://us-central1-aiplatform.googleapis.com/]
  - stdout: |
      createTime: '2020-09-14T18:12:49.680758Z'
      deployedModels:
      - createTime: '2020-09-14T18:12:49.680758Z'
        dedicatedResources:
          machineSpec:
            machineType: n1-standard-4
          minReplicaCount: 1
        displayName: mnist_test
        id: '2015783045713362944'
        model: projects/508879632478/locations/us-central1/models/7919931788451905536
      displayName: mnist_test_2020090411
      etag: AMEw9yPwQeLGPUJqfrFg4a8pB4zcW95eGZZOgwtoUk9jiXrPVTNkyNfQ_XbTuf8oA8UH
      name: projects/508879632478/locations/us-central1/endpoints/8616582355810779136
      trafficSplit:
        '2015783045713362944': 100
      updateTime: '2020-09-14T18:16:27.760958Z'
- execute:
  - command: ai endpoints describe projects/fake-project/locations/us-central1/endpoints/e
  - stderr: |
      Using endpoint [https://us-central1-aiplatform.googleapis.com/]
  - stdout: |
      createTime: '2020-09-14T18:12:49.680758Z'
      deployedModels:
      - createTime: '2020-09-14T18:12:49.680758Z'
        dedicatedResources:
          machineSpec:
            machineType: n1-standard-4
          minReplicaCount: 1
        displayName: mnist_test
        id: '2015783045713362944'
        model: projects/508879632478/locations/us-central1/models/7919931788451905536
      displayName: mnist_test_2020090411
      etag: AMEw9yPwQeLGPUJqfrFg4a8pB4zcW95eGZZOgwtoUk9jiXrPVTNkyNfQ_XbTuf8oA8UH
      name: projects/508879632478/locations/us-central1/endpoints/8616582355810779136
      trafficSplit:
        '2015783045713362944': 100
      updateTime: '2020-09-14T18:16:27.760958Z'
- execute:
  - command: ai endpoints describe e --region us-central1
  - stderr: |
      Using endpoint [https://us-central1-aiplatform.googleapis.com/]
  - stdout: |
      createTime: '2020-09-14T18:12:49.680758Z'
      deployedModels:
      - createTime: '2020-09-14T18:12:49.680758Z'
        dedicatedResources:
          machineSpec:
            machineType: n1-standard-4
          minReplicaCount: 1
        displayName: mnist_test
        id: '2015783045713362944'
        model: projects/508879632478/locations/us-central1/models/7919931788451905536
      displayName: mnist_test_2020090411
      etag: AMEw9yPwQeLGPUJqfrFg4a8pB4zcW95eGZZOgwtoUk9jiXrPVTNkyNfQ_XbTuf8oA8UH
      name: projects/508879632478/locations/us-central1/endpoints/8616582355810779136
      trafficSplit:
        '2015783045713362944': 100
      updateTime: '2020-09-14T18:16:27.760958Z'
actions:
- define_reference:
    reference: api-version
    track_values:
      BETA: v1beta1
      ALPHA: v1beta1
- execute_command:
    command: ai endpoints describe e --region us-central1
    events:
    - expect_stderr: |
        Using endpoint [https://us-central1-aiplatform.googleapis.com/]
    - api_call:
        expect_request:
          uri: https://us-central1-aiplatform.googleapis.com/$$api-version$$/projects/fake-project/locations/us-central1/endpoints/e?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          status: 200
          headers: {}
          body: |
            {
              "name": "projects/508879632478/locations/us-central1/endpoints/8616582355810779136",
              "displayName": "mnist_test_2020090411",
              "deployedModels": [
                {
                  "id": "2015783045713362944",
                  "model": "projects/508879632478/locations/us-central1/models/7919931788451905536",
                  "displayName": "mnist_test",
                  "createTime": "2020-09-14T18:12:49.680758Z",
                  "dedicatedResources": {
                    "machineSpec": {
                      "machineType": "n1-standard-4"
                    },
                    "minReplicaCount": 1
                  }
                }
              ],
              "trafficSplit": {
                "2015783045713362944": 100
              },
              "etag": "AMEw9yPwQeLGPUJqfrFg4a8pB4zcW95eGZZOgwtoUk9jiXrPVTNkyNfQ_XbTuf8oA8UH",
              "createTime": "2020-09-14T18:12:49.680758Z",
              "updateTime": "2020-09-14T18:16:27.760958Z"
            }
    - expect_stdout: |
        createTime: '2020-09-14T18:12:49.680758Z'
        deployedModels:
        - createTime: '2020-09-14T18:12:49.680758Z'
          dedicatedResources:
            machineSpec:
              machineType: n1-standard-4
            minReplicaCount: 1
          displayName: mnist_test
          id: '2015783045713362944'
          model: projects/508879632478/locations/us-central1/models/7919931788451905536
        displayName: mnist_test_2020090411
        etag: AMEw9yPwQeLGPUJqfrFg4a8pB4zcW95eGZZOgwtoUk9jiXrPVTNkyNfQ_XbTuf8oA8UH
        name: projects/508879632478/locations/us-central1/endpoints/8616582355810779136
        trafficSplit:
          '2015783045713362944': 100
        updateTime: '2020-09-14T18:16:27.760958Z'
    - expect_exit:
        code: 0
- execute_command:
    command: ai endpoints describe projects/fake-project/locations/us-central1/endpoints/e
    events:
    - expect_stderr: |
        Using endpoint [https://us-central1-aiplatform.googleapis.com/]
    - api_call:
        expect_request:
          uri: https://us-central1-aiplatform.googleapis.com/$$api-version$$/projects/fake-project/locations/us-central1/endpoints/e?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          status: 200
          headers: {}
          body: |
            {
              "name": "projects/508879632478/locations/us-central1/endpoints/8616582355810779136",
              "displayName": "mnist_test_2020090411",
              "deployedModels": [
                {
                  "id": "2015783045713362944",
                  "model": "projects/508879632478/locations/us-central1/models/7919931788451905536",
                  "displayName": "mnist_test",
                  "createTime": "2020-09-14T18:12:49.680758Z",
                  "dedicatedResources": {
                    "machineSpec": {
                      "machineType": "n1-standard-4"
                    },
                    "minReplicaCount": 1
                  }
                }
              ],
              "trafficSplit": {
                "2015783045713362944": 100
              },
              "etag": "AMEw9yPwQeLGPUJqfrFg4a8pB4zcW95eGZZOgwtoUk9jiXrPVTNkyNfQ_XbTuf8oA8UH",
              "createTime": "2020-09-14T18:12:49.680758Z",
              "updateTime": "2020-09-14T18:16:27.760958Z"
            }
    - expect_stdout: |
        createTime: '2020-09-14T18:12:49.680758Z'
        deployedModels:
        - createTime: '2020-09-14T18:12:49.680758Z'
          dedicatedResources:
            machineSpec:
              machineType: n1-standard-4
            minReplicaCount: 1
          displayName: mnist_test
          id: '2015783045713362944'
          model: projects/508879632478/locations/us-central1/models/7919931788451905536
        displayName: mnist_test_2020090411
        etag: AMEw9yPwQeLGPUJqfrFg4a8pB4zcW95eGZZOgwtoUk9jiXrPVTNkyNfQ_XbTuf8oA8UH
        name: projects/508879632478/locations/us-central1/endpoints/8616582355810779136
        trafficSplit:
          '2015783045713362944': 100
        updateTime: '2020-09-14T18:16:27.760958Z'
    - expect_exit:
        code: 0
- execute_command:
    command: ai endpoints describe e --region us-central1
    events:
    - expect_stderr: |
        Using endpoint [https://us-central1-aiplatform.googleapis.com/]
    - api_call:
        expect_request:
          uri: https://us-central1-aiplatform.googleapis.com/$$api-version$$/projects/fake-project/locations/us-central1/endpoints/e?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          status: 200
          headers: {}
          body: |
            {
              "name": "projects/508879632478/locations/us-central1/endpoints/8616582355810779136",
              "displayName": "mnist_test_2020090411",
              "deployedModels": [
                {
                  "id": "2015783045713362944",
                  "model": "projects/508879632478/locations/us-central1/models/7919931788451905536",
                  "displayName": "mnist_test",
                  "createTime": "2020-09-14T18:12:49.680758Z",
                  "dedicatedResources": {
                    "machineSpec": {
                      "machineType": "n1-standard-4"
                    },
                    "minReplicaCount": 1
                  }
                }
              ],
              "trafficSplit": {
                "2015783045713362944": 100
              },
              "etag": "AMEw9yPwQeLGPUJqfrFg4a8pB4zcW95eGZZOgwtoUk9jiXrPVTNkyNfQ_XbTuf8oA8UH",
              "createTime": "2020-09-14T18:12:49.680758Z",
              "updateTime": "2020-09-14T18:16:27.760958Z"
            }
    - expect_stdout: |
        createTime: '2020-09-14T18:12:49.680758Z'
        deployedModels:
        - createTime: '2020-09-14T18:12:49.680758Z'
          dedicatedResources:
            machineSpec:
              machineType: n1-standard-4
            minReplicaCount: 1
          displayName: mnist_test
          id: '2015783045713362944'
          model: projects/508879632478/locations/us-central1/models/7919931788451905536
        displayName: mnist_test_2020090411
        etag: AMEw9yPwQeLGPUJqfrFg4a8pB4zcW95eGZZOgwtoUk9jiXrPVTNkyNfQ_XbTuf8oA8UH
        name: projects/508879632478/locations/us-central1/endpoints/8616582355810779136
        trafficSplit:
          '2015783045713362944': 100
        updateTime: '2020-09-14T18:16:27.760958Z'
    - expect_exit:
        code: 0

title: Cloud Game Servers deployments rollout test
release_tracks: [ALPHA, BETA, GA]
summary:
# This summary is generated automatically on update and should not be edited.
- execute:
  - command: |
      game servers deployments update-rollout my-deployment --location global --default-config cfg-version1 --config-overrides-file config_overrides.json --no-dry-run
  - stderr: |
      Update rollout request issued for: [my-deployment]
  - progress_tracker:
    - message: Waiting for [operation-1560800278943-58b8a22311613-e8028b30-d16ec62d]
        to finish
    - status: SUCCESS
  - stderr: |
      Updated rollout for: [my-deployment]
  - stdout: |
      done: true
      metadata:
        '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata
        apiVersion: $$api-version$$
        createTime: '2019-06-17T19:37:58.958728294Z'
        endTime: '2019-06-17T19:37:59.569152907Z'
        requestedCancellation: false
        target: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
        verb: updateRollout
      name: projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d
      response:
        '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeploymentRollout
        createTime: '2019-06-17T19:24:41.122744767Z'
        default_config_version: cfg-version1
        etag: 35325325352efsdfsdfewfsdfsdf
        game_server_config_overrides:
        - configVersion: version2
          realmsSelector:
            realms:
            - realm1
            - realm2
        - configVersion: version3
          realmsSelector:
            realms:
            - realm3
        name: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
        updateTime: '2019-06-17T19:37:58.961626920Z'
- execute:
  - command: |
      game servers deployments update-rollout my-deployment --location global --default-config cfg-version1 --config-overrides-file config_overrides.yaml --no-dry-run
  - stderr: |
      Update rollout request issued for: [my-deployment]
  - progress_tracker:
    - message: Waiting for [operation-1560800278943-58b8a22311613-e8028b30-d16ec62d]
        to finish
    - status: SUCCESS
  - stderr: |
      Updated rollout for: [my-deployment]
  - stdout: |
      {}
- execute:
  - command: |
      game servers deployments update-rollout my-deployment --location global --default-config cfg-version1 --config-overrides-file invalid_config_overrides.txt  --no-dry-run
  - error: '1: Invalid schema: unexpected game server config override(s) format.'
- execute:
  - command: |
      game servers deployments update-rollout my-deployment --default-config cfg-version1 --config-overrides-file invalid_yaml.yaml --no-dry-run
  - error: '1: .*Error parsing config_override file:.*$'
- execute:
  - command: |
      game servers deployments update-rollout my-deployment --default-config cfg-version1 --config-overrides-file invalid_config_overrides_unrecognized_fields.yaml --no-dry-run
  - error: |-
      1: Invalid schema, the following fields are unrecognized:
      .bar
      .foo
- execute:
  - command: |
      game servers deployments update-rollout my-deployment --default-config cfg-version1 --config-overrides-file invalid_config_overrides.yaml --no-dry-run
  - error: '1: Invalid schema: .*$'
- execute:
  - command: |
      game servers deployments update-rollout my-deployment --location global --default-config cfg-version1 --config-overrides-file config_overrides.json --dry-run
  - stdout: |
      deployedState:
        fleets:
        - autoscalerDetails: {}
          fleetName: fleet-my-deployment-my-config4
          gameServerClusterName: projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc2
          gameServerConfigName: projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4
        - autoscalerDetails: {}
          fleetName: fleet-my-deployment-my-config4
          gameServerClusterName: projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc1
          gameServerConfigName: projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4
- execute:
  - command: |
      game servers deployments update-rollout my-deployment --location global --default-config cfg-version1 --config-overrides-file config_overrides.yaml --dry-run
  - stdout: |
      deployedState:
        fleets:
        - autoscalerDetails: {}
          fleetName: fleet-my-deployment-my-config4
          gameServerClusterName: projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc2
          gameServerConfigName: projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4
        - autoscalerDetails: {}
          fleetName: fleet-my-deployment-my-config4
          gameServerClusterName: projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc1
          gameServerConfigName: projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4
- execute:
  - command: |
      game servers deployments update-rollout my-deployment --location global --default-config cfg-version1 --config-overrides-file config_overrides.json --dry-run --preview-time '2020-01-01T12:24:00.0Z'
  - stdout: |
      deployedState:
        fleets:
        - autoscalerDetails: {}
          fleetName: fleet-my-deployment-my-config4
          gameServerClusterName: projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc2
          gameServerConfigName: projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4
        - autoscalerDetails: {}
          fleetName: fleet-my-deployment-my-config4
          gameServerClusterName: projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc1
          gameServerConfigName: projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4
- execute:
  - command: |
      game servers deployments update-rollout my-deployment --location global --clear-config-overrides --no-dry-run
  - stderr: |
      Update rollout request issued for: [my-deployment]
  - progress_tracker:
    - message: Waiting for [operation-1560800278943-58b8a22311613-e8028b30-d16ec62d]
        to finish
    - status: SUCCESS
  - stderr: |
      Updated rollout for: [my-deployment]
  - stdout: |
      done: true
      metadata:
        '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata
        apiVersion: $$api-version$$
        createTime: '2019-06-17T19:37:58.958728294Z'
        endTime: '2019-06-17T19:37:59.569152907Z'
        requestedCancellation: false
        target: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
        verb: updateRollout
      name: projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d
      response:
        '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeploymentRollout
        createTime: '2019-06-17T19:24:41.122744767Z'
        default_config_version: cfg-version1
        etag: 35325325352efsdfsdfewfsdfsdf
        name: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
        updateTime: '2019-06-17T19:37:58.961626920Z'
- execute:
  - command: |
      game servers deployments update-rollout my-deployment --location global --default-config "" --no-dry-run
  - stderr: |
      Update rollout request issued for: [my-deployment]
  - progress_tracker:
    - message: Waiting for [operation-1560800278943-58b8a22311613-e8028b30-d16ec62d]
        to finish
    - status: SUCCESS
  - stderr: |
      Updated rollout for: [my-deployment]
  - stdout: |
      done: true
      metadata:
        '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata
        apiVersion: $$api-version$$
        createTime: '2019-06-17T19:37:58.958728294Z'
        endTime: '2019-06-17T19:37:59.569152907Z'
        requestedCancellation: false
        target: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
        verb: updateRollout
      name: projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d
      response:
        '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeploymentRollout
        createTime: '2019-06-17T19:24:41.122744767Z'
        default_config_version: ''
        etag: 35325325352efsdfsdfewfsdfsdf
        game_server_config_overrides: []
        name: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
        updateTime: '2019-06-17T19:37:58.961626920Z'
- execute:
  - command: |
      game servers deployments update-rollout my-deployment --location global --clear-default-config --no-dry-run
  - stderr: |
      Update rollout request issued for: [my-deployment]
  - progress_tracker:
    - message: Waiting for [operation-1560800278943-58b8a22311613-e8028b30-d16ec62d]
        to finish
    - status: SUCCESS
  - stderr: |
      Updated rollout for: [my-deployment]
  - stdout: |
      done: true
      metadata:
        '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata
        apiVersion: $$api-version$$
        createTime: '2019-06-17T19:37:58.958728294Z'
        endTime: '2019-06-17T19:37:59.569152907Z'
        requestedCancellation: false
        target: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
        verb: updateRollout
      name: projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d
      response:
        '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeploymentRollout
        createTime: '2019-06-17T19:24:41.122744767Z'
        etag: 35325325352efsdfsdfewfsdfsdf
        name: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
        updateTime: '2019-06-17T19:37:58.961626920Z'
- execute:
  - command: |
      game servers deployments update-rollout fake-deployment --location global --config-overrides-file config_overrides.yaml --dry-run
  - stdout: |
      createTime: '2020-02-20T06:01:05.081638883Z'
      etag: cCaWwTAbutfZnY25-80ZxJdq_aPHcTDtX0rsVEzywZ8
      gameServerConfigOverrides:
      - configVersion: projects/fake-project/locations/global/gameServerDeployments/fake-deployment/configs/fake-config
        realmsSelector:
          realms:
          - projects/fake-project/locations/fake-location/realms/fake-realm
      name: projects/fake-project/locations/global/gameServerDeployments/fake-deployment/rollout
      updateTime: '2020-02-20T06:01:05.668149037Z'
- execute:
  - command: |
      game servers deployments update-rollout fake-deployment --location global --config-overrides-file config_overrides.yaml --no-dry-run
  - stderr: |
      Update rollout request issued for: [fake-deployment]
  - progress_tracker:
    - message: Waiting for [operation-1560800278943-58b8a22311613-e8028b30-d16ec62d]
        to finish
    - status: SUCCESS
  - stderr: |
      Updated rollout for: [fake-deployment]
  - stdout: |
      {}
- execute:
  - command: |
      game servers deployments update-rollout my-deployment --clear-config-overrides --no-dry-run --preview-time 1970-01-01T00:00:00Z
  - error: '1: `--preview-time` is only relevant if `--dry-run` is set to true.'
- execute:
  - command: |
      game servers deployments update-rollout my-deployment --no-dry-run
  - error: '1: Must specify at least one parameter to update.'
actions:
- define_reference:
    reference: api-version
    track_values:
      ALPHA: v1alpha
      BETA: v1beta
      GA: v1

- write_file:
    path: config_overrides.json
    contents: |
      [
        {
          "realmsSelector": {
            "realms": ["realm1", "realm2"]
          },
          "configVersion": "version2"
        },
        {
          "realmsSelector": {
            "realms": ["realm3"]
          },
          "configVersion": "version3"
        }
      ]
- write_file:
    path: config_overrides.yaml
    contents: |
      - realmsSelector:
          realms:
          - realm1
          - realm2
        configVersion: version2
      - realmsSelector:
          realms:
          - realm4
        configVersion: version3
- write_file:
    path: invalid_config_overrides.txt
    contents: blah
- write_file:
    path: invalid_yaml.yaml
    contents: |
      - foo:
        bar
- write_file:
    path: invalid_config_overrides_unrecognized_fields.yaml
    contents: |
      - foo: "bar"
        bar: "foo"
- write_file:
    path: invalid_config_overrides.yaml
    contents: |
      - configVersion:
          foo: bar
- execute_command:
    command: |
      game servers deployments update-rollout my-deployment --location global --default-config cfg-version1 --config-overrides-file config_overrides.json --no-dry-run
    events:
    - expect_stderr: |
        Update rollout request issued for: [my-deployment]
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout?alt=json&updateMask=defaultGameServerConfig%2CgameServerConfigOverrides
          method: PATCH
          headers: {}
          body: |
            {
               "defaultGameServerConfig": "cfg-version1",
               "gameServerConfigOverrides": [
                  {
                    "realmsSelector": {
                      "realms": ["realm1", "realm2"]
                    },
                    "configVersion": "version2"
                  },
                  {
                    "realmsSelector": {
                      "realms": ["realm3"]
                    },
                    "configVersion": "version3"
                  }
               ]
            }
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "done": true
            }
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "metadata": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata",
                "createTime": "2019-06-17T17:55:25.592630443Z",
                "endTime": "2019-06-17T17:55:26.143797134Z",
                "target": "projects/fake-project/locations/global/gameServerDeployments/my-deployment",
                "verb": "update",
                "requestedCancellation": false,
                "apiVersion": "$$api-version$$"
              },
              "done": true,
              "response": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeployment",
                "name": "projects/fake-project/locations/global/gameServerDeployments/my-deployment",
                "createTime": "2019-06-17T17:55:25.580478587Z",
                "updateTime": "2019-06-17T17:55:25.597731920Z",
                "etag": "ZMjCrpx9B11roG5rk4G7a-FW7W6a0bu1jrUFBhMmcfk"
              }
            }
    - expect_progress_tracker:
        message: Waiting for [operation-1560800278943-58b8a22311613-e8028b30-d16ec62d]
          to finish
        status: SUCCESS
    - expect_stderr: |
        Updated rollout for: [my-deployment]
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "metadata": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata",
                "createTime": "2019-06-17T19:37:58.958728294Z",
                "endTime": "2019-06-17T19:37:59.569152907Z",
                "target": "projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout",
                "verb": "updateRollout",
                "requestedCancellation": false,
                "apiVersion": "$$api-version$$"
              },
              "done": true,
              "response": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeploymentRollout",
                "name": "projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout",
                "createTime": "2019-06-17T19:24:41.122744767Z",
                "updateTime": "2019-06-17T19:37:58.961626920Z",
                "default_config_version": "cfg-version1",
                "game_server_config_overrides": [
                  {
                    "realmsSelector": {
                      "realms": ["realm1", "realm2"]
                    },
                    "configVersion": "version2"
                  },
                  {
                    "realmsSelector": {
                      "realms": ["realm3"]
                    },
                    "configVersion": "version3"
                  }
                ],
                "etag": "35325325352efsdfsdfewfsdfsdf"
              }
            }
    - expect_stdout: |
        done: true
        metadata:
          '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata
          apiVersion: $$api-version$$
          createTime: '2019-06-17T19:37:58.958728294Z'
          endTime: '2019-06-17T19:37:59.569152907Z'
          requestedCancellation: false
          target: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
          verb: updateRollout
        name: projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d
        response:
          '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeploymentRollout
          createTime: '2019-06-17T19:24:41.122744767Z'
          default_config_version: cfg-version1
          etag: 35325325352efsdfsdfewfsdfsdf
          game_server_config_overrides:
          - configVersion: version2
            realmsSelector:
              realms:
              - realm1
              - realm2
          - configVersion: version3
            realmsSelector:
              realms:
              - realm3
          name: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
          updateTime: '2019-06-17T19:37:58.961626920Z'
    - expect_exit:
        code: 0
- execute_command:
    command: |
      game servers deployments update-rollout my-deployment --location global --default-config cfg-version1 --config-overrides-file config_overrides.yaml --no-dry-run
    events:
    - expect_stderr: |
        Update rollout request issued for: [my-deployment]
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout?alt=json&updateMask=defaultGameServerConfig%2CgameServerConfigOverrides
          method: PATCH
          headers: {}
          body: |
            {
               "defaultGameServerConfig": "cfg-version1",
               "gameServerConfigOverrides": [
                  {
                    "realmsSelector": {
                      "realms": ["realm1", "realm2"]
                    },
                    "configVersion": "version2"
                  },
                  {
                    "realmsSelector": {
                      "realms": ["realm3"]
                    },
                    "configVersion": "version3"
                  }
               ]
            }
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "done": true
            }
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "metadata": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata",
                "createTime": "2019-06-17T19:37:58.958728294Z",
                "endTime": "2019-06-17T19:37:59.569152907Z",
                "target": "projects/fake-project/locations/global/gameServerDeployments/my-deployment",
                "verb": "update",
                "requestedCancellation": false,
                "apiVersion": "$$api-version$$"
              },
              "done": true,
              "response": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeployment",
                "name": "projects/fake-project/locations/global/gameServerDeployments/my-deployment",
                "createTime": "2019-06-17T17:55:25.580478587Z",
                "updateTime": "2019-06-17T17:55:25.597731920Z",
                "etag": "ZMjCrpx9B11roG5rk4G7a-FW7W6a0bu1jrUFBhMmcfk"
              }
            }
    - expect_progress_tracker:
        message: Waiting for [operation-1560800278943-58b8a22311613-e8028b30-d16ec62d]
          to finish
        status: SUCCESS
    - expect_stderr: |
        Updated rollout for: [my-deployment]
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: null
    - expect_stdout: |
        {}
    - expect_exit:
        code: 0
- execute_command:
    command: |
      game servers deployments update-rollout my-deployment --location global --default-config cfg-version1 --config-overrides-file invalid_config_overrides.txt  --no-dry-run
    events:
    - expect_exit:
        code: 1
        message: 'Invalid schema: unexpected game server config override(s) format.'
- execute_command:
    command: |
      game servers deployments update-rollout my-deployment --default-config cfg-version1 --config-overrides-file invalid_yaml.yaml --no-dry-run
    events:
    - expect_exit:
        code: 1
        message:
          matches: .*Error parsing config_override file:.*
- execute_command:
    command: |
      game servers deployments update-rollout my-deployment --default-config cfg-version1 --config-overrides-file invalid_config_overrides_unrecognized_fields.yaml --no-dry-run
    events:
    - expect_exit:
        code: 1
        message: |-
          Invalid schema, the following fields are unrecognized:
          .bar
          .foo
- execute_command:
    command: |
      game servers deployments update-rollout my-deployment --default-config cfg-version1 --config-overrides-file invalid_config_overrides.yaml --no-dry-run
    events:
    - expect_exit:
        code: 1
        message:
          matches: 'Invalid schema: .*'
- execute_command:
    command: |
      game servers deployments update-rollout my-deployment --location global --default-config cfg-version1 --config-overrides-file config_overrides.json --dry-run
    events:
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout:preview?alt=json&updateMask=defaultGameServerConfig%2CgameServerConfigOverrides
          method: PATCH
          headers: {}
          body: |
            {
               "default_config_version": "cfg-version1",
               "game_server_config_overrides": [
                  {
                    "realmsSelector": {
                      "realms": ["realm1", "realm2"]
                    },
                    "configVersion": "version2"
                  },
                  {
                    "realmsSelector": {
                      "realms": ["realm3"]
                    },
                    "configVersion": "version3"
                  }
               ]
            }
        return_response:
          headers:
            status: '200'
          body: |
            {
               "deployedState": {
                  "fleets": [
                     {
                        "autoscalerDetails": {},
                        "fleetName": "fleet-my-deployment-my-config4",
                        "gameServerClusterName": "projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc2",
                        "gameServerConfigName": "projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4"
                     },
                     {
                        "autoscalerDetails": {},
                        "fleetName": "fleet-my-deployment-my-config4",
                        "gameServerClusterName": "projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc1",
                        "gameServerConfigName": "projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4"
                     }
                  ]
               }
            }
    - expect_stdout: |
        deployedState:
          fleets:
          - autoscalerDetails: {}
            fleetName: fleet-my-deployment-my-config4
            gameServerClusterName: projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc2
            gameServerConfigName: projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4
          - autoscalerDetails: {}
            fleetName: fleet-my-deployment-my-config4
            gameServerClusterName: projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc1
            gameServerConfigName: projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4
    - expect_exit:
        code: 0
- execute_command:
    command: |
      game servers deployments update-rollout my-deployment --location global --default-config cfg-version1 --config-overrides-file config_overrides.yaml --dry-run
    events:
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout:preview?alt=json&updateMask=defaultGameServerConfig%2CgameServerConfigOverrides
          method: PATCH
          headers: {}
          body: |
            {
               "default_config_version": "cfg-version1",
               "game_server_config_overrides": [
                  {
                    "realmsSelector": {
                      "realms": ["realm1", "realm2"]
                    },
                    "configVersion": "version2"
                  },
                  {
                    "realmsSelector": {
                      "realms": ["realm3"]
                    },
                    "configVersion": "version3"
                  }
               ]
            }
        return_response:
          headers:
            status: '200'
          body: |
            {
               "deployedState": {
                  "fleets": [
                     {
                        "autoscalerDetails": {},
                        "fleetName": "fleet-my-deployment-my-config4",
                        "gameServerClusterName": "projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc2",
                        "gameServerConfigName": "projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4"
                     },
                     {
                        "autoscalerDetails": {},
                        "fleetName": "fleet-my-deployment-my-config4",
                        "gameServerClusterName": "projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc1",
                        "gameServerConfigName": "projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4"
                     }
                  ]
               }
            }
    - expect_stdout: |
        deployedState:
          fleets:
          - autoscalerDetails: {}
            fleetName: fleet-my-deployment-my-config4
            gameServerClusterName: projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc2
            gameServerConfigName: projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4
          - autoscalerDetails: {}
            fleetName: fleet-my-deployment-my-config4
            gameServerClusterName: projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc1
            gameServerConfigName: projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4
    - expect_exit:
        code: 0
- execute_command:
    command: |
      game servers deployments update-rollout my-deployment --location global --default-config cfg-version1 --config-overrides-file config_overrides.json --dry-run --preview-time '2020-01-01T12:24:00.0Z'
    events:
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout:preview?alt=json&previewTime=2020-01-01T12%3A24%3A00.0Z&updateMask=defaultGameServerConfig%2CgameServerConfigOverrides
          method: PATCH
          headers: {}
          body: |
            {
               "default_config_version": "cfg-version1",
               "game_server_config_overrides": [
                  {
                    "realmsSelector": {
                      "realms": ["realm1", "realm2"]
                    },
                    "configVersion": "version2"
                  },
                  {
                    "realmsSelector": {
                      "realms": ["realm3"]
                    },
                    "configVersion": "version3"
                  }
               ]
            }
        return_response:
          headers:
            status: '200'
          body: |
            {
               "deployedState": {
                  "fleets": [
                     {
                        "autoscalerDetails": {},
                        "fleetName": "fleet-my-deployment-my-config4",
                        "gameServerClusterName": "projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc2",
                        "gameServerConfigName": "projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4"
                     },
                     {
                        "autoscalerDetails": {},
                        "fleetName": "fleet-my-deployment-my-config4",
                        "gameServerClusterName": "projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc1",
                        "gameServerConfigName": "projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4"
                     }
                  ]
               }
            }
    - expect_stdout: |
        deployedState:
          fleets:
          - autoscalerDetails: {}
            fleetName: fleet-my-deployment-my-config4
            gameServerClusterName: projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc2
            gameServerConfigName: projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4
          - autoscalerDetails: {}
            fleetName: fleet-my-deployment-my-config4
            gameServerClusterName: projects/gameservices-test-project-87/locations/us-central1/realms/my-realm/gameServerClusters/my-gsc1
            gameServerConfigName: projects/gameservices-test-project-87/locations/global/gameServerDeployments/my-deployment/configs/my-config4
    - expect_exit:
        code: 0
- execute_command:
    command: |
      game servers deployments update-rollout my-deployment --location global --clear-config-overrides --no-dry-run
    events:
    - expect_stderr: |
        Update rollout request issued for: [my-deployment]
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout?alt=json&updateMask=gameServerConfigOverrides
          method: PATCH
          headers: {}
          body: |
            {
               "gameServerConfigOverrides": []
            }
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "done": true
            }
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "metadata": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata",
                "createTime": "2019-06-17T17:55:25.592630443Z",
                "endTime": "2019-06-17T17:55:26.143797134Z",
                "target": "projects/fake-project/locations/global/gameServerDeployments/my-deployment",
                "verb": "update",
                "requestedCancellation": false,
                "apiVersion": "$$api-version$$"
              },
              "done": true,
              "response": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeployment",
                "name": "projects/fake-project/locations/global/gameServerDeployments/my-deployment",
                "createTime": "2019-06-17T17:55:25.580478587Z",
                "updateTime": "2019-06-17T17:55:25.597731920Z",
                "etag": "ZMjCrpx9B11roG5rk4G7a-FW7W6a0bu1jrUFBhMmcfk"
              }
            }
    - expect_progress_tracker:
        message: Waiting for [operation-1560800278943-58b8a22311613-e8028b30-d16ec62d]
          to finish
        status: SUCCESS
    - expect_stderr: |
        Updated rollout for: [my-deployment]
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "metadata": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata",
                "createTime": "2019-06-17T19:37:58.958728294Z",
                "endTime": "2019-06-17T19:37:59.569152907Z",
                "target": "projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout",
                "verb": "updateRollout",
                "requestedCancellation": false,
                "apiVersion": "$$api-version$$"
              },
              "done": true,
              "response": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeploymentRollout",
                "name": "projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout",
                "createTime": "2019-06-17T19:24:41.122744767Z",
                "updateTime": "2019-06-17T19:37:58.961626920Z",
                "default_config_version": "cfg-version1",
                "etag": "35325325352efsdfsdfewfsdfsdf"
              }
            }
    - expect_stdout: |
        done: true
        metadata:
          '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata
          apiVersion: $$api-version$$
          createTime: '2019-06-17T19:37:58.958728294Z'
          endTime: '2019-06-17T19:37:59.569152907Z'
          requestedCancellation: false
          target: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
          verb: updateRollout
        name: projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d
        response:
          '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeploymentRollout
          createTime: '2019-06-17T19:24:41.122744767Z'
          default_config_version: cfg-version1
          etag: 35325325352efsdfsdfewfsdfsdf
          name: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
          updateTime: '2019-06-17T19:37:58.961626920Z'
    - expect_exit:
        code: 0
- execute_command:
    command: |
      game servers deployments update-rollout my-deployment --location global --default-config "" --no-dry-run
    events:
    - expect_stderr: |
        Update rollout request issued for: [my-deployment]
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout?alt=json&updateMask=defaultGameServerConfig
          method: PATCH
          headers: {}
          body: |
            {
               "defaultGameServerConfig": ""
            }
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "done": true
            }
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "metadata": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata",
                "createTime": "2019-06-17T17:55:25.592630443Z",
                "endTime": "2019-06-17T17:55:26.143797134Z",
                "target": "projects/fake-project/locations/global/gameServerDeployments/my-deployment",
                "verb": "update",
                "requestedCancellation": false,
                "apiVersion": "$$api-version$$"
              },
              "done": true,
              "response": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeployment",
                "name": "projects/fake-project/locations/global/gameServerDeployments/my-deployment",
                "createTime": "2019-06-17T17:55:25.580478587Z",
                "updateTime": "2019-06-17T17:55:25.597731920Z",
                "etag": "ZMjCrpx9B11roG5rk4G7a-FW7W6a0bu1jrUFBhMmcfk"
              }
            }
    - expect_progress_tracker:
        message: Waiting for [operation-1560800278943-58b8a22311613-e8028b30-d16ec62d]
          to finish
        status: SUCCESS
    - expect_stderr: |
        Updated rollout for: [my-deployment]
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "metadata": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata",
                "createTime": "2019-06-17T19:37:58.958728294Z",
                "endTime": "2019-06-17T19:37:59.569152907Z",
                "target": "projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout",
                "verb": "updateRollout",
                "requestedCancellation": false,
                "apiVersion": "$$api-version$$"
              },
              "done": true,
              "response": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeploymentRollout",
                "name": "projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout",
                "createTime": "2019-06-17T19:24:41.122744767Z",
                "updateTime": "2019-06-17T19:37:58.961626920Z",
                "default_config_version": "",
                "game_server_config_overrides": [],
                "etag": "35325325352efsdfsdfewfsdfsdf"
              }
            }
    - expect_stdout: |
        done: true
        metadata:
          '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata
          apiVersion: $$api-version$$
          createTime: '2019-06-17T19:37:58.958728294Z'
          endTime: '2019-06-17T19:37:59.569152907Z'
          requestedCancellation: false
          target: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
          verb: updateRollout
        name: projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d
        response:
          '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeploymentRollout
          createTime: '2019-06-17T19:24:41.122744767Z'
          default_config_version: ''
          etag: 35325325352efsdfsdfewfsdfsdf
          game_server_config_overrides: []
          name: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
          updateTime: '2019-06-17T19:37:58.961626920Z'
    - expect_exit:
        code: 0
- execute_command:
    command: |
      game servers deployments update-rollout my-deployment --location global --clear-default-config --no-dry-run
    events:
    - expect_stderr: |
        Update rollout request issued for: [my-deployment]
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout?alt=json&updateMask=defaultGameServerConfig
          method: PATCH
          headers: {}
          body: |
            {
               "defaultGameServerConfig": ''
            }
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "done": true
            }
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "metadata": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata",
                "createTime": "2019-06-17T17:55:25.592630443Z",
                "endTime": "2019-06-17T17:55:26.143797134Z",
                "target": "projects/fake-project/locations/global/gameServerDeployments/my-deployment",
                "verb": "update",
                "requestedCancellation": false,
                "apiVersion": "$$api-version$$"
              },
              "done": true,
              "response": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeployment",
                "name": "projects/fake-project/locations/global/gameServerDeployments/my-deployment",
                "createTime": "2019-06-17T17:55:25.580478587Z",
                "updateTime": "2019-06-17T17:55:25.597731920Z",
                "etag": "ZMjCrpx9B11roG5rk4G7a-FW7W6a0bu1jrUFBhMmcfk"
              }
            }
    - expect_progress_tracker:
        message: Waiting for [operation-1560800278943-58b8a22311613-e8028b30-d16ec62d]
          to finish
        status: SUCCESS
    - expect_stderr: |
        Updated rollout for: [my-deployment]
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "metadata": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata",
                "createTime": "2019-06-17T19:37:58.958728294Z",
                "endTime": "2019-06-17T19:37:59.569152907Z",
                "target": "projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout",
                "verb": "updateRollout",
                "requestedCancellation": false,
                "apiVersion": "$$api-version$$"
              },
              "done": true,
              "response": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeploymentRollout",
                "name": "projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout",
                "createTime": "2019-06-17T19:24:41.122744767Z",
                "updateTime": "2019-06-17T19:37:58.961626920Z",
                "etag": "35325325352efsdfsdfewfsdfsdf"
              }
            }
    - expect_stdout: |
        done: true
        metadata:
          '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata
          apiVersion: $$api-version$$
          createTime: '2019-06-17T19:37:58.958728294Z'
          endTime: '2019-06-17T19:37:59.569152907Z'
          requestedCancellation: false
          target: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
          verb: updateRollout
        name: projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d
        response:
          '@type': type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeploymentRollout
          createTime: '2019-06-17T19:24:41.122744767Z'
          etag: 35325325352efsdfsdfewfsdfsdf
          name: projects/fake-project/locations/global/gameServerDeployments/my-deployment/rollout
          updateTime: '2019-06-17T19:37:58.961626920Z'
    - expect_exit:
        code: 0

- execute_command:
    command: |
      game servers deployments update-rollout fake-deployment --location global --config-overrides-file config_overrides.yaml --dry-run
    events:
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/fake-deployment/rollout:preview?alt=json&updateMask=gameServerConfigOverrides
          method: PATCH
          headers: {}
          body:
            json:
              gameServerConfigOverrides:
              - configVersion: version2
                realmsSelector:
                  realms:
                  - realm1
                  - realm2
              - configVersion: version3
                realmsSelector:
                  realms:
                  - realm4
        return_response:
          headers:
            status: '200'
          body:
            name: projects/fake-project/locations/global/gameServerDeployments/fake-deployment/rollout
            createTime: '2020-02-20T06:01:05.081638883Z'
            updateTime: '2020-02-20T06:01:05.668149037Z'
            gameServerConfigOverrides:
            - realmsSelector:
                realms:
                - projects/fake-project/locations/fake-location/realms/fake-realm
              configVersion: projects/fake-project/locations/global/gameServerDeployments/fake-deployment/configs/fake-config
            etag: cCaWwTAbutfZnY25-80ZxJdq_aPHcTDtX0rsVEzywZ8
    - expect_stdout: |
        createTime: '2020-02-20T06:01:05.081638883Z'
        etag: cCaWwTAbutfZnY25-80ZxJdq_aPHcTDtX0rsVEzywZ8
        gameServerConfigOverrides:
        - configVersion: projects/fake-project/locations/global/gameServerDeployments/fake-deployment/configs/fake-config
          realmsSelector:
            realms:
            - projects/fake-project/locations/fake-location/realms/fake-realm
        name: projects/fake-project/locations/global/gameServerDeployments/fake-deployment/rollout
        updateTime: '2020-02-20T06:01:05.668149037Z'
    - expect_exit:
        code: 0
- execute_command:
    command: |
      game servers deployments update-rollout fake-deployment --location global --config-overrides-file config_overrides.yaml --no-dry-run
    events:
    - expect_stderr: |
        Update rollout request issued for: [fake-deployment]
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/fake-deployment/rollout?alt=json&updateMask=gameServerConfigOverrides
          method: PATCH
          headers: {}
          body:
            json:
              gameServerConfigOverrides:
              - configVersion: version2
                realmsSelector:
                  realms:
                  - realm1
                  - realm2
              - configVersion: version3
                realmsSelector:
                  realms:
                  - realm4
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "done": true
            }
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |
            {
              "name": "projects/fake-project/locations/global/operations/operation-1560800278943-58b8a22311613-e8028b30-d16ec62d",
              "metadata": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.OperationMetadata",
                "createTime": "2019-06-17T19:37:58.958728294Z",
                "endTime": "2019-06-17T19:37:59.569152907Z",
                "target": "projects/fake-project/locations/global/gameServerDeployments/my-deployment",
                "verb": "update",
                "requestedCancellation": false,
                "apiVersion": "$$api-version$$"
              },
              "done": true,
              "response": {
                "@type": "type.googleapis.com/google.cloud.gaming.$$api-version$$.GameServerDeployment",
                "name": "projects/fake-project/locations/global/gameServerDeployments/my-deployment",
                "createTime": "2019-06-17T17:55:25.580478587Z",
                "updateTime": "2019-06-17T17:55:25.597731920Z",
                "etag": "ZMjCrpx9B11roG5rk4G7a-FW7W6a0bu1jrUFBhMmcfk"
              }
            }
    - expect_progress_tracker:
        message: Waiting for [operation-1560800278943-58b8a22311613-e8028b30-d16ec62d]
          to finish
        status: SUCCESS
    - expect_stderr: |
        Updated rollout for: [fake-deployment]
    - api_call:
        expect_request:
          uri: https://gameservices.googleapis.com/$$api-version$$/projects/fake-project/locations/global/gameServerDeployments/fake-deployment/rollout?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: null
    - expect_stdout: |
        {}
    - expect_exit:
        code: 0

- execute_command:
    command: |
      game servers deployments update-rollout my-deployment --clear-config-overrides --no-dry-run --preview-time 1970-01-01T00:00:00Z
    events:
    - expect_exit:
        code: 1
        message: '`--preview-time` is only relevant if `--dry-run` is set to true.'
- execute_command:
    command: |
      game servers deployments update-rollout my-deployment --no-dry-run
    events:
    - expect_exit:
        code: 1
        message: Must specify at least one parameter to update.

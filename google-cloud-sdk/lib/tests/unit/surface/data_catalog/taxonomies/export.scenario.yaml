title: Data Catalog export taxonomy scenario test.
release_tracks: [ALPHA, BETA, GA]
summary:
# This summary is generated by http://go/gcloud-scenario-tests on update and should not be edited.
- execute:
  - command: data-catalog taxonomies export 674858940116916528754321 --location=us
  - stdout: |
      taxonomies:
      - description: Response for the export
        displayName: A taxonomy
        policyTags:
        - childPolicyTags:
          - description: '1'
            displayName: C1
            policyTag: projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/6168037218802209571
          - description: '2'
            displayName: C2
            policyTag: projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/9035360853041764124
          description: '0'
          displayName: Root
          policyTag: projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/396805336195839592
actions:
- define_reference:
    reference: api-version
    track_values:
      BETA: v1beta1
      ALPHA: v1beta1
      GA: v1beta1
- execute_command:
    command: data-catalog taxonomies export 674858940116916528754321 --location=us
    events:
    - api_call:
        expect_request:
          uri: https://datacatalog.googleapis.com/$$api-version$$/projects/fake-project/locations/us/taxonomies:export?alt=json&serializedTaxonomies=True&taxonomies=projects%2Ffake-project%2Flocations%2Fus%2Ftaxonomies%2F674858940116916528754321
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |
            {
              "taxonomies": [
                {
                  "displayName": "A taxonomy",
                  "description": "Response for the export",
                  "policyTags": [
                    {
                      "policyTag": "projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/396805336195839592",
                      "displayName": "Root",
                      "description": "0",
                      "childPolicyTags": [
                        {
                          "policyTag": "projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/6168037218802209571",
                          "displayName": "C1",
                          "description": "1"
                        },
                        {
                          "policyTag": "projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/9035360853041764124",
                          "displayName": "C2",
                          "description": "2"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
    - expect_stdout: |
        taxonomies:
        - description: Response for the export
          displayName: A taxonomy
          policyTags:
          - childPolicyTags:
            - description: '1'
              displayName: C1
              policyTag: projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/6168037218802209571
            - description: '2'
              displayName: C2
              policyTag: projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/9035360853041764124
            description: '0'
            displayName: Root
            policyTag: projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/396805336195839592
    - expect_exit:
        code: 0

title: Data Catalog import taxonomy scenario test.
release_tracks: [ALPHA, BETA]
summary:
# This summary is generated by http://go/gcloud-scenario-tests on update and should not be edited.
- execute:
  - command: data-catalog taxonomies import taxonomies.json --location=us
  - stdout: |
      taxonomies:
      - description: Response for the import
        displayName: A taxonomy
        name: projects/fake-project/locations/us/taxonomies/6982790290898929252
actions:
- define_reference:
    reference: api-version
    track_values:
      BETA: v1beta1
      ALPHA: v1beta1
- write_file:
    path: taxonomies.json
    contents: |
      {
        "taxonomies": [
          {
            "description": "Response for the import",
            "displayName": "A taxonomy",
            "policyTags": [
              {
                "childPolicyTags": [
                  {
                    "description": "1",
                    "displayName": "C1",
                    "policyTag": "projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/6168037218802209571"
                  },
                  {
                    "description": "2",
                    "displayName": "C2",
                    "policyTag": "projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/9035360853041764124"
                  }
                ],
                "description": "0",
                "displayName": "Root",
                "policyTag": "projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/396805336195839592"
              }
            ]
          }
        ]
      }
- execute_command:
    command: data-catalog taxonomies import taxonomies.json --location=us
    events:
    - api_call:
        expect_request:
          uri: https://datacatalog.googleapis.com/$$api-version$$/projects/fake-project/locations/us/taxonomies:import?alt=json
          method: POST
          headers: {}
          body:
            json:
              inlineSource:
                taxonomies:
                - description: Response for the import
                  displayName: A taxonomy
                  policyTags:
                  - childPolicyTags:
                    - description: '1'
                      displayName: C1
                      policyTag: projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/6168037218802209571
                    - description: '2'
                      displayName: C2
                      policyTag: projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/9035360853041764124
                    description: '0'
                    displayName: Root
                    policyTag: projects/594977690804/locations/us/taxonomies/7403327251231781034/policyTags/396805336195839592
        return_response:
          status: 200
          headers:
            status: '200'
          body: |
            {
              "taxonomies": [
                {
                  "name": "projects/fake-project/locations/us/taxonomies/6982790290898929252",
                  "displayName": "A taxonomy",
                  "description": "Response for the import"
                }
              ]
            }
    - expect_stdout: |
        taxonomies:
        - description: Response for the import
          displayName: A taxonomy
          name: projects/fake-project/locations/us/taxonomies/6982790290898929252
    - expect_exit:
        code: 0

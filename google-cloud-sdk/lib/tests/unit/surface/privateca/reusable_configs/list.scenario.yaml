title: privateca reusable-configs list scenario tests
release_tracks: [BETA]
summary:
# This summary is generated by http://go/gcloud-scenario-tests on update and should not be edited.
- set_property: core/project foo
- execute:
  - command: |
      privateca reusable-configs list
  - stdout: |
      NAME      DESCRIPTION
      config-a  This is config A.
      config-b  This is config B.
- execute:
  - command: |
      privateca reusable-configs list --location us-east1
  - stdout: |
      NAME      DESCRIPTION
      config-a  This is config A.
      config-b  This is config B.
- execute:
  - command: |
      privateca reusable-configs list
  - stderr: |
      WARNING: The following locations were fully or partially unreachable : us-west1. If you continue encountering this error, contact certificate-authority-service-alpha-external@google.com for help resolving the issue.
  - stdout: |
      NAME      DESCRIPTION
      config-a  This is config A.
      config-b  This is config B.
actions:
- set_property:
    core/project: foo
- execute_command:
    command: |
      privateca reusable-configs list
    events:
    - api_call:
        expect_request:
          uri: https://privateca.googleapis.com/v1beta1/projects/foo/locations?alt=json
          method: GET
          body: null
        return_response:
          headers:
            status: '200'
          body:
            locations:
            - name: projects/privateca-data/locations/europe-west1
              locationId: europe-west1
            - name: projects/privateca-data/locations/us-east1
              locationId: us-east1
            - name: projects/privateca-data/locations/us-west1
              locationId: us-west1
    - api_call:
        expect_request:
          uri: https://privateca.googleapis.com/v1beta1/projects/privateca-data/locations/europe-west1/reusableConfigs?alt=json&orderBy=name+asc&pageSize=100
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |-
            {
              "reusableConfigs": [
                {
                  "name": "projects/privateca-data/locations/europe-west1/reusableConfigs/config-a",
                  "description": "This is config A."
                },
                {
                  "name": "projects/privateca-data/locations/europe-west1/reusableConfigs/config-b",
                  "description": "This is config B."
                }
              ],
              "next_page_token": "",
              "unreachable": []
            }
    - expect_stdout: |
        NAME      DESCRIPTION
        config-a  This is config A.
        config-b  This is config B.
    - expect_exit:
        code: 0
- execute_command:
    command: |
      privateca reusable-configs list --location us-east1
    events:
    - api_call:
        expect_request:
          uri: https://privateca.googleapis.com/v1beta1/projects/privateca-data/locations/us-east1/reusableConfigs?alt=json&orderBy=name+asc&pageSize=100
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |-
            {
              "reusableConfigs": [
                {
                  "name": "projects/privateca-data/locations/us-east1/reusableConfigs/config-a",
                  "description": "This is config A."
                },
                {
                  "name": "projects/privateca-data/locations/us-east1/reusableConfigs/config-b",
                  "description": "This is config B."
                }
              ],
              "next_page_token": "",
              "unreachable": []
            }
    - expect_stdout: |
        NAME      DESCRIPTION
        config-a  This is config A.
        config-b  This is config B.
    - expect_exit:
        code: 0
- execute_command:
    command: |
      privateca reusable-configs list
    events:
    - api_call:
        expect_request:
          uri: https://privateca.googleapis.com/v1beta1/projects/foo/locations?alt=json
          method: GET
          body: null
        return_response:
          headers:
            status: '200'
          body:
            locations:
            - name: projects/privateca-data/locations/europe-west1
              locationId: europe-west1
            - name: projects/privateca-data/locations/us-east1
              locationId: us-east1
            - name: projects/privateca-data/locations/us-west1
              locationId: us-west1
    - api_call:
        expect_request:
          uri: https://privateca.googleapis.com/v1beta1/projects/privateca-data/locations/europe-west1/reusableConfigs?alt=json&orderBy=name+asc&pageSize=100
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            status: '200'
          body: |-
            {
              "reusableConfigs": [
                {
                  "name": "projects/privateca-data/locations/europe-west1/reusableConfigs/config-a",
                  "description": "This is config A."
                },
                {
                  "name": "projects/privateca-data/locations/europe-west1/reusableConfigs/config-b",
                  "description": "This is config B."
                }
              ],
              "next_page_token": "",
              "unreachable": ["us-west1"]
            }
    - expect_stderr: |
        WARNING: The following locations were fully or partially unreachable : us-west1. If you continue encountering this error, contact certificate-authority-service-alpha-external@google.com for help resolving the issue.
    - expect_stdout: |
        NAME      DESCRIPTION
        config-a  This is config A.
        config-b  This is config B.
    - expect_exit:
        code: 0

title: dataproc metastore list operations test scenario
release_tracks: [ALPHA]
summary:
# This summary is generated by http://go/gcloud-scenario-tests on update and should not be edited.
- execute:
  - command: |
      metastore operations list --location us-east4
  - stdout: |
      OPERATION_NAME                                           LOCATION  TYPE    TARGET        DONE   CREATE_TIME          DURATION
      operation-1596823502244-5ac4d719eca45-d8e97a3e-4fc30b36  us-east4  create  test-gcloud   True   2020-08-07T18:05:02  27M8S
      operation-1597034915881-5ac7eaadae323-2981fb17-8a47e9d7  us-east4  update  test-gcloud   False  2020-08-10T04:48:35  4M40S
      operation-1597035764900-5ac7edd75e0b7-df6cb383-1e564d7e  us-east4  update  test-gcloud   True   2020-08-10T05:02:44  2M52S
      operation-1597116712638-5ac91b6525943-e5f83022-4fd32c66  us-east4  create  test-gcloud2  True   2020-08-11T03:31:52  7M28S
      operation-1597211042732-5aca7acd55834-b8ff4e8f-88795065  us-east4  delete  test-gcloud2  True   2020-08-12T05:44:02  <1S
      operation-1597211042083-5aca7accb7104-7c870271-244d6a28  us-east4  delete  test-gcloud   True   2020-08-12T05:44:02  <1S
- execute:
  - command: |
      metastore operations list --location -
  - stdout: |
      OPERATION_NAME                                           LOCATION     TYPE    TARGET               DONE   CREATE_TIME          DURATION
      operation-1597439231342-5acdccdef3621-e312d959-edb8c9ff  us-central1  create  test-gcloud2         True   2020-08-14T21:07:11  8M47S
      operation-1597708945831-5ad1b9a2bb702-3b503835-15184ade  us-central1  update  test-gcloud2         True   2020-08-18T00:02:25  39S
      operation-1597723304337-5ad1ef2011f94-912d896d-da0cd1d0  us-central1  create  test-gcloud3         True   2020-08-18T04:01:44  8M1S
      operation-1597783880234-5ad2d0c9bf5fa-b5de73c1-e49e8a0f  us-central1  update  test-gcloud          False  2020-08-18T20:51:20  38S
      operation-1597882204318-5ad43f12e6beb-2bc87e61-219b8078  us-central1  create  test-import          True   2020-08-20T00:10:04  2M17S
      operation-1597890167142-5ad45cbcd7861-a7125e11-1e3d973e  us-central1  create  test-import1         True   2020-08-20T02:22:47  8M10S
      operation-1597956816378-5ad5550681a25-00d6b412-1b287848  us-central1  create  service-test-mw-any  True   2020-08-20T20:53:36  9M58S
      operation-1597961282767-5ad565a9fc8d6-502970b9-aaa4923a  us-east4     create  test-import3         True   2020-08-20T22:08:02  6M59S
      operation-1597981024868-5ad5af3585764-6f47cb4e-4c809a55  us-east4     delete  test-gcloud2         True   2020-08-21T03:37:04  37S
actions:
- execute_command:
    command: |
      metastore operations list --location us-east4
    events:
    - api_call:
        expect_request:
          uri: https://metastore.googleapis.com/v1alpha/projects/fake-project/locations/us-east4/operations?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          status: 200
          headers: {}
          body: |
            {
              "operations": [
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-east4/operations/operation-1596823502244-5ac4d719eca45-d8e97a3e-4fc30b36",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-07T18:05:02.459724164Z",
                    "endTime": "2020-08-07T18:32:10.191327663Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-east4/services/test-gcloud",
                    "verb": "create",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": true,
                  "response": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.Service",
                    "name": "projects/metastore-dogfood-cp/locations/us-east4/services/test-gcloud",
                    "createTime": "2020-08-07T18:05:02.456596335Z",
                    "updateTime": "2020-08-07T18:05:14.016321078Z",
                    "hiveMetastoreConfig": {
                      "version": "2.3.6",
                      "configOverrides": {
                        "hive.metastore.warehouse.dir": "gs://gcs-bucket-test-gcloud-c52fa939-3d46-46a2-8242-29825c08318c/hive-warehouse"
                      }
                    },
                    "network": "projects/metastore-dogfood-cp/global/networks/default",
                    "endpointUri": "thrift://10.20.64.23:9083",
                    "port": 9083,
                    "state": "ACTIVE",
                    "stateMessage": "The service is ready to use",
                    "artifactGcsUri": "gs://gcs-bucket-test-gcloud-c52fa939-3d46-46a2-8242-29825c08318c",
                    "tier": "ENTERPRISE"
                  }
                },
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-east4/operations/operation-1597035764900-5ac7edd75e0b7-df6cb383-1e564d7e",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-10T05:02:44.925210765Z",
                    "endTime": "2020-08-10T05:05:37.038946030Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-east4/services/test-gcloud",
                    "verb": "update",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": true,
                  "response": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.Service",
                    "name": "projects/metastore-dogfood-cp/locations/us-east4/services/test-gcloud",
                    "createTime": "2020-08-07T18:05:02.456596335Z",
                    "updateTime": "2020-08-07T18:32:10.215528227Z",
                    "hiveMetastoreConfig": {
                      "version": "2.3.6",
                      "configOverrides": {
                        "hive.metastore.warehouse.dir": "gs://gcs-bucket-test-gcloud-c52fa939-3d46-46a2-8242-29825c08318c/hive-warehouse",
                        "foo": "bar1"
                      }
                    },
                    "network": "projects/metastore-dogfood-cp/global/networks/default",
                    "endpointUri": "thrift://10.20.64.23:8080",
                    "port": 8080,
                    "state": "ACTIVE",
                    "stateMessage": "The service is ready to use",
                    "artifactGcsUri": "gs://gcs-bucket-test-gcloud-c52fa939-3d46-46a2-8242-29825c08318c",
                    "tier": "ENTERPRISE"
                  }
                },
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-east4/operations/operation-1597211042732-5aca7acd55834-b8ff4e8f-88795065",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-12T05:44:02.753599856Z",
                    "endTime": "2020-08-12T05:44:03.037560182Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-east4/services/test-gcloud2",
                    "verb": "delete",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": true,
                  "response": {
                    "@type": "type.googleapis.com/google.protobuf.Empty"
                  }
                },
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-east4/operations/operation-1597116712638-5ac91b6525943-e5f83022-4fd32c66",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-11T03:31:52.916047956Z",
                    "endTime": "2020-08-11T03:39:21.013376159Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-east4/services/test-gcloud2",
                    "verb": "create",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": true,
                  "response": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.Service",
                    "name": "projects/metastore-dogfood-cp/locations/us-east4/services/test-gcloud2",
                    "createTime": "2020-08-11T03:31:52.912810057Z",
                    "updateTime": "2020-08-11T03:31:52.912810057Z",
                    "hiveMetastoreConfig": {
                      "version": "2.3.6",
                      "configOverrides": {
                        "hive.metastore.warehouse.dir": "gs://gcs-bucket-test-gcloud2-64eaa6dd-1c31-4e82-93c9-28545aebb3c5/hive-warehouse"
                      }
                    },
                    "network": "projects/metastore-dogfood-cp/global/networks/default",
                    "endpointUri": "thrift://10.20.64.31:9083",
                    "port": 9083,
                    "state": "ACTIVE",
                    "stateMessage": "The service is ready to use",
                    "artifactGcsUri": "gs://gcs-bucket-test-gcloud2-64eaa6dd-1c31-4e82-93c9-28545aebb3c5",
                    "tier": "ENTERPRISE"
                  }
                },
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-east4/operations/operation-1597034915881-5ac7eaadae323-2981fb17-8a47e9d7",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-10T04:48:35.908556341Z",
                    "endTime": "2020-08-10T04:53:15.918354974Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-east4/services/test-gcloud",
                    "verb": "update",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": false
                },
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-east4/operations/operation-1597211042083-5aca7accb7104-7c870271-244d6a28",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-12T05:44:02.103953979Z",
                    "endTime": "2020-08-12T05:44:02.513631076Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-east4/services/test-gcloud",
                    "verb": "delete",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": true,
                  "response": {
                    "@type": "type.googleapis.com/google.protobuf.Empty"
                  }
                }
              ]
            }
    - expect_stdout: |
        OPERATION_NAME                                           LOCATION  TYPE    TARGET        DONE   CREATE_TIME          DURATION
        operation-1596823502244-5ac4d719eca45-d8e97a3e-4fc30b36  us-east4  create  test-gcloud   True   2020-08-07T18:05:02  27M8S
        operation-1597034915881-5ac7eaadae323-2981fb17-8a47e9d7  us-east4  update  test-gcloud   False  2020-08-10T04:48:35  4M40S
        operation-1597035764900-5ac7edd75e0b7-df6cb383-1e564d7e  us-east4  update  test-gcloud   True   2020-08-10T05:02:44  2M52S
        operation-1597116712638-5ac91b6525943-e5f83022-4fd32c66  us-east4  create  test-gcloud2  True   2020-08-11T03:31:52  7M28S
        operation-1597211042732-5aca7acd55834-b8ff4e8f-88795065  us-east4  delete  test-gcloud2  True   2020-08-12T05:44:02  <1S
        operation-1597211042083-5aca7accb7104-7c870271-244d6a28  us-east4  delete  test-gcloud   True   2020-08-12T05:44:02  <1S
    - expect_exit:
        code: 0
- execute_command:
    command: |
      metastore operations list --location -
    events:
    - api_call:
        expect_request:
          uri: https://metastore.googleapis.com/v1alpha/projects/fake-project/locations/-/operations?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          status: 200
          headers: {}
          body: |
            {
              "operations": [
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-central1/operations/operation-1597708945831-5ad1b9a2bb702-3b503835-15184ade",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-18T00:02:25.847013956Z",
                    "endTime": "2020-08-18T00:03:04.917552285Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-central1/services/test-gcloud2",
                    "verb": "update",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": true,
                  "response": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.Service",
                    "name": "projects/metastore-dogfood-cp/locations/us-central1/services/test-gcloud2",
                    "createTime": "2020-08-14T21:07:11.503609480Z",
                    "updateTime": "2020-08-18T00:02:25.849293297Z",
                    "hiveMetastoreConfig": {
                      "version": "2.3.6",
                      "configOverrides": {
                        "hive.metastore.warehouse.dir": "gs://gcs-bucket-test-gcloud2-2f27bc22-4dbf-4063-8d12-2f4b0c2c61f4/hive-warehouse"
                      }
                    },
                    "network": "projects/metastore-dogfood-cp/global/networks/default",
                    "endpointUri": "thrift://10.119.199.253:9083",
                    "port": 9083,
                    "state": "ACTIVE",
                    "stateMessage": "The service is ready to use",
                    "artifactGcsUri": "gs://gcs-bucket-test-gcloud2-2f27bc22-4dbf-4063-8d12-2f4b0c2c61f4",
                    "tier": "ENTERPRISE"
                  }
                },
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-central1/operations/operation-1597723304337-5ad1ef2011f94-912d896d-da0cd1d0",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-18T04:01:44.483260983Z",
                    "endTime": "2020-08-18T04:09:45.498062459Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-central1/services/test-gcloud3",
                    "verb": "create",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": true,
                  "response": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.Service",
                    "name": "projects/metastore-dogfood-cp/locations/us-central1/services/test-gcloud3",
                    "createTime": "2020-08-18T04:01:44.479586782Z",
                    "updateTime": "2020-08-18T04:01:44.479586782Z",
                    "hiveMetastoreConfig": {
                      "version": "2.3.6",
                      "configOverrides": {
                        "hive.metastore.warehouse.dir": "gs://gcs-bucket-test-gcloud3-95e8f85e-d50b-45ad-beb5-78b9cdcfc7e6/hive-warehouse"
                      }
                    },
                    "network": "projects/metastore-dogfood-cp/global/networks/default",
                    "endpointUri": "thrift://10.119.192.67:9083",
                    "port": 9083,
                    "state": "ACTIVE",
                    "stateMessage": "The service is ready to use",
                    "artifactGcsUri": "gs://gcs-bucket-test-gcloud3-95e8f85e-d50b-45ad-beb5-78b9cdcfc7e6",
                    "tier": "ENTERPRISE"
                  }
                },
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-central1/operations/operation-1597882204318-5ad43f12e6beb-2bc87e61-219b8078",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-20T00:10:04.347813091Z",
                    "endTime": "2020-08-20T00:12:21.317729933Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-central1/services/test-gcloud2/metadataImports/test-import",
                    "verb": "create",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": true,
                  "error": {
                    "code": 10,
                    "message": "+ [[ hive_5994f38e_8b2d_481f_920a_2519f1e26046 == \\h\\i\\v\\e\\_\\s\\l\\m\\_\\s\\e\\r\\v\\i\\c\\e\\_\\2\\f\\2\\7\\b\\c\\2\\2\\_\\4\\d\\b\\f\\_\\4\\0\\6\\3\\_\\8\\d\\1 ]]\n+ source importer_lib.sh\n++ ((  IMPORTER_LIB__++ == 0  ))\n++ SLEEP_SECONDS=30\n++ COPY_TO_TMP_BUCKET_STAGE=copyToTemporaryBucketStage\n++ IMPORT_TO_SQL_DATABASE_STAGE=importToSqlDatabaseStage\n++ SWITCH_TO_IMPORTED_DATABASE=switchToImportedDatabase\n++ FALLBACK_TO_ORIGINAL_DATABASE=fallbackToOriginalDatabase\n++ tr '[:upper:]' '[:lower:]'\n++ echo false\n+ SKIP_SQL_IMPORT=false\n++ uuidgen\n++ date +%s\n+ TMP_BUCKET=gs://0b927a45-4e2e-40ef-9073-92e1c209ac12-1597882256\n+ TMP_OBJECT_URI=gs://0b927a45-4e2e-40ef-9073-92e1c209ac12-1597882256/tmp/sqldump\n+ trap cleanup EXIT\n+ [[ false == \\t\\r\\u\\e ]]\n+ [[ false == \\t\\r\\u\\e ]]\n+ update_stage_label copyToTemporaryBucketStage\n+ local stage=copyToTemporaryBucketStage\n+ kubectl label jobs import-2a770f3e-8701-4bdf-8d7b-69b47e424faf -n eafe3ee5-e18c-40d4-9e1a-d84b4f01a6b0-ns import/stage=copyToTemporaryBucketStage --overwrite\njob.batch/import-2a770f3e-8701-4bdf-8d7b-69b47e424faf labeled\n+ COMMENT_LINE='-- Current Database: `.*`'\n+ CREATE_DB_LINE='CREATE DATABASE .*`.*`.*;'\n+ USE_DB_LINE='USE `.*`;'\n+ gsutil -q stat gs://metastore_probers/sql_import_target/hive_import_2_3_6_3M\n+ cleanup\n+ . /usr/bin/prestop.sh\n++ set -ex\n++ source importer_lib.sh\n+++ ((  IMPORTER_LIB__++ == 0  ))\n++ HMS_TIMEOUT_SECONDS=600\n++ wait_until_healthy\n+++ date +%s\n++ local deadline=1597882859\n+++ date +%s\n++ ((  1597882259 \u003c 1597882859  ))\n+++ get_hivemetastore '{.metadata.generation}'\n+++ local 'jsonpath={.metadata.generation}'\n+++ kubectl get hivemetastore slm-service-2f27bc22-4dbf-4063-8d1 -n eafe3ee5-e18c-40d4-9e1a-d84b4f01a6b0-ns -o 'jsonpath={.metadata.generation}'\n++ GENERATION=1\n+++ get_hivemetastore '{.status.observedGeneration}'\n+++ local 'jsonpath={.status.observedGeneration}'\n+++ kubectl get hivemetastore slm-service-2f27bc22-4dbf-4063-8d1 -n eafe3ee5-e18c-40d4-9e1a-d84b4f01a6b0-ns -o 'jsonpath={.status.observedGeneration}'\n++ OBSERVED=1\n+++ get_hivemetastore '{.status.lastAvailableGeneration}'\n+++ local 'jsonpath={.status.lastAvailableGeneration}'\n+++ kubectl get hivemetastore slm-service-2f27bc22-4dbf-4063-8d1 -n eafe3ee5-e18c-40d4-9e1a-d84b4f01a6b0-ns -o 'jsonpath={.status.lastAvailableGeneration}'\n++ AVAILABLE=1\n++ [[ 1 == \\1 ]]\n++ [[ 1 == \\1 ]]\n+++ get_hivemetastore '{.status.healthy}'\n+++ local 'jsonpath={.status.healthy}'\n+++ kubectl get hivemetastore slm-service-2f27bc22-4dbf-4063-8d1 -n eafe3ee5-e18c-40d4-9e1a-d84b4f01a6b0-ns -o 'jsonpath={.status.healthy}'\n++ [[ true == \\t\\r\\u\\e ]]\n++ return 0\n+++ get_hivemetastore '{.spec.databaseName}'\n+++ local 'jsonpath={.spec.databaseName}'\n+++ kubectl get hivemetastore slm-service-2f27bc22-4dbf-4063-8d1 -n eafe3ee5-e18c-40d4-9e1a-d84b4f01a6b0-ns -o 'jsonpath={.spec.databaseName}'\n++ [[ hive_slm_service_2f27bc22_4dbf_4063_8d1 == \\h\\i\\v\\e\\_\\s\\l\\m\\_\\s\\e\\r\\v\\i\\c\\e\\_\\2\\f\\2\\7\\b\\c\\2\\2\\_\\4\\d\\b\\f\\_\\4\\0\\6\\3\\_\\8\\d\\1 ]]\n++ delete_database_if_exist hive_5994f38e_8b2d_481f_920a_2519f1e26046\n++ local database=hive_5994f38e_8b2d_481f_920a_2519f1e26046\n++ gcloud sql databases describe hive_5994f38e_8b2d_481f_920a_2519f1e26046 --instance=metastore-db-slm-service-2f27bc22-4dbf-4063-8d1 --project=mbbe0c62b7d6fcca7p-tp\n++ return 0\n+ gsutil ls gs://0b927a45-4e2e-40ef-9073-92e1c209ac12-1597882256\nBucketNotFoundException: 404 gs://0b927a45-4e2e-40ef-9073-92e1c209ac12-1597882256 bucket does not exist.\n"
                  }
                },
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-central1/operations/operation-1597890167142-5ad45cbcd7861-a7125e11-1e3d973e",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-20T02:22:47.163341121Z",
                    "endTime": "2020-08-20T02:30:56.983354856Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-central1/services/test-gcloud3/metadataImports/test-import1",
                    "verb": "create",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": true,
                  "response": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.MetadataImport",
                    "name": "projects/metastore-dogfood-cp/locations/us-central1/services/test-gcloud3/metadataImports/test-import1",
                    "createTime": "2020-08-20T02:22:47.155565288Z",
                    "updateTime": "2020-08-20T02:22:47.155565288Z",
                    "state": "SUCCEEDED",
                    "databaseDump": {
                      "databaseType": "MYSQL",
                      "gcsUri": "gs://test-gcloud/sql_import_target/hive_import_2_3_6_3M"
                    }
                  }
                },
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-central1/operations/operation-1597439231342-5acdccdef3621-e312d959-edb8c9ff",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-14T21:07:11.514529561Z",
                    "endTime": "2020-08-14T21:15:58.030758454Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-central1/services/test-gcloud2",
                    "verb": "create",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": true,
                  "response": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.Service",
                    "name": "projects/metastore-dogfood-cp/locations/us-central1/services/test-gcloud2",
                    "createTime": "2020-08-14T21:07:11.503609480Z",
                    "updateTime": "2020-08-14T21:07:11.503609480Z",
                    "hiveMetastoreConfig": {
                      "version": "2.3.6",
                      "configOverrides": {
                        "hive.metastore.warehouse.dir": "gs://gcs-bucket-test-gcloud2-2f27bc22-4dbf-4063-8d12-2f4b0c2c61f4/hive-warehouse"
                      }
                    },
                    "network": "projects/metastore-dogfood-cp/global/networks/default",
                    "endpointUri": "thrift://10.119.199.253:9083",
                    "port": 9083,
                    "state": "ACTIVE",
                    "stateMessage": "The service is ready to use",
                    "artifactGcsUri": "gs://gcs-bucket-test-gcloud2-2f27bc22-4dbf-4063-8d12-2f4b0c2c61f4",
                    "tier": "ENTERPRISE"
                  }
                },
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-central1/operations/operation-1597956816378-5ad5550681a25-00d6b412-1b287848",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-20T20:53:36.518566033Z",
                    "endTime": "2020-08-20T21:03:34.765954465Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-central1/services/service-test-mw-any",
                    "verb": "create",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": true,
                  "response": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.Service",
                    "name": "projects/metastore-dogfood-cp/locations/us-central1/services/service-test-mw-any",
                    "createTime": "2020-08-20T20:53:36.513351761Z",
                    "updateTime": "2020-08-20T20:53:36.513351761Z",
                    "hiveMetastoreConfig": {
                      "version": "2.3.6",
                      "configOverrides": {
                        "hive.metastore.warehouse.dir": "gs://gcs-bucket-service-test-mw-any-4582beb8-d6ca-4b2b-8806-633a304c/hive-warehouse"
                      }
                    },
                    "network": "projects/metastore-dogfood-cp/global/networks/default",
                    "endpointUri": "thrift://10.119.192.81:9083",
                    "port": 9083,
                    "state": "ACTIVE",
                    "stateMessage": "The service is ready to use",
                    "artifactGcsUri": "gs://gcs-bucket-service-test-mw-any-4582beb8-d6ca-4b2b-8806-633a304c",
                    "tier": "ENTERPRISE"
                  }
                },
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-central1/operations/operation-1597783880234-5ad2d0c9bf5fa-b5de73c1-e49e8a0f",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-18T20:51:20.251151674Z",
                    "endTime": "2020-08-18T20:51:58.231171533Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-central1/services/test-gcloud",
                    "verb": "update",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": false
                },
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-east4/operations/operation-1597981024868-5ad5af3585764-6f47cb4e-4c809a55",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-21T03:37:04.891087751Z",
                    "endTime": "2020-08-21T03:37:41.493374621Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-east4/services/test-gcloud2",
                    "verb": "delete",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": true,
                  "response": {
                    "@type": "type.googleapis.com/google.protobuf.Empty"
                  }
                },
                {
                  "name": "projects/metastore-dogfood-cp/locations/us-east4/operations/operation-1597961282767-5ad565a9fc8d6-502970b9-aaa4923a",
                  "metadata": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.OperationMetadata",
                    "createTime": "2020-08-20T22:08:02.794245630Z",
                    "endTime": "2020-08-20T22:15:02.053226347Z",
                    "target": "projects/metastore-dogfood-cp/locations/us-east4/services/test-gcloud2/metadataImports/test-import3",
                    "verb": "create",
                    "requestedCancellation": false,
                    "apiVersion": "v1alpha"
                  },
                  "done": true,
                  "response": {
                    "@type": "type.googleapis.com/google.cloud.metastore.v1alpha.MetadataImport",
                    "name": "projects/metastore-dogfood-cp/locations/us-east4/services/test-gcloud2/metadataImports/test-import3",
                    "description": "test description",
                    "createTime": "2020-08-20T22:08:02.787496904Z",
                    "updateTime": "2020-08-20T22:08:02.787496904Z",
                    "state": "SUCCEEDED",
                    "databaseDump": {
                      "databaseType": "MYSQL",
                      "gcsUri": "gs://test-gcloud/sql_import_target/hive_import_2_3_6_3M"
                    }
                  }
                }
              ]
            }
    - expect_stdout: |
        OPERATION_NAME                                           LOCATION     TYPE    TARGET               DONE   CREATE_TIME          DURATION
        operation-1597439231342-5acdccdef3621-e312d959-edb8c9ff  us-central1  create  test-gcloud2         True   2020-08-14T21:07:11  8M47S
        operation-1597708945831-5ad1b9a2bb702-3b503835-15184ade  us-central1  update  test-gcloud2         True   2020-08-18T00:02:25  39S
        operation-1597723304337-5ad1ef2011f94-912d896d-da0cd1d0  us-central1  create  test-gcloud3         True   2020-08-18T04:01:44  8M1S
        operation-1597783880234-5ad2d0c9bf5fa-b5de73c1-e49e8a0f  us-central1  update  test-gcloud          False  2020-08-18T20:51:20  38S
        operation-1597882204318-5ad43f12e6beb-2bc87e61-219b8078  us-central1  create  test-import          True   2020-08-20T00:10:04  2M17S
        operation-1597890167142-5ad45cbcd7861-a7125e11-1e3d973e  us-central1  create  test-import1         True   2020-08-20T02:22:47  8M10S
        operation-1597956816378-5ad5550681a25-00d6b412-1b287848  us-central1  create  service-test-mw-any  True   2020-08-20T20:53:36  9M58S
        operation-1597961282767-5ad565a9fc8d6-502970b9-aaa4923a  us-east4     create  test-import3         True   2020-08-20T22:08:02  6M59S
        operation-1597981024868-5ad5af3585764-6f47cb4e-4c809a55  us-east4     delete  test-gcloud2         True   2020-08-21T03:37:04  37S
    - expect_exit:
        code: 0

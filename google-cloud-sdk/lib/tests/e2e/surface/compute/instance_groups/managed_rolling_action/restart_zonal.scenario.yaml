title: Creates a zonal MIG and performs a rolling update
release_tracks: [BETA]
summary:
# This summary is generated automatically on update and should not be edited.
- execute:
  - command: compute instance-templates create $$template1$$ --machine-type n1-standard-1
      --format 'text(name,properties.machineType)'
  - stderr: |
      Created [https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template1$$\].
  - stdout: |
      ---
      name:                   $$template1$$
      properties.machineType: n1-standard-1
- execute:
  - command: compute instance-templates create $$template2$$ --machine-type f1-micro
      --format 'text(name,properties.machineType)'
  - stderr: |
      Created [https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$\].
  - stdout: |
      ---
      name:                   $$template2$$
      properties.machineType: f1-micro
- execute:
  - command: compute instance-groups managed create $$manager$$ --zone us-central1-f
      --base-instance-name $$manager$$ --size 3 --template $$template1$$ --format
      'text(name,region,targetSize)'
  - stderr: |
      Created [https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$\].
  - stdout: |
      ---
      name:       $$manager$$
      targetSize: 3
- execute:
  - command: compute instance-groups managed wait-until --stable $$manager$$ --timeout
      600 --zone us-central1-f --no-user-output-enabled
- execute:
  - command: compute instances list --zones '$$list_zones$$' --filter 'machineType:n1-standard-1 AND name:$$manager$$'
      --format 'value(machineType)'
  - stdout: |
      n1-standard-1
      n1-standard-1
      n1-standard-1
- execute:
  - command: compute instance-groups managed list-instances $$manager$$ --zone us-central1-f
      --format 'text(instanceStatus,version.name)'
  - stdout: |
      ---
      instanceStatus: RUNNING
      ---
      instanceStatus: RUNNING
      ---
      instanceStatus: RUNNING
- execute:
  - command: compute instance-groups managed rolling-action start-update $$manager$$
      --type opportunistic --version template=$$template2$$ --format=disable --zone
      us-central1-f
  - stderr: |
      Updated [https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$\].
- execute:
  - command: compute instances list --zones '$$list_zones$$' --filter 'machineType:n1-standard-1 AND name:$$manager$$'
      --format 'value(machineType)'
  - stdout: |
      n1-standard-1
      n1-standard-1
      n1-standard-1
- execute:
  - command: compute instance-groups managed list-instances $$manager$$ --zone us-central1-f
      --format 'text(instanceStatus,version.name)'
  - stdout: |
      ---
      instanceStatus: RUNNING
      ---
      instanceStatus: RUNNING
      ---
      instanceStatus: RUNNING
- execute:
  - command: compute instance-groups managed rolling-action restart $$manager$$ --max-unavailable=100%
      --format=disable --zone us-central1-f
  - stderr: |
      Updated [https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$\].
- execute:
  - command: compute instance-groups managed wait-until --stable $$manager$$ --timeout
      600 --zone us-central1-f --no-user-output-enabled
- execute:
  - command: compute instances list --zones '$$list_zones$$' --filter 'machineType:f1-micro AND name:$$manager$$'
      --format 'value(machineType)'
  - stdout: |
      f1-micro
      f1-micro
      f1-micro
- execute:
  - command: compute instance-groups managed list-instances $$manager$$ --zone us-central1-f
      --format 'text(instanceStatus,version.name)'
  - stdout: |
      ---
      instanceStatus: RUNNING
      version.name:   $$version$$
      ---
      instanceStatus: RUNNING
      version.name:   $$version$$
      ---
      instanceStatus: RUNNING
      version.name:   $$version$$
- execute:
  - command: compute instance-groups managed delete $$manager$$ --zone us-central1-f
  - prompt:
    - message: |
        The following instance group managers will be deleted:
         - [$$manager$$] in [us-central1-f]
    - input: y
  - stderr: |
      Deleted [https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$\].
  - progress_tracker:
    - message: Deleting Managed Instance Group
    - status: SUCCESS
- execute:
  - command: compute instance-templates delete $$template1$$
  - prompt:
    - message: |
        The following instance templates will be deleted:
         - [$$template1$$]
    - input: y
  - stderr: |
      Deleted [https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template1$$\].
- execute:
  - command: compute instance-templates delete $$template2$$
  - prompt:
    - message: |
        The following instance templates will be deleted:
         - [$$template2$$]
    - input: y
  - stderr: |
      Deleted [https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$\].
actions:
- define_reference:
    reference: list_zones
    value: us-central1-a,us-central1-b,us-central1-c,us-central1-f
- define_reference:
    reference: compute-uri
    value: compute.googleapis.com/compute
- generate_resource_id:
    reference: template1
    prefix: mig-updater-zonal
- execute_command:
    command: compute instance-templates create $$template1$$ --machine-type n1-standard-1
      --format 'text(name,properties.machineType)'
    events:
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/debian-cloud/global/images/family/debian-9?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '995'
            Content-Type: application/json; charset=UTF-8
            status: '200'
          body:
            kind: compute#image
            id: '1464844176702362429'
            creationTimestamp: '2019-06-18T16:03:47.268-07:00'
            name: debian-9-stretch-v20190618
            description: Debian, Debian GNU/Linux, 9 (stretch), amd64 built on 20190618
            sourceType: RAW
            rawDisk:
              source: ''
              containerType: TAR
            status: READY
            archiveSizeBytes: '10705167360'
            diskSizeGb: '10'
            licenses:
            - https://$$compute-uri$$/beta/projects/debian-cloud/global/licenses/debian-9-stretch
            family: debian-9
            selfLink: https://$$compute-uri$$/beta/projects/debian-cloud/global/images/debian-9-stretch-v20190618
            labelFingerprint: 42WmSpB8rSM=
            guestOsFeatures:
            - type: VIRTIO_SCSI_MULTIQUEUE
            licenseCodes:
            - '1000205'
            storageLocations:
            - asia
            - asia
            - eu
            - eu
            - us
            - asia
            - us
            - us
            - eu
            - us
            - eu
            - asia
            - us
            - us
            - asia
            - asia
            - eu
            - eu
            - us
            - asia
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates?alt=json
          method: POST
          headers: {}
          body:
            json:
              name: $$template1$$
              properties:
                canIpForward: false
                disks:
                - autoDelete: true
                  boot: true
                  initializeParams:
                    sourceImage: https://$$compute-uri$$/beta/projects/debian-cloud/global/images/family/debian-9
                  mode: READ_WRITE
                  type: PERSISTENT
                machineType: n1-standard-1
                metadata: {}
                networkInterfaces:
                - accessConfigs:
                  - name: external-nat
                    type: ONE_TO_ONE_NAT
                  network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
                scheduling:
                  automaticRestart: true
                serviceAccounts:
                - email: default
                  scopes:
                  - https://www.googleapis.com/auth/devstorage.read_only
                  - https://www.googleapis.com/auth/logging.write
                  - https://www.googleapis.com/auth/monitoring.write
                  - https://www.googleapis.com/auth/pubsub
                  - https://www.googleapis.com/auth/service.management.readonly
                  - https://www.googleapis.com/auth/servicecontrol
                  - https://www.googleapis.com/auth/trace.append
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '771'
            Content-Type: application/json; charset=UTF-8
            status: '200'
          body:
            kind: compute#operation
            id: '485017177044783226'
            name: operation-1561996948211-58ca0c13d0605-7e72d2a7-1d1c5d22
            operationType: compute.instanceTemplates.insert
            targetLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template1$$
            targetId: '5957109316660465786'
            status: RUNNING
            user: 462803083913-lak0k1ette3muh3o3kb3pp2im3urj3e9@developer.gserviceaccount.com
            progress: 0
            insertTime: '2019-07-01T09:02:29.772-07:00'
            startTime: '2019-07-01T09:02:29.787-07:00'
            selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/operations/operation-1561996948211-58ca0c13d0605-7e72d2a7-1d1c5d22
        poll_operation: true
    - expect_stderr:
        matches: |
          Created \[https://.*.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template1$$\].
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template1$$?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '1842'
            Content-Type: application/json; charset=UTF-8
            ETag: '"V9f9lwokH_6dIh7M6j-Pwst65o0=/cjMpsf1F52SBXwjM0phEo_bz6-M="'
            status: '200'
          body:
            kind: compute#instanceTemplate
            id: '5957109316660465786'
            creationTimestamp: '2019-07-01T09:02:29.639-07:00'
            name: $$template1$$
            description: ''
            properties:
              machineType: n1-standard-1
              canIpForward: false
              networkInterfaces:
              - kind: compute#networkInterface
                network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
                accessConfigs:
                - kind: compute#accessConfig
                  type: ONE_TO_ONE_NAT
                  name: external-nat
                  networkTier: PREMIUM
              disks:
              - kind: compute#attachedDisk
                type: PERSISTENT
                mode: READ_WRITE
                deviceName: persistent-disk-0
                index: 0
                boot: true
                initializeParams:
                  sourceImage: https://$$compute-uri$$/beta/projects/debian-cloud/global/images/family/debian-9
                autoDelete: true
              metadata:
                kind: compute#metadata
                fingerprint: 4_QxQ57NQak=
              serviceAccounts:
              - email: default
                scopes:
                - https://www.googleapis.com/auth/devstorage.read_only
                - https://www.googleapis.com/auth/logging.write
                - https://www.googleapis.com/auth/monitoring.write
                - https://www.googleapis.com/auth/pubsub
                - https://www.googleapis.com/auth/service.management.readonly
                - https://www.googleapis.com/auth/servicecontrol
                - https://www.googleapis.com/auth/trace.append
              scheduling:
                onHostMaintenance: MIGRATE
                automaticRestart: true
                preemptible: false
            selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template1$$
    - expect_stdout: |
        ---
        name:                   $$template1$$
        properties.machineType: n1-standard-1
    - expect_exit:
        code: 0


- generate_resource_id:
    reference: template2
    prefix: mig-updater-zonal
- execute_command:
    command: compute instance-templates create $$template2$$ --machine-type f1-micro
      --format 'text(name,properties.machineType)'
    events:
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/debian-cloud/global/images/family/debian-9?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '995'
            Content-Type: application/json; charset=UTF-8
            status: '200'
          body:
            kind: compute#image
            id: '1464844176702362429'
            creationTimestamp: '2019-06-18T16:03:47.268-07:00'
            name: debian-9-stretch-v20190618
            description: Debian, Debian GNU/Linux, 9 (stretch), amd64 built on 20190618
            sourceType: RAW
            rawDisk:
              source: ''
              containerType: TAR
            status: READY
            archiveSizeBytes: '10705167360'
            diskSizeGb: '10'
            licenses:
            - https://$$compute-uri$$/beta/projects/debian-cloud/global/licenses/debian-9-stretch
            family: debian-9
            selfLink: https://$$compute-uri$$/beta/projects/debian-cloud/global/images/debian-9-stretch-v20190618
            labelFingerprint: 42WmSpB8rSM=
            guestOsFeatures:
            - type: VIRTIO_SCSI_MULTIQUEUE
            licenseCodes:
            - '1000205'
            storageLocations:
            - asia
            - asia
            - eu
            - eu
            - us
            - asia
            - us
            - us
            - eu
            - us
            - eu
            - asia
            - us
            - us
            - asia
            - asia
            - eu
            - eu
            - us
            - asia
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates?alt=json
          method: POST
          headers: {}
          body:
            json:
              name: $$template2$$
              properties:
                canIpForward: false
                disks:
                - autoDelete: true
                  boot: true
                  initializeParams:
                    sourceImage: https://$$compute-uri$$/beta/projects/debian-cloud/global/images/family/debian-9
                  mode: READ_WRITE
                  type: PERSISTENT
                machineType: f1-micro
                metadata: {}
                networkInterfaces:
                - accessConfigs:
                  - name: external-nat
                    type: ONE_TO_ONE_NAT
                  network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
                scheduling:
                  automaticRestart: true
                serviceAccounts:
                - email: default
                  scopes:
                  - https://www.googleapis.com/auth/devstorage.read_only
                  - https://www.googleapis.com/auth/logging.write
                  - https://www.googleapis.com/auth/monitoring.write
                  - https://www.googleapis.com/auth/pubsub
                  - https://www.googleapis.com/auth/service.management.readonly
                  - https://www.googleapis.com/auth/servicecontrol
                  - https://www.googleapis.com/auth/trace.append
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '772'
            Content-Type: application/json; charset=UTF-8
            status: '200'
          body:
            kind: compute#operation
            id: '7266659572653723764'
            name: operation-1561996954653-58ca0c19f5507-71253717-cd40af18
            operationType: compute.instanceTemplates.insert
            targetLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$
            targetId: '7134987523309670516'
            status: RUNNING
            user: 462803083913-lak0k1ette3muh3o3kb3pp2im3urj3e9@developer.gserviceaccount.com
            progress: 0
            insertTime: '2019-07-01T09:02:35.466-07:00'
            startTime: '2019-07-01T09:02:35.481-07:00'
            selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/operations/operation-1561996954653-58ca0c19f5507-71253717-cd40af18
        poll_operation: true
    - expect_stderr:
        matches: |
          Created \[https://.*.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$\].
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '1837'
            Content-Type: application/json; charset=UTF-8
            ETag: '"50tYNeEx_5oneLSLARc_zM8X9Xs=/KzgawKyV3aRYV7v1e-P_cMLk2qU="'
            status: '200'
          body:
            kind: compute#instanceTemplate
            id: '7134987523309670516'
            creationTimestamp: '2019-07-01T09:02:35.320-07:00'
            name: $$template2$$
            description: ''
            properties:
              machineType: f1-micro
              canIpForward: false
              networkInterfaces:
              - kind: compute#networkInterface
                network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
                accessConfigs:
                - kind: compute#accessConfig
                  type: ONE_TO_ONE_NAT
                  name: external-nat
                  networkTier: PREMIUM
              disks:
              - kind: compute#attachedDisk
                type: PERSISTENT
                mode: READ_WRITE
                deviceName: persistent-disk-0
                index: 0
                boot: true
                initializeParams:
                  sourceImage: https://$$compute-uri$$/beta/projects/debian-cloud/global/images/family/debian-9
                autoDelete: true
              metadata:
                kind: compute#metadata
                fingerprint: 4_QxQ57NQak=
              serviceAccounts:
              - email: default
                scopes:
                - https://www.googleapis.com/auth/devstorage.read_only
                - https://www.googleapis.com/auth/logging.write
                - https://www.googleapis.com/auth/monitoring.write
                - https://www.googleapis.com/auth/pubsub
                - https://www.googleapis.com/auth/service.management.readonly
                - https://www.googleapis.com/auth/servicecontrol
                - https://www.googleapis.com/auth/trace.append
              scheduling:
                onHostMaintenance: MIGRATE
                automaticRestart: true
                preemptible: false
            selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$
    - expect_stdout: |
        ---
        name:                   $$template2$$
        properties.machineType: f1-micro
    - expect_exit:
        code: 0


- generate_resource_id:
    reference: manager
    prefix: mig-updater-zonal
- execute_command:
    command: compute instance-groups managed create $$manager$$ --zone us-central1-f
      --base-instance-name $$manager$$ --size 3 --template $$template1$$ --format
      'text(name,region,targetSize)'
    events:
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '538'
            Content-Type: application/json; charset=UTF-8
            ETag: '"kA_pMGM0zsugLWHsSxMw10Mwsb8=/qUmAWifig9WnrAETzVG-PJF8kCQ="'
            status: '200'
          body:
            kind: compute#zone
            id: '2004'
            creationTimestamp: '1969-12-31T16:00:00.000-08:00'
            name: us-central1-f
            description: us-central1-f
            status: UP
            region: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/regions/us-central1
            selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
            availableCpuPlatforms:
            - Intel Cascade Lake
            - Intel Skylake
            - Intel Broadwell
            - Intel Haswell
            - Intel Ivy Bridge
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers?alt=json
          method: POST
          headers: {}
          body:
            json:
              baseInstanceName: $$manager$$
              instanceTemplate: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template1$$
              name: $$manager$$
              zone: us-central1-f
              targetSize: 3
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '917'
            Content-Type: application/json; charset=UTF-8
            status: '200'
          body:
            kind: compute#operation
            id: '5709425145474945101'
            name: operation-1561996960888-58ca0c1fe74e0-cbd80c2d-7cf9109e
            zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
            operationType: compute.instanceGroupManagers.insert
            targetLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$
            targetId: '1549576236411883597'
            status: RUNNING
            user: 462803083913-lak0k1ette3muh3o3kb3pp2im3urj3e9@developer.gserviceaccount.com
            progress: 0
            insertTime: '2019-07-01T09:02:42.344-07:00'
            startTime: '2019-07-01T09:02:42.354-07:00'
            selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/operations/operation-1561996960888-58ca0c1fe74e0-cbd80c2d-7cf9109e
        poll_operation: true
    - expect_stderr:
        matches: |
          Created \[https://.*.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$\].
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '1821'
            Content-Type: application/json; charset=UTF-8
            ETag: '"UJYUxmuC8iuUnqxrHM_lEjfrXEs=/IbefyqqzqBsHB1ByJjnrJc1jL-M="'
            status: '200'
          body:
            kind: compute#instanceGroupManager
            id: '1549576236411883597'
            creationTimestamp: '2019-07-01T09:02:42.245-07:00'
            name: $$manager$$
            zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
            instanceTemplate: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template1$$
            versions:
            - instanceTemplate: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template1$$
              targetSize:
                calculated: 3
            instanceGroup: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/$$manager$$
            baseInstanceName: $$manager$$
            fingerprint: uMVaws5MAhU=
            currentActions:
              none: 0
              creating: 3
              creatingWithoutRetries: 0
              verifying: 0
              recreating: 0
              deleting: 0
              abandoning: 0
              restarting: 0
              refreshing: 0
            pendingActions:
              creating: 0
              deleting: 0
              recreating: 0
              restarting: 0
            status:
              isStable: false
              versionTarget:
                isReached: true
            targetSize: 3
            selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$
            updatePolicy:
              type: OPPORTUNISTIC
              minimalAction: REPLACE
              maxSurge:
                fixed: 1
                calculated: 1
              maxUnavailable:
                fixed: 1
                calculated: 1
              minReadySec: 0
            serviceAccount: 462803083913@cloudservices.gserviceaccount.com
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups?alt=json&maxResults=500
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '29613'
            Content-Type: application/json; charset=UTF-8
            ETag: '"UQLyKNpHMAz4-lYPWOdg1eWOkcg=/MQHQuNksNeoQvmpGLOm4NeuoJq4="'
            status: '200'
          body:
            kind: compute#instanceGroupList
            id: projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups
            items:
            - kind: compute#instanceGroup
              id: '6513640278249149209'
              creationTimestamp: '2019-07-01T08:59:50.195-07:00'
              name: gcloud-compute-test-20190701-155943-u30y
              description: "This instance group is controlled by Instance Group Manager\
                \ 'gcloud-compute-test-20190701-155943-u30y'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/gcloud-compute-test-20190701-155943-u30y
              size: 0
            - kind: compute#instanceGroup
              id: '3787494363609141351'
              creationTimestamp: '2019-07-01T09:02:16.093-07:00'
              name: gcloud-instance-groups-test-20190701-160213-s8o4
              description: ''
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/gcloud-instance-groups-test-20190701-160213-s8o4
              size: 0
            - kind: compute#instanceGroup
              id: '5636789521853419621'
              creationTimestamp: '2019-07-01T09:02:18.792-07:00'
              name: mig-instance-configs-zonal-20190701-160216-fz02
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-instance-configs-zonal-20190701-160216-fz02'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-instance-configs-zonal-20190701-160216-fz02
              size: 0
            - kind: compute#instanceGroup
              id: '5365241825176555621'
              creationTimestamp: '2019-07-01T09:02:18.903-07:00'
              name: mig-instance-configs-zonal-20190701-160217-77rs
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-instance-configs-zonal-20190701-160217-77rs'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-instance-configs-zonal-20190701-160217-77rs
              size: 0
            - kind: compute#instanceGroup
              id: '7162612765842444364'
              creationTimestamp: '2019-07-01T09:02:43.970-07:00'
              name: mig-instance-configs-zonal-20190701-160242-uktx
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-instance-configs-zonal-20190701-160242-uktx'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-instance-configs-zonal-20190701-160242-uktx
              size: 0
            - kind: compute#instanceGroup
              id: '3771817028604105638'
              creationTimestamp: '2019-07-01T08:56:57.481-07:00'
              name: mig-update-instances-zonal-20190701-155656-knmu
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155656-knmu'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155656-knmu
              size: 0
            - kind: compute#instanceGroup
              id: '237569851830801258'
              creationTimestamp: '2019-07-01T08:57:57.941-07:00'
              name: mig-update-instances-zonal-20190701-155755-molf
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155755-molf'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155755-molf
              size: 0
            - kind: compute#instanceGroup
              id: '7930990876182418282'
              creationTimestamp: '2019-07-01T08:57:57.316-07:00'
              name: mig-update-instances-zonal-20190701-155755-oi57
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155755-oi57'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155755-oi57
              size: 0
            - kind: compute#instanceGroup
              id: '846803077208445820'
              creationTimestamp: '2019-07-01T08:58:11.035-07:00'
              name: mig-update-instances-zonal-20190701-155808-82dj
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155808-82dj'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155808-82dj
              size: 0
            - kind: compute#instanceGroup
              id: '1998377641416561533'
              creationTimestamp: '2019-07-01T08:58:10.815-07:00'
              name: mig-update-instances-zonal-20190701-155808-gu4e
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155808-gu4e'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155808-gu4e
              size: 0
            - kind: compute#instanceGroup
              id: '5698784205085315961'
              creationTimestamp: '2019-07-01T08:58:14.958-07:00'
              name: mig-update-instances-zonal-20190701-155813-ijkc
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155813-ijkc'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155813-ijkc
              size: 0
            - kind: compute#instanceGroup
              id: '8667772849155969907'
              creationTimestamp: '2019-07-01T08:58:20.830-07:00'
              name: mig-update-instances-zonal-20190701-155817-ovup
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155817-ovup'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155817-ovup
              size: 0
            - kind: compute#instanceGroup
              id: '1550202103341224820'
              creationTimestamp: '2019-07-01T08:58:19.408-07:00'
              name: mig-update-instances-zonal-20190701-155818-gltr
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155818-gltr'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155818-gltr
              size: 1
            - kind: compute#instanceGroup
              id: '3227499906033226610'
              creationTimestamp: '2019-07-01T08:58:21.823-07:00'
              name: mig-update-instances-zonal-20190701-155819-vq4l
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155819-vq4l'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155819-vq4l
              size: 0
            - kind: compute#instanceGroup
              id: '6853804196353250126'
              creationTimestamp: '2019-07-01T08:58:25.351-07:00'
              name: mig-update-instances-zonal-20190701-155824-7hlw
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155824-7hlw'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155824-7hlw
              size: 0
            - kind: compute#instanceGroup
              id: '5910140104067224396'
              creationTimestamp: '2019-07-01T08:58:27.697-07:00'
              name: mig-update-instances-zonal-20190701-155826-wpt6
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155826-wpt6'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155826-wpt6
              size: 0
            - kind: compute#instanceGroup
              id: '8253845504852988733'
              creationTimestamp: '2019-07-01T08:59:14.067-07:00'
              name: mig-update-instances-zonal-20190701-155912-7bs3
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155912-7bs3'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155912-7bs3
              size: 0
            - kind: compute#instanceGroup
              id: '1246840110729106193'
              creationTimestamp: '2019-07-01T08:59:58.778-07:00'
              name: mig-update-instances-zonal-20190701-155953-7cvp
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155953-7cvp'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155953-7cvp
              size: 0
            - kind: compute#instanceGroup
              id: '5865053208136093933'
              creationTimestamp: '2019-07-01T09:00:02.223-07:00'
              name: mig-update-instances-zonal-20190701-155956-zo9s
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155956-zo9s'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155956-zo9s
              size: 0
            - kind: compute#instanceGroup
              id: '984527143494455533'
              creationTimestamp: '2019-07-01T09:00:02.888-07:00'
              name: mig-update-instances-zonal-20190701-155957-q9an
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155957-q9an'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155957-q9an
              size: 0
            - kind: compute#instanceGroup
              id: '5443155924950159594'
              creationTimestamp: '2019-07-01T09:00:05.887-07:00'
              name: mig-update-instances-zonal-20190701-155959-dkg3
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-155959-dkg3'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-155959-dkg3
              size: 0
            - kind: compute#instanceGroup
              id: '518097285741514984'
              creationTimestamp: '2019-07-01T09:00:07.140-07:00'
              name: mig-update-instances-zonal-20190701-160001-ykt1
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-160001-ykt1'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-160001-ykt1
              size: 0
            - kind: compute#instanceGroup
              id: '2389797888209686731'
              creationTimestamp: '2019-07-01T09:00:37.013-07:00'
              name: mig-update-instances-zonal-20190701-160035-f8p4
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-160035-f8p4'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-160035-f8p4
              size: 0
            - kind: compute#instanceGroup
              id: '8924121137608626377'
              creationTimestamp: '2019-07-01T09:00:38.959-07:00'
              name: mig-update-instances-zonal-20190701-160036-6cj5
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-160036-6cj5'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-160036-6cj5
              size: 0
            - kind: compute#instanceGroup
              id: '753337364712493154'
              creationTimestamp: '2019-07-01T09:02:21.825-07:00'
              name: mig-update-instances-zonal-20190701-160219-vo9i
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-160219-vo9i'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-160219-vo9i
              size: 0
            - kind: compute#instanceGroup
              id: '8050423771971424369'
              creationTimestamp: '2019-07-01T09:02:38.196-07:00'
              name: mig-update-instances-zonal-20190701-160236-syzl
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-update-instances-zonal-20190701-160236-syzl'. To modify instances\
                \ in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-update-instances-zonal-20190701-160236-syzl
              size: 0
            - kind: compute#instanceGroup
              id: '6760119462000037965'
              creationTimestamp: '2019-07-01T09:02:42.283-07:00'
              name: $$manager$$
              description: "This instance group is controlled by Instance Group Manager\
                \ '$$manager$$'. To modify instances in this group, use the Instance\
                \ Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/$$manager$$
              size: 0
            - kind: compute#instanceGroup
              id: '4505802393752408984'
              creationTimestamp: '2019-07-01T08:57:43.117-07:00'
              name: mig-wait-until-20190701-155741-6phx
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-wait-until-20190701-155741-6phx'. To modify instances in this\
                \ group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-wait-until-20190701-155741-6phx
              size: 0
            - kind: compute#instanceGroup
              id: '7294238206201402239'
              creationTimestamp: '2019-07-01T08:58:08.543-07:00'
              name: mig-wait-until-20190701-155805-f5ks
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-wait-until-20190701-155805-f5ks'. To modify instances in this\
                \ group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-wait-until-20190701-155805-f5ks
              size: 0
            - kind: compute#instanceGroup
              id: '1991360150186201931'
              creationTimestamp: '2019-07-01T08:58:28.101-07:00'
              name: mig-wait-until-20190701-155826-0irv
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-wait-until-20190701-155826-0irv'. To modify instances in this\
                \ group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-wait-until-20190701-155826-0irv
              size: 0
            - kind: compute#instanceGroup
              id: '1451618529290195174'
              creationTimestamp: '2019-07-01T09:00:09.990-07:00'
              name: mig-wait-until-20190701-160004-gflz
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-wait-until-20190701-160004-gflz'. To modify instances in this\
                \ group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-wait-until-20190701-160004-gflz
              size: 1
            - kind: compute#instanceGroup
              id: '2864798477755846830'
              creationTimestamp: '2019-07-01T09:01:05.211-07:00'
              name: mig-wait-until-20190701-160103-yvcy
              description: "This instance group is controlled by Instance Group Manager\
                \ 'mig-wait-until-20190701-160103-yvcy'. To modify instances in this\
                \ group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers"
              network: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/networks/default
              fingerprint: 42WmSpB8rSM=
              zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
              selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/mig-wait-until-20190701-160103-yvcy
              size: 0
            selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/autoscalers?alt=json&maxResults=500
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '246'
            Content-Type: application/json; charset=UTF-8
            ETag: '"jcBMeij6D1Y_4jZfg3lXaibdnW0=/EkOiogFVGwz8SpMm1oNI2DY610A="'
            status: '200'
          body:
            kind: compute#autoscalerList
            id: projects/cloud-sdk-integration-testing/zones/us-central1-f/autoscalers
            selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/autoscalers
    - expect_stdout: |
        ---
        name:       $$manager$$
        targetSize: 3
    - expect_exit:
        code: 0


- execute_command:
    command: compute instance-groups managed wait-until --stable $$manager$$ --timeout
      600 --zone us-central1-f --no-user-output-enabled
    validation_only: true
    events:
    - expect_exit:
        code: 0
- execute_command:
    # There should be 3 instances in this MIG with the original machine type.
    command: compute instances list --zones '$$list_zones$$' --filter 'machineType:n1-standard-1 AND name:$$manager$$'
      --format 'value(machineType)'
    validation_only: true
    events:
    - expect_stdout: |
        n1-standard-1
        n1-standard-1
        n1-standard-1
    - expect_exit:
        code: 0
- execute_command:
    # There should be 3 instances in this MIG.
    command: compute instance-groups managed list-instances $$manager$$ --zone us-central1-f
      --format 'text(instanceStatus,version.name)'
    validation_only: true
    events:
    - expect_stdout: |
        ---
        instanceStatus: RUNNING
        ---
        instanceStatus: RUNNING
        ---
        instanceStatus: RUNNING
    - expect_exit:
        code: 0


- execute_command:
    command: compute instance-groups managed rolling-action start-update $$manager$$
      --type opportunistic --version template=$$template2$$ --format=disable --zone
      us-central1-f
    events:
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '1820'
            Content-Type: application/json; charset=UTF-8
            ETag: '"zuI1yRydbC6IUqtOp28LKyWQ5gs=/Yg3mJln7HvoGcPvacldCDDHz2wg="'
            status: '200'
          body:
            kind: compute#instanceGroupManager
            id: '1549576236411883597'
            creationTimestamp: '2019-07-01T09:02:42.245-07:00'
            name: $$manager$$
            zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
            instanceTemplate: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template1$$
            versions:
            - instanceTemplate: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template1$$
              targetSize:
                calculated: 3
            instanceGroup: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/$$manager$$
            baseInstanceName: $$manager$$
            fingerprint: uMVaws5MAhU=
            currentActions:
              none: 3
              creating: 0
              creatingWithoutRetries: 0
              verifying: 0
              recreating: 0
              deleting: 0
              abandoning: 0
              restarting: 0
              refreshing: 0
            pendingActions:
              creating: 0
              deleting: 0
              recreating: 0
              restarting: 0
            status:
              isStable: true
              versionTarget:
                isReached: true
            targetSize: 3
            selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$
            updatePolicy:
              type: OPPORTUNISTIC
              minimalAction: REPLACE
              maxSurge:
                fixed: 1
                calculated: 1
              maxUnavailable:
                fixed: 1
                calculated: 1
              minReadySec: 0
            serviceAccount: 462803083913@cloudservices.gserviceaccount.com
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$/listPerInstanceConfigs?alt=json&maxResults=500
          method: POST
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private
            Content-Type: application/json; charset=UTF-8
            status: '200'
          body: null
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$?alt=json
          method: PATCH
          headers: {}
          body:
            json:
              versions:
              - instanceTemplate: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$
              updatePolicy:
                minimalAction: REPLACE
                type: OPPORTUNISTIC
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '886'
            Content-Type: application/json; charset=UTF-8
            status: '200'
          body:
            kind: compute#operation
            id: '6943655689574649862'
            name: operation-1561997032413-58ca0c641d94e-35ee0ad9-86b3a452
            zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
            operationType: patch
            targetLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$
            targetId: '1549576236411883597'
            status: RUNNING
            user: 462803083913-lak0k1ette3muh3o3kb3pp2im3urj3e9@developer.gserviceaccount.com
            progress: 0
            insertTime: '2019-07-01T09:03:53.676-07:00'
            startTime: '2019-07-01T09:03:53.690-07:00'
            selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/operations/operation-1561997032413-58ca0c641d94e-35ee0ad9-86b3a452
        poll_operation: true
    - expect_stderr:
        matches: |
          Updated \[https://.*.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$\].
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '1821'
            Content-Type: application/json; charset=UTF-8
            ETag: '"Ukg5muww1sKPciUv2AWN-Z5MozI=/xOpotN_Xfx0ylwdHxDXpE5ikZQk="'
            status: '200'
          body:
            kind: compute#instanceGroupManager
            id: '1549576236411883597'
            creationTimestamp: '2019-07-01T09:02:42.245-07:00'
            name: $$manager$$
            zone: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
            instanceTemplate: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$
            versions:
            - instanceTemplate: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$
              targetSize:
                calculated: 3
            instanceGroup: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/$$manager$$
            baseInstanceName: $$manager$$
            fingerprint: fFkOihryKKQ=
            currentActions:
              none: 3
              creating: 0
              creatingWithoutRetries: 0
              verifying: 0
              recreating: 0
              deleting: 0
              abandoning: 0
              restarting: 0
              refreshing: 0
            pendingActions:
              creating: 0
              deleting: 0
              recreating: 0
              restarting: 0
            status:
              isStable: true
              versionTarget:
                isReached: false
            targetSize: 3
            selfLink: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$
            updatePolicy:
              type: OPPORTUNISTIC
              minimalAction: REPLACE
              maxSurge:
                fixed: 1
                calculated: 1
              maxUnavailable:
                fixed: 1
                calculated: 1
              minReadySec: 0
            serviceAccount: 462803083913@cloudservices.gserviceaccount.com
    - expect_exit:
        code: 0
- execute_command:
    command: compute instances list --zones '$$list_zones$$' --filter 'machineType:n1-standard-1 AND name:$$manager$$'
      --format 'value(machineType)'
    validation_only: true
    events:
    - expect_stdout: |
        n1-standard-1
        n1-standard-1
        n1-standard-1
    - expect_exit:
        code: 0
- execute_command:
    command: compute instance-groups managed list-instances $$manager$$ --zone us-central1-f
      --format 'text(instanceStatus,version.name)'
    validation_only: true
    events:
    - expect_stdout: |
        ---
        instanceStatus: RUNNING
        ---
        instanceStatus: RUNNING
        ---
        instanceStatus: RUNNING
    - expect_exit:
        code: 0


- execute_command:
    command: compute instance-groups managed rolling-action restart $$manager$$ --max-unavailable=100%
      --format=disable --zone us-central1-f
    events:
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '1821'
            Content-Type: application/json; charset=UTF-8
            ETag: '"InkXMVC5vBEo6zE6E2rRXaucYSM=/HM-41Rlc2iob0ba2KdjlqD-ulOM="'
            status: '200'
          body:
            kind: compute#instanceGroupManager
            id: '1549576236411883597'
            creationTimestamp: '2019-07-01T09:02:42.245-07:00'
            name: $$manager$$
            zone: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
            instanceTemplate: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$
            versions:
            - instanceTemplate: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$
              targetSize:
                calculated: 3
            instanceGroup: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/$$manager$$
            baseInstanceName: $$manager$$
            fingerprint: fFkOihryKKQ=
            currentActions:
              none: 3
              creating: 0
              creatingWithoutRetries: 0
              verifying: 0
              recreating: 0
              deleting: 0
              abandoning: 0
              restarting: 0
              refreshing: 0
            pendingActions:
              creating: 0
              deleting: 0
              recreating: 0
              restarting: 0
            status:
              isStable: true
              versionTarget:
                isReached: false
            targetSize: 3
            selfLink: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$
            updatePolicy:
              type: OPPORTUNISTIC
              minimalAction: REPLACE
              maxSurge:
                fixed: 1
                calculated: 1
              maxUnavailable:
                fixed: 1
                calculated: 1
              minReadySec: 0
            serviceAccount: 462803083913@cloudservices.gserviceaccount.com
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$/listPerInstanceConfigs?alt=json&maxResults=500
          method: POST
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private
            Content-Type: application/json; charset=UTF-8
            status: '200'
          body: null
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$?alt=json
          method: PATCH
          headers: {}
          body:
            json:
              updatePolicy:
                type: PROACTIVE
                minimalAction: RESTART
                maxUnavailable:
                  fixed: null
                  percent: 100
              versions:
              - instanceTemplate: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$
                targetSize:
                  calculated: 3
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '886'
            Content-Type: application/json; charset=UTF-8
            status: '200'
          body:
            kind: compute#operation
            id: '8263425678514819564'
            name: operation-1561997058779-58ca0c7d429c1-f5b4d48c-704d5ddd
            zone: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
            operationType: patch
            targetLink: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$
            targetId: '1549576236411883597'
            status: RUNNING
            user: 462803083913-lak0k1ette3muh3o3kb3pp2im3urj3e9@developer.gserviceaccount.com
            progress: 0
            insertTime: '2019-07-01T09:04:19.941-07:00'
            startTime: '2019-07-01T09:04:19.951-07:00'
            selfLink: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/operations/operation-1561997058779-58ca0c7d429c1-f5b4d48c-704d5ddd
        poll_operation: true
    - expect_stderr:
        matches: |
          Updated \[https://.*.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$\].
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$?alt=json
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '1871'
            Content-Type: application/json; charset=UTF-8
            ETag: '"InkXMVC5vBEo6zE6E2rRXaucYSM=/fF7w0NBwayBQdVKTNMg5jFr20jo="'
            status: '200'
          body:
            kind: compute#instanceGroupManager
            id: '1549576236411883597'
            creationTimestamp: '2019-07-01T09:02:42.245-07:00'
            name: $$manager$$
            zone: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
            instanceTemplate: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$
            versions:
            - name: 0/2019-07-01 16:04:18.765730+00:00
              instanceTemplate: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$
              targetSize:
                calculated: 3
            instanceGroup: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroups/$$manager$$
            baseInstanceName: $$manager$$
            fingerprint: _bgdFlEoxZ0=
            currentActions:
              none: 0
              creating: 1
              creatingWithoutRetries: 0
              verifying: 0
              recreating: 0
              deleting: 3
              abandoning: 0
              restarting: 0
              refreshing: 0
            pendingActions:
              creating: 2
              deleting: 0
              recreating: 0
              restarting: 0
            status:
              isStable: false
              versionTarget:
                isReached: false
            targetSize: 3
            selfLink: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$
            updatePolicy:
              type: PROACTIVE
              minimalAction: RESTART
              maxSurge:
                fixed: 1
                calculated: 1
              maxUnavailable:
                percent: 100
                calculated: 3
              minReadySec: 0
            serviceAccount: 462803083913@cloudservices.gserviceaccount.com
        expect_response:
          extract_references:
          - field: versions[0].name
            reference: version
          body:
            json: {}
    - expect_exit:
        code: 0


- execute_command:
    command: compute instance-groups managed wait-until --stable $$manager$$ --timeout
      600 --zone us-central1-f --no-user-output-enabled
    validation_only: true
    events:
    - expect_exit:
        code: 0
- execute_command:
    # The 3 instances should have changed machine type.
    command: compute instances list --zones '$$list_zones$$' --filter 'machineType:f1-micro AND name:$$manager$$'
      --format 'value(machineType)'
    validation_only: true
    events:
    - expect_stdout: |
        f1-micro
        f1-micro
        f1-micro
    - expect_exit:
        code: 0
- execute_command:
    # The 3 instances now have the new version indicating they were updated.
    command: compute instance-groups managed list-instances $$manager$$ --zone us-central1-f
      --format 'text(instanceStatus,version.name)'
    validation_only: true
    events:
    - expect_stdout: |
        ---
        instanceStatus: RUNNING
        version.name:   $$version$$
        ---
        instanceStatus: RUNNING
        version.name:   $$version$$
        ---
        instanceStatus: RUNNING
        version.name:   $$version$$
    - expect_exit:
        code: 0


- execute_command:
    command: compute instance-groups managed delete $$manager$$ --zone us-central1-f
    cleanup_for: manager
    events:
    - expect_prompt_continue:
        message: |
          The following instance group managers will be deleted:
           - [$$manager$$] in [us-central1-f]
        user_input: y
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/autoscalers?alt=json&maxResults=500
          method: GET
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '246'
            Content-Type: application/json; charset=UTF-8
            ETag: '"d0qlxGs7IDMWj5Cb5HWnRHaQExg=/t1Bc8HmBVTebEsNq4lkGgM-GYt0="'
            status: '200'
          body:
            kind: compute#autoscalerList
            id: projects/cloud-sdk-integration-testing/zones/us-central1-f/autoscalers
            selfLink: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/autoscalers
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$?alt=json
          method: DELETE
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '916'
            Content-Type: application/json; charset=UTF-8
            status: '200'
          body:
            kind: compute#operation
            id: '203104272583725373'
            name: operation-1561997265492-58ca0d42658e9-cb39e27b-0ba41b57
            zone: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f
            operationType: compute.instanceGroupManagers.delete
            targetLink: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$
            targetId: '1549576236411883597'
            status: RUNNING
            user: 462803083913-lak0k1ette3muh3o3kb3pp2im3urj3e9@developer.gserviceaccount.com
            progress: 0
            insertTime: '2019-07-01T09:07:46.294-07:00'
            startTime: '2019-07-01T09:07:46.305-07:00'
            selfLink: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/operations/operation-1561997265492-58ca0d42658e9-cb39e27b-0ba41b57
        poll_operation: true
    - expect_stderr:
        matches: |
          Deleted \[https://.*.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/zones/us-central1-f/instanceGroupManagers/$$manager$$\].
    - expect_progress_tracker:
        message: Deleting Managed Instance Group
        status: SUCCESS
    - expect_exit:
        code: 0


- execute_command:
    command: compute instance-templates delete $$template1$$
    cleanup_for: template1
    events:
    - expect_prompt_continue:
        message: |
          The following instance templates will be deleted:
           - [$$template1$$]
        user_input: y
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template1$$?alt=json
          method: DELETE
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '745'
            Content-Type: application/json; charset=UTF-8
            status: '200'
          body:
            kind: compute#operation
            id: '475596986619760253'
            name: operation-1561997457862-58ca0df9db068-d3d00f3c-8b2352b9
            operationType: delete
            targetLink: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template1$$
            targetId: '5957109316660465786'
            status: RUNNING
            user: 462803083913-lak0k1ette3muh3o3kb3pp2im3urj3e9@developer.gserviceaccount.com
            progress: 0
            insertTime: '2019-07-01T09:10:58.547-07:00'
            startTime: '2019-07-01T09:10:58.561-07:00'
            selfLink: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/global/operations/operation-1561997457862-58ca0df9db068-d3d00f3c-8b2352b9
        poll_operation: true
    - expect_stderr:
        matches: |
          Deleted \[https://.*.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template1$$\].
    - expect_exit:
        code: 0


- execute_command:
    command: compute instance-templates delete $$template2$$
    cleanup_for: template2
    events:
    - expect_prompt_continue:
        message: |
          The following instance templates will be deleted:
           - [$$template2$$]
        user_input: y
    - api_call:
        expect_request:
          uri: https://$$compute-uri$$/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$?alt=json
          method: DELETE
          headers: {}
          body: null
        return_response:
          headers:
            Cache-Control: private, max-age=0
            Content-Length: '746'
            Content-Type: application/json; charset=UTF-8
            status: '200'
          body:
            kind: compute#operation
            id: '3244882755371634293'
            name: operation-1561997466448-58ca0e020b1b7-21950c16-48a389ef
            operationType: delete
            targetLink: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$
            targetId: '7134987523309670516'
            status: RUNNING
            user: 462803083913-lak0k1ette3muh3o3kb3pp2im3urj3e9@developer.gserviceaccount.com
            progress: 0
            insertTime: '2019-07-01T09:11:06.951-07:00'
            startTime: '2019-07-01T09:11:06.960-07:00'
            selfLink: https://www.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/global/operations/operation-1561997466448-58ca0e020b1b7-21950c16-48a389ef
        poll_operation: true
    - expect_stderr:
        matches: |
          Deleted \[https://.*.googleapis.com/compute/beta/projects/cloud-sdk-integration-testing/global/instanceTemplates/$$template2$$\].
    - expect_exit:
        code: 0

title: Test storage ls.
release_tracks: [ALPHA]
filters:
  DoNotRunOnPy2:
    reason: Storage doesn't support Python 2.
summary:
# This summary is generated by http://go/gcloud-scenario-tests on update and should not be edited.
- execute:
  - command: storage buckets create $$bucket$$ --format none
  - stderr: |
      Created bucket [$$bucket$$].
- execute:
  - command: storage ls
  - stdout: .*$$bucket$$.*$
- execute:
  - command: storage delete gs://$$bucket$$ --num-threads=0
  - error: '1: Source path matches directories but --recursive was not specified.'
actions:
- write_file:
    path: test_data/a.txt
    contents: a.txt contents
- write_file:
    path: test_data/b.txt
    contents: b.txt contents
- generate_resource_id:
    reference: bucket
    prefix: storage-bucket
# Setup.
- execute_command:
    command: storage buckets create $$bucket$$ --format none
    validation_only: true
    events:
    - expect_stderr: |
        Created bucket [$$bucket$$].
    - expect_exit:
        code: 0
# Testing.
- execute_command:
    # Check if bucket was created. Recommend collapsing these lines in your IDE.
    command: storage ls
    events:
    - api_call:
        expect_request:
          uri: https://storage.googleapis.com/storage/v1/b?alt=json&fields=items%2Fname&maxResults=1000&project=cloud-sdk-integration-testing&projection=noAcl
          method: GET
          headers: {}
          body: null
        return_response:
          status: 200
          headers:
            cache-control: private, max-age=0, must-revalidate, no-transform
            content-length: '47680'
            content-type: application/json; charset=UTF-8
            x-guploader-uploadid: ABg5-Uz72vFjrVoPcke1TvZ7ZNKIMJIW3jrAQOi6jvQQR5IVgI_hyIvqdO5bgCi_09JdFOzT7Rkg8rvRnxpZZjn3reNpetDRww
          body:
            items:
            - name: artifacts.cloud-sdk-integration-testing.appspot.com
            - name: chaoren-test
            - name: cloud-indexstore-cloud-sdk-integration-testing-cluster1
            - name: cloud-sdk-integration-test-usage
            - name: cloud-sdk-integration-testing
            - name: cloud-sdk-integration-testing-app-staging
            - name: cloud-sdk-integration-testing-daisy-bkt
            - name: cloud-sdk-integration-testing-daisy-bkt-us
            - name: cloud-sdk-integration-testing-daisy-bkt-us-east1
            - name: cloud-sdk-integration-testing-deployment-logs
            - name: cloud-sdk-integration-testing-ml
            - name: cloud-sdk-integration-testing-ovf-import-bkt-us-central1
            - name: cloud-sdk-integration-testing.appspot.com
            - name: cloud-sdk-integration-testing_cloudbuild
            - name: cloud-sdk-integration-testing_cloudbuild-20200901-150703-xsa5
            - name: cloud-sdk-integration-testing_cloudbuild-20200902-150833-l9wo
            - name: cloud-sdk-integration-testing_cloudbuild-20200902-150840-evxt
            - name: cloud-sdk-integration-testing_cloudbuild-20200903-162007-9aiu
            - name: cloud-sdk-integration-testing_cloudbuild-20200903-180548-f8n8
            - name: cloud-sdk-integration-testing_cloudbuild-20200903-204701-jnww
            - name: cloud-sdk-integration-testing_cloudbuild-20200903-204706-vaf3
            - name: cloud-sdk-integration-testing_cloudbuild-20200903-212155-stz3
            - name: cloud-sdk-integration-testing_cloudbuild-20200903-231200-dqqk
            - name: cloud-sdk-integration-testing_cloudbuild-20200903-234848-ndmu
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-001557-6msf
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-020512-4b50
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-020517-qw9l
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-025256-49gh
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-030249-sbhf
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-030259-jh79
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-031718-dub2
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-031723-adw3
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-031728-oh1u
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-044838-d41i
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-045407-jpy3
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-050409-506f
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-050737-neg9
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-053957-dd2l
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-054002-0srr
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-054006-f1bj
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-054915-f6ao
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-054924-1ukd
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-074531-45zl
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-080049-a3o8
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-080747-4job
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-081741-ow8k
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-083415-s2sn
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-084351-exl7
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-090152-zu2o
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-090157-fqes
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-092450-psqy
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-102946-tzno
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-102951-qqlh
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-102955-csny
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-104313-riiz
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-105710-jg83
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-110517-urel
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-113006-1th6
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-113014-u56d
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-120638-crl9
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-120643-f1hk
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-123048-j7ua
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-133839-iahk
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-133843-n6r6
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-134102-z1x6
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-134409-pn64
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-134906-03si
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-145634-ragq
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-150211-t709
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-161811-lm56
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-164337-9m4y
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-165425-1o6x
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-170302-77g7
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-170307-ny7f
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-170505-cz1j
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-173646-9a41
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-193613-6mmx
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-193617-o7vy
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-194132-lmju
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-195303-97lz
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-200913-xki3
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-200918-hui7
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-205028-v5q9
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-205808-k297
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-205817-3m05
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-205820-cvbz
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-205822-va1c
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-211800-ghgt
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-211804-7sus
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-224450-l8wm
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-230557-v3eu
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-230730-6y19
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-231024-50df
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-231613-fa4z
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-232341-kxnl
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-232346-n7d3
            - name: cloud-sdk-integration-testing_cloudbuild-20200904-232852-fu8z
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-013752-y5ao
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-041923-fwtd
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-050107-eowl
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-050114-ckyf
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-051115-w09q
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-054207-tvaw
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-054217-8e9k
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-054848-2n3z
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-054853-ar9j
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-054858-nmxf
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-060703-vyxa
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-060713-4r6b
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-073933-ho43
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-080014-w6sb
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-080238-268r
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-080246-2d3f
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-082355-21mx
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-082619-i5if
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-082623-ak4x
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-084501-vp38
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-091358-leai
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-091403-1d0e
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-094600-mil2
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-103338-c4ab
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-115151-qjhc
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-115156-x6b5
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-115202-dnqm
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-121012-vy60
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-121015-2qhn
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-121113-1r0i
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-121755-3pxd
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-121759-bxt7
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-143004-fzkt
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-144111-z6sy
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-144117-cw1f
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-152108-22nk
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-152119-f72p
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-162336-t01v
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-162339-aqrf
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-164532-i571
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-170802-vqy3
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-171911-wjw1
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-171915-g52i
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-171920-o9cg
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-173815-f4m9
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-193030-oe3c
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-193039-rsjk
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-194152-u222
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-194156-dppn
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-195200-w5n1
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-200936-lxs0
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-201846-ad0f
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-201851-ezu5
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-201923-qgvl
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-202704-ebaj
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-203037-vwni
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-204223-3hfo
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-204325-3eec
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-223654-zunb
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-223659-gt0q
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-224856-ccir
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-224900-zpa9
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-225750-31m1
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-230942-h5pm
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-230948-oqe7
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-230953-iqwf
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-231252-4wj0
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-234710-ltrj
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-235228-rzd2
            - name: cloud-sdk-integration-testing_cloudbuild-20200905-235234-yebi
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-004458-7uef
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-014346-viyh
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-020112-vx68
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-020116-hpr0
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-022848-l0er
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-022853-7mn1
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-044046-q058
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-044821-uijo
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-050704-rdm8
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-050713-1cs0
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-073151-oun1
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-073836-whun
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-073921-f9tm
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-080857-15wg
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-081528-iw8d
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-082726-5ji3
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-090246-z30a
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-091204-3aew
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-093038-7iyy
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-093043-46ob
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-093047-fdji
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-112231-p3k5
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-113346-p9p6
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-115347-78p3
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-115352-yda0
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-115357-mdzs
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-122121-ag2z
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-140241-y7pk
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-143448-0qqo
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-143458-dqp8
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-151404-6f0a
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-160959-2fvl
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-162906-3w5m
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-165038-loq3
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-171441-j8gj
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-173003-8hqq
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-174400-es1s
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-192950-hm44
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-194305-d6jf
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-194309-x8qg
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-211036-ttf2
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-211712-gzi0
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-214142-tdyp
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-214148-foew
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-214154-rge6
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-224444-weck
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-224452-015l
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-225345-keu7
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-225355-6z9e
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-230346-y0e0
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-231036-b5rr
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-235145-pesr
            - name: cloud-sdk-integration-testing_cloudbuild-20200906-235150-12wt
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-003658-l95j
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-014350-vqco
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-014800-fo8m
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-025250-pl02
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-043944-j63j
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-044926-q7hb
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-050142-gcnl
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-050349-onjj
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-051229-rryy
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-051233-tpmz
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-051239-3pm2
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-055421-8gnj
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-073720-gzpu
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-074337-4cbb
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-074340-r8b5
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-074942-ipbz
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-080755-8i9a
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-080758-wxv8
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-080819-0496
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-081943-kgb0
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-083416-a4yy
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-083442-d77x
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-085507-c3mj
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-090526-p447
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-091002-ioqv
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-091504-mc3h
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-094453-a2oh
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-094505-didu
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-104132-nyt2
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-105505-4ls7
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-105514-7cpe
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-105539-1e3a
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-105618-fut1
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-112036-if7h
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-112323-u50v
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-120733-czw9
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-120744-k7f6
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-133005-6z8l
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-135927-i4jj
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-142714-4fuq
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-142726-2bvp
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-143705-0w0v
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-143711-6jck
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-193029-1l5n
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-193100-6fsh
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-193109-kily
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-194421-0v8c
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-194426-kkqd
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-200322-l34n
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-202703-bnlg
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-211256-pxkg
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-211307-ik30
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-212102-9qwx
            - name: cloud-sdk-integration-testing_cloudbuild-20200907-230557-72t9
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-001144-vwz4
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-001149-a40t
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-014602-v913
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-014610-4zny
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-014616-w2s8
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-024655-13oi
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-043515-x1mc
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-044139-fuj0
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-044143-v8qk
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-044239-ymjt
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-044341-k7ed
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-050902-ejcb
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-051033-lc50
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-051126-25lx
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-052945-hsjw
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-052955-jlzj
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-073746-jty4
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-073906-018e
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-075533-pkeo
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-075541-wl98
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-083157-jt59
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-084035-dzmo
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-085743-r4s2
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-091253-7aei
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-103410-ak9u
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-105835-psse
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-114106-y22t
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-134228-cxm2
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-134434-20vm
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-134439-ax31
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-134754-bzhs
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-141413-l5yx
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-164720-n00l
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-164800-2lns
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-164851-0e5z
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-171918-99ce
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-195331-7cjx
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-195405-urw5
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-200337-ke0v
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-201652-zgdt
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-204608-npgi
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-204614-qa2t
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-210219-qn96
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-210227-u9w1
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-231941-1773
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-232136-5717
            - name: cloud-sdk-integration-testing_cloudbuild-20200908-232838-qgxq
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-001408-8gl5
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-001413-okrr
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-001703-tbvi
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-002126-eih3
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-015236-5e6u
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-024635-roke
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-024648-gw7d
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-025504-brfp
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-025511-aym9
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-025626-czis
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-025631-6juu
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-041518-d43n
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-041523-u1x2
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-042406-kjbo
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-042410-fd2g
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-044455-l646
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-044459-kvy3
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-044504-nu6r
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-045323-r7av
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-045535-1sny
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-050236-0qiq
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-051744-so13
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-051752-2t5p
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-055257-lv1t
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-055302-btfz
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-060611-rp47
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-060616-8dv0
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-060621-bdxj
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-075637-dd8h
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-075641-s18c
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-080322-ei20
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-080326-umx1
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-080613-5tfb
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-081520-u9bc
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-081932-53wn
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-082646-zt5d
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-082926-7hbz
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-083851-ydpx
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-084154-rd8a
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-084601-5x3g
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-084652-zs0t
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-084853-xsa8
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-090036-13kn
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-091450-ue5l
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-094915-czkg
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-094927-wjbz
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-105210-xkv5
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-110145-0wj6
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-110154-5v79
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-113319-3zyi
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-121923-vhx4
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-134237-o8xu
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-134241-2cpa
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-134553-sw67
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-134602-6zp9
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-135808-z4mw
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-141014-5yxh
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-141543-i6wd
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-163342-we1d
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-165713-m9x9
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-165911-84jz
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-170504-557j
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-170510-ip5v
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-174117-1h4t
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-194517-n7jl
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-194859-xqea
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-201602-yvvc
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-201727-lp7h
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-202346-1xqs
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-204345-zaus
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-204608-a5kp
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-210447-0dte
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-213421-fubr
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-224858-4tna
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-231652-w15y
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-233820-48rn
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-233828-bk3s
            - name: cloud-sdk-integration-testing_cloudbuild-20200909-233834-3vcb
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-003315-mbfq
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-004240-m2ub
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-005248-bt22
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-013340-deor
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-014639-yzof
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-014827-l7wr
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-015448-wiou
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-015851-z36d
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-015924-yigv
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-015936-6ar3
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-020729-215l
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-024007-lb7l
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-030348-tilo
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-043247-4sh5
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-044526-40yv
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-044532-sv9t
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-044828-odgn
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-044834-ap16
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-045939-rbpm
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-045943-6680
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-050751-bb4f
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-050756-isab
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-050957-q3qp
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-051001-i38q
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-051429-i4uq
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-051701-zter
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-051707-e4je
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-054531-mkuy
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-074019-iuot
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-075801-ie24
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-082534-kdct
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-083255-992f
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-083502-4go7
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-084037-tgdr
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-084533-k2im
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-084545-s2du
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-085951-pyez
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-090231-odbr
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-091445-3cd1
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-093734-em30
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-093739-3rx8
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-093744-bzt4
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-112843-m6zl
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-112849-fw0y
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-114356-1j8e
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-114401-si1v
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-120643-1vh9
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-120648-tteo
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-121211-cwm3
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-135524-5b5c
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-141254-8ay9
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-143357-lba4
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-143404-7xqd
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-143411-c8it
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-144652-1w01
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-144702-4wwf
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-144708-hgos
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-144900-wbvx
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-161513-ced3
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-172855-iojr
            - name: cloud-sdk-integration-testing_cloudbuild-20200910-182508-3pyr
            - name: cloud-sdk-testing
            - name: cloudsdkbuild
            - name: compute-https-lb-test-gcs-bucket-20200910-193248-bzqk
            - name: compute-https-lb-test-gcs-bucket-20200910-193327-4m0j
            - name: compute-https-lb-test-gcs-bucket-20200910-193345-5g8y
            - name: compute-https-lb-test-gcs-bucket-20200910-193431-11bl
            - name: dataproc-2f5c9b81-91bc-4593-a654-1771af946642-us
            - name: dataproc-a198f4d8-c37b-42d7-8750-850b470ce6b4-us-central1
            - name: dataproc-a63ced4c-fa87-4bea-94a5-4d2f8fbbd783-us
            - name: dataproc-f8710048-79ac-41cb-a9df-f3591df3c32b-us
            - name: dataproc-temp-us-462803083913-0v4ihohx
            - name: dataproc-temp-us-central1-462803083913-xbbpf3cu
            - name: df-do-not-delete-datafusion-vyqd57unmmi6tgrdaanbcs5lqy
            - name: diagnostics_logs_project_462803083913
            - name: do-not-delete-datacatalog
            - name: do-not-delete-genomics-pipelines-test
            - name: do-not-delete-genomics-pipelines-test-inputs
            - name: do-not-delete-image-test
            - name: do-not-delete-integration-test
            - name: do-not-delete-ml-speech-test
            - name: do-not-delete-ml-translate-test
            - name: do-not-delete-ml-video-test
            - name: do-not-delete-ml-vision-test
            - name: do-not-delete-privateca-gcloud-tests
            - name: do-not-delete-redis
            - name: e2e-functions-do-not-delete
            - name: e2e-input-functions
            - name: gaedeptest-20200910-184119-8525bucket
            - name: gaedeptest-20200910-184739-ts0mbucket
            - name: gcf-sources-462803083913-us-central1
            - name: gcloud-export-test-temp
            - name: gcloud-ml-productsearch-test
            - name: gcloud-test-integration-test
            - name: georgiieout
            - name: georgiietest
            - name: hbchai
            - name: liuvictor-test
            - name: magimaster-bucket
            - name: nathanlooney-bucket
            - name: privateca_content_10fca52c-3712-43e1-a24c-f7277e0e222e
            - name: privateca_content_1383cba7-2f7d-4ddc-b23b-7f05ae0b32a5
            - name: privateca_content_154719f8-7c57-409d-87c6-b7e81654fc4e
            - name: privateca_content_36903d79-a9dc-47a2-b9e4-6f44246a677e
            - name: privateca_content_3e318f6f-7378-4178-b8c9-cfff316967ab
            - name: privateca_content_5081a3fb-2049-464b-a16d-ae18b0a1a837
            - name: privateca_content_513abb76-7d93-4090-9ec6-202ee54cc223
            - name: privateca_content_52e0d9b4-7ba6-44a7-8e3b-acc286ee0d72
            - name: privateca_content_58f77bba-f01d-4c92-a64e-96c61e8ab42c
            - name: privateca_content_590e8d47-4707-4fd0-a5ad-df824065ee78
            - name: privateca_content_5a3bca96-17dc-499a-9d06-5febb44b1400
            - name: privateca_content_61c5920d-e847-4074-8f01-3dc39d71948e
            - name: privateca_content_79025669-7f53-4a45-91f0-7ace59e730f2
            - name: privateca_content_92271745-1baa-4998-a818-083aa3f4a32c
            - name: privateca_content_94e875ca-dc1d-48ce-805e-5a0149aed6c7
            - name: privateca_content_95db8bb2-bebf-4164-87c4-daa96d005c98
            - name: privateca_content_98d57ee5-ea94-4e46-9221-6a2542be55ef
            - name: privateca_content_a07dff80-1366-4d0f-89e3-1fedd948ccf6
            - name: privateca_content_a50996e1-5ea6-4510-be6e-4386c4a82ee1
            - name: privateca_content_aab3d11f-8b4e-4a53-9440-f501b48a0976
            - name: privateca_content_ad895a77-bf2a-4dbe-8dad-87295a88c40e
            - name: privateca_content_af59e20a-b4a6-4de2-8a84-c4a3883229f4
            - name: privateca_content_b19358a7-3d32-48fb-ad6a-76473516223a
            - name: privateca_content_b9922092-7b6a-45cc-a804-b13639afdf26
            - name: privateca_content_bd770fde-fdc9-46b2-9103-422661f0b77e
            - name: privateca_content_c0c873aa-05f9-4dd8-b1ed-86a724f153c3
            - name: privateca_content_c88a2a85-c8cf-4020-8260-00c593acd6fe
            - name: privateca_content_c88ebfdb-8a31-495e-bc76-4b274288e9f6
            - name: privateca_content_ca532cd4-2ecc-4159-808d-db64adb4a3d9
            - name: privateca_content_ecbe88c0-1386-422e-ab7d-b7547f62641d
            - name: privateca_content_f4d56504-fe23-49d5-83ab-0d89c06913ac
            - name: privateca_content_fd48d13f-2625-4608-9ab9-778df073dd62
            - name: privateca_content_fdd760b5-bace-4af5-ad5a-9675986c769e
            - name: staging.cloud-sdk-integration-testing.appspot.com
            - name: stephenmw-test
            - name: $$bucket$$
            - name: test-lab-9m4rph26ch1z2-ifqcbfj9jm2js
            - name: test-lab-cloud-sdk-integration-testing
            - name: us-central1-composer-enviro-5306f81c-bucket
            - name: us-central1-composer-enviro-f1a6ba1a-bucket
            - name: us-central1-do-not-delete-e-c67f5fd0-bucket
            - name: us.artifacts.cloud-sdk-integration-testing.appspot.com
            - name: vm-config.cloud-sdk-integration-testing.appspot.com
            - name: vm-containers.cloud-sdk-integration-testing.appspot.com
            - name: wfaris-ml-speech-test
            - name: zjn-upload-test
    - expect_stdout:
        matches: .*$$bucket$$.*
    - expect_exit:
        code: 0
# Tear down.
- execute_command:
    command: storage delete gs://$$bucket$$ --num-threads=0
    cleanup_for: bucket
    events:
    - api_call:
        expect_request:
          uri: https://storage.googleapis.com/storage/v1/b/$$bucket$$/o?alt=json&maxResults=1000
          method: GET
          headers: {}
          body: null
        return_response:
          status: 200
          headers:
            cache-control: private, max-age=0, must-revalidate, no-transform
            content-length: '32'
            content-type: application/json; charset=UTF-8
            x-guploader-uploadid: ABg5-UxmKjM7mGWoJ9PGD19tPKWrgj7AIkjUV532EB5boF212dQWw_s4pn3qT3kLw2BNfLl5GxyimNHLOCUoNzWyOk4rlQe2uw
          body:
            kind: storage#objects
    - expect_exit:
        code: 1
        message: Source path matches directories but --recursive was not specified.
